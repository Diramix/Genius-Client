(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[71],{98456:function(e,i,t){"use strict";t.d(i,{KX:function(){return g},gI:function(){return h},lf:function(){return n},N:function(){return l},hh:function(){return o},H0:function(){return u.useAlbumEntityName},ap:function(){return c.useMarkAlbumListenedClick},SB:function(){return d.useOnLikeClick},BV:function(){return m.useOnPinClick},IK:function(){return v.useOnPresaveClick}});var r,n,a=t(42288),s=t(76873);let l=e=>{let i=(0,s.GFX)(e.trailer);return(0,a.pj)({id:e.id,title:e.title,coverUri:e.coverUri,type:e.type,year:e.year,version:e.version,contentWarning:e.contentWarning,genre:e.genre,likesCount:e.likesCount,averageColor:(0,s.Usz)(e.derivedColors),isAvailable:!!e.available,trackPosition:e.trackPosition,disclaimers:e.disclaimers,trackCount:e.trackCount,availableForPremiumUsers:e.availableForPremiumUsers,availableForOptions:e.availableForOptions||[],bestAlbumTracks:e.bests,durationSec:e.durationSec,trailer:i,listeningFinished:!!e.listeningFinished})},o=e=>{let i=!1;return e.presaveDate?i=!0:e.presaved&&(i=e.presaved),(0,a.pj)({id:e.id,contentWarning:e.contentWarning,disclaimers:e.disclaimers,isPresave:i,title:e.title,type:e.type,coverUri:e.coverUri,releaseDate:e.releaseDate})};(r=n||(n={})).TRACK="track",r.TEXT="text";var u=t(25053),c=t(29365),d=t(41345),m=t(9266),v=t(51578),b=t(31490),p=t(68133);let _=a.V5.model("TrackPosition",{volume:a.V5.number,index:a.V5.number}),g=a.V5.compose(a.V5.model({id:a.V5.number,title:a.V5.string,type:a.V5.maybe(a.V5.enumeration(Object.values(b.VZ))),coverUri:a.V5.maybe(a.V5.string),averageColor:a.V5.maybe(a.V5.string),year:a.V5.maybe(a.V5.number),version:a.V5.maybe(a.V5.string),isAvailable:a.V5.optional(a.V5.boolean,!0),availableForOptions:a.V5.maybe(a.V5.array(a.V5.enumeration(Object.values(b.Yk)))),availableForPremiumUsers:a.V5.maybe(a.V5.boolean),bookmateOptionRequired:a.V5.maybe(a.V5.boolean),genre:a.V5.maybe(a.V5.string),trackPosition:a.V5.maybe(_),disclaimers:a.V5.maybe(a.V5.array(a.V5.string)),trackCount:a.V5.maybe(a.V5.number),bestAlbumTracks:a.V5.maybe(a.V5.array(a.V5.number)),trailer:a.V5.maybe(p.K8),durationSec:a.V5.maybe(a.V5.number),listeningFinished:a.V5.maybe(a.V5.boolean)}),p.fE,p.ie).views(e=>({get url(){return"/album/".concat(e.id)},get isLiked(){if(!(0,a.fh)(e))return!1;let{library:i}=(0,a.yj)(e);return i.isAlbumLiked(e.id)},get pinId(){return"".concat(b.Qm.ALBUM).concat(e.id)},get seeds(){return["album:".concat(e.id)]},get isPodcast(){return e.type===b.VZ.PODCAST},get isAudiobook(){return e.type===b.VZ.AUDIOBOOK},get isNonMusic(){return this.isAudiobook||this.isPodcast},get isPinned(){if(!(0,a.fh)(e))return!1;let{pinsCollection:i}=(0,a.yj)(e);return i.isPinned(this.pinId)},get isForeignAgent(){var i;if(!(0,a.fh)(e))return!1;let{experiments:t}=(0,a.yj)(e);return!!(null===(i=e.disclaimers)||void 0===i?void 0:i.includes(b.em.FOREIGN_AGENT))&&t.checkExperiment(s.peG.WebNextAgentPodcast,"on")},get isLegalRejected(){if(!(0,a.fh)(e))return!1;let{experiments:i}=(0,a.yj)(e),t=i.checkExperiment(s.peG.WebNextLegalRejectAlbum,"on");if(e.disclaimers&&t)return!e.isAvailable&&e.disclaimers.includes(b.em.MODAL);return!1},get isUnsafeLegal(){if(!(0,a.fh)(e))return!1;let{experiments:i}=(0,a.yj)(e),t=i.checkExperiment(s.peG.WebNextLegalUnsafeAlbum,"on");if(e.disclaimers&&t)return e.isAvailable&&e.disclaimers.includes(b.em.MODAL);return!1},get shouldShowPlusBadge(){var t;return!e.isAvailable&&(e.availableForPremiumUsers||!!(null===(t=e.availableForOptions)||void 0===t?void 0:t.includes(b.Yk.BOOKMATE)))},get shouldShowBooksBadge(){var r;return!!(e.bookmateOptionRequired||!e.availableForPremiumUsers&&(null===(r=e.availableForOptions)||void 0===r?void 0:r.includes(b.Yk.BOOKMATE)))}})).actions(e=>({toggleLike:(0,a.ls)(function*(){if(!(0,a.fh)(e))return;let{library:i,user:t}=(0,a.yj)(e);if(t.isAuthorized){let r=yield i.toggleAlbumLike({entityId:e.id,userId:t.account.uid});return(0,a.fh)(e)&&r===b.Bi.OK&&(e.isLiked?e.likePending():e.unlikePending()),r}}),togglePin:(0,a.ls)(function*(){if(!(0,a.fh)(e))return;let{pinsCollection:i,user:t}=(0,a.yj)(e);if(t.isAuthorized)return yield i.toggleAlbumPin({id:e.id},e.pinId)}),getKey:i=>"".concat(i,"_").concat(e.id),updateFinished:i=>{e.listeningFinished=i}})).named("BaseAlbum"),h=a.V5.compose(a.V5.model("BaseUpcomingAlbum",{id:a.V5.number,isPresave:a.V5.boolean,title:a.V5.maybe(a.V5.string),type:a.V5.maybe(a.V5.enumeration(Object.values(b.VZ))),coverUri:a.V5.maybe(a.V5.string),releaseDate:a.V5.maybe(a.V5.string)}),p.ie).actions(e=>{let i={presaveAlbum:(0,a.ls)(function*(i){let{usersResource:t,modelActionsLogger:r}=(0,a.dU)(e);try{e.isPresave=!0;let r=yield t.presaveAlbum(i);return r===b.ZW.ERROR&&(e.isPresave=!1),r}catch(i){return e.isPresave=!1,r.error(i),b.ZW.ERROR}}),removePresaveAlbum:(0,a.ls)(function*(i){let{usersResource:t,modelActionsLogger:r}=(0,a.dU)(e);try{e.isPresave=!1;let r=yield t.removePresaveAlbum(i);return r===b.ZW.ERROR&&(e.isPresave=!0),r}catch(i){return e.isPresave=!0,r.error(i),b.ZW.ERROR}}),toggleLike:(0,a.ls)(function*(){let t;if(!(0,a.fh)(e))return;let{user:r}=(0,a.yj)(e);if(r.account.uid)return t=e.isPresave?yield i.removePresaveAlbum({albumId:e.id,userId:r.account.uid}):yield i.presaveAlbum({albumId:e.id,userId:r.account.uid,likeAfterRelease:!0}),(0,a.fh)(e),t})};return i})},25053:function(e,i,t){"use strict";t.d(i,{useAlbumEntityName:function(){return l}});var r=t(98639),n=t(80542),a=t(31490),s=t(76873);let l=e=>{let{formatMessage:i}=(0,n.Z)(),t=(0,s.RVp)();return(0,r.useMemo)(()=>{if(!t)return e===a.VZ.SINGLE?i({id:"entity-names.single"}):i({id:"entity-names.album"});switch(e){case a.VZ.SINGLE:return i({id:"entity-names.single"});case a.VZ.PODCAST:return i({id:"entity-names.podcast"});case a.VZ.AUDIOBOOK:return i({id:"entity-names.audio"});case a.VZ.FAIRY_TALE:return i({id:"entity-names.fairy-tale"});default:return i({id:"entity-names.album"})}},[e,i,t])}},29365:function(e,i,t){"use strict";t.d(i,{useMarkAlbumListenedClick:function(){return l}});var r=t(98639),n=t(80542),a=t(31490),s=t(76873);let l=()=>{let{user:e,album:i}=(0,s.oR4)(),{notify:t}=(0,s.d$W)(),{formatMessage:l}=(0,n.Z)();return(0,r.useCallback)(async()=>{if(i){var r,n;let o;if(!e.isAuthorized){t(l({id:"authorization-messages.need-to-authorizate"}),{containerId:s.W$x.ERROR});return}let u=null===(r=i.meta)||void 0===r?void 0:r.listeningFinished;u?(o=await i.markUnfinished({albumId:Number(i.id)}),i.setAllTracksUnfinished(!0)):o=await i.markFinished({albumId:Number(i.id)}),o!==a.PE.OK?t(l({id:"error-messages.error-during-action"}),{containerId:s.W$x.ERROR}):null===(n=i.meta)||void 0===n||n.updateFinished(!u)}},[l,t,i,e.isAuthorized])}},94721:function(e,i,t){"use strict";t.d(i,{C:function(){return s}});var r=t(31490),n=t(76873),a=t(3084);let s=e=>{if(!(0,n.RVp)())return a.j9.ALBUM;switch(e.type){case r.VZ.PODCAST:return a.j9.PODCAST;case r.VZ.AUDIOBOOK:return a.j9.AUDIOBOOK;default:return a.j9.ALBUM}}},41345:function(e,i,t){"use strict";t.d(i,{useOnLikeClick:function(){return p}});var r=t(9753),n=t(24244),a=t(98639),s=t(80542),l=t(31490),o=t(76873),u=t(3084),c=t(9544),d=t(94721);let m="/collection/albums",v=e=>{if(!(0,o.RVp)())return m;switch(e.type){case l.VZ.PODCAST:case l.VZ.AUDIOBOOK:return"/collection/non-music/liked";default:return m}},b=(0,c.Pi)(e=>{let{album:i,closeToast:t}=e,n=v(i),a=(0,d.C)(i);return(0,r.jsx)(u.AP,{closeToast:t,entityVariant:a,coverUri:i.coverUri,entityUrl:"/album/".concat(i.id),collectionUrl:n,entityTitle:i.title,isLiked:i.isLiked})}),p=e=>{let{user:i}=(0,o.oR4)(),{notify:t}=(0,o.d$W)(),[c,d]=(0,a.useState)(!1),{formatMessage:m}=(0,s.Z)();return(0,a.useCallback)(async()=>{if(!e)return;if(!i.isAuthorized){t((0,r.jsx)(u.Q,{error:m({id:"authorization-messages.need-to-authorizate"})}),{containerId:o.W$x.ERROR});return}if(c)return;let a={...(0,n.ZN)(e),isLiked:!e.isLiked};d(!0);let s=await e.toggleLike();d(!1),s===l.Bi.OK?t((0,r.jsx)(b,{album:a}),{containerId:o.W$x.INFO}):t((0,r.jsx)(u.Q,{error:m({id:"error-messages.error-during-action"})}),{containerId:o.W$x.ERROR})},[i.isAuthorized,c,e,m,t])}},9266:function(e,i,t){"use strict";t.d(i,{useOnPinClick:function(){return m}});var r=t(9753),n=t(24244),a=t(98639),s=t(80542),l=t(76873),o=t(3084),u=t(9544),c=t(94721);let d=(0,u.Pi)(e=>{let{album:i,closeToast:t}=e,n=(0,c.C)(i);return(0,r.jsx)(o.K1,{closeToast:t,entityVariant:n,coverUri:i.coverUri,entityUrl:"/album/".concat(i.id),entityTitle:i.title,isPinned:i.isPinned})}),m=e=>{let{user:i}=(0,l.oR4)(),{notify:t}=(0,l.d$W)(),{formatMessage:u}=(0,s.Z)(),[c,m]=(0,a.useState)(!1);return(0,a.useCallback)(async()=>{if(!i.isAuthorized){t((0,r.jsx)(o.Q,{error:u({id:"authorization-messages.need-to-authorizate"})}),{containerId:l.W$x.ERROR});return}if(c)return;let a={...(0,n.ZN)(e),isPinned:!e.isPinned};m(!0);let s=await e.togglePin();m(!1),s?t((0,r.jsx)(d,{album:a}),{containerId:l.W$x.INFO}):t((0,r.jsx)(o.Q,{error:u({id:"error-messages.error-during-action"})}),{containerId:l.W$x.ERROR})},[e,u,t,c,i.isAuthorized])}},51578:function(e,i,t){"use strict";t.d(i,{useOnPresaveClick:function(){return d}});var r=t(9753),n=t(24244),a=t(98639),s=t(80542),l=t(31490),o=t(76873),u=t(3084);let c=e=>{let{upcomingAlbum:i,closeToast:t}=e;return(0,r.jsx)(u.V1,{closeToast:t,albumTitle:i.title,coverUri:i.coverUri,entityTitle:i.title,isPresave:i.isPresave})},d=e=>{let{user:i}=(0,o.oR4)(),{notify:t}=(0,o.d$W)(),[d,m]=(0,a.useState)(!1),{formatMessage:v}=(0,s.Z)();return(0,a.useCallback)(async()=>{if(!i.isAuthorized){t((0,r.jsx)(u.Q,{error:v({id:"authorization-messages.need-to-authorizate"})}),{containerId:o.W$x.ERROR});return}if(d)return;let a={...(0,n.ZN)(e),isPresave:!e.isPresave};m(!0);let s=await e.toggleLike();m(!1),s===l.ZW.OK?t((0,r.jsx)(c,{upcomingAlbum:a}),{containerId:o.W$x.INFO}):t((0,r.jsx)(u.Q,{error:v({id:"error-messages.error-during-action"})}),{containerId:o.W$x.ERROR})},[i.isAuthorized,d,e,t,v])}},94342:function(e,i,t){"use strict";t.d(i,{kL:function(){return l.Chart},BH:function(){return s},W5:function(){return n}});var r=t(42288);let n=e=>(0,r.pj)({position:e.position,progress:e.progress});var a=t(31490);let s=r.V5.model("Chart",{position:r.V5.maybe(r.V5.number),progress:r.V5.maybe(r.V5.enumeration(Object.values(a.h9)))});var l=t(59558)},59558:function(e,i,t){"use strict";t.d(i,{Chart:function(){return v}});var r=t(9753),n=t(60836),a=t(9544),s=t(98639),l=t(80542),o=t(31490),u=t(28852),c=t(2570),d=t(7005),m=t.n(d);let v=(0,a.Pi)(e=>{let{progress:i,position:t,isDisliked:a,isDisabled:d,className:v}=e,{formatMessage:b}=(0,l.Z)(),p=(0,s.useMemo)(()=>{switch(i){case o.h9.UP:return"chartUp";case o.h9.DOWN:return"chartDown";case o.h9.NEW:return"chartNew";default:return"chartSame"}},[i]),_=(0,s.useMemo)(()=>{switch(i){case o.h9.UP:return b({id:"entity-names.chart-up"});case o.h9.DOWN:return b({id:"entity-names.chart-down"});case o.h9.NEW:return b({id:"entity-names.chart-new"});default:return b({id:"entity-names.chart-same"})}},[b,i]);return(0,r.jsxs)("div",{className:(0,n.W)(m().root,v),children:[(0,r.jsx)(c.Caption,{variant:"div",weight:"normal",type:"entity",size:"m",className:(0,n.W)(m().position,{[m().position_disliked]:a,[m().position_disabled]:d}),children:t}),(0,r.jsx)(u.Icon,{variant:p,size:"xxs","aria-label":_,className:(0,n.W)(m().progress,m()["progress_".concat(i)],{[m().progress_disliked]:a,[m().progress_disabled]:d})})]})})},70071:function(e,i,t){"use strict";t.d(i,{rf:function(){return h.AlbumCard},oK:function(){return A.AlbumContextMenu},y2:function(){return r.y},ug:function(){return _},wk:function(){return y},vK:function(){return x.UpcomingAlbumCard},W9:function(){return g},ym:function(){return l},cO:function(){return u},wJ:function(){return d},wq:function(){return b},jV:function(){return p.useAlbumDisclaimer}});var r=t(36784),n=t(42288),a=t(98456),s=t(33589);let l=e=>{let i=e.artists.map(e=>(0,s.d)(e));return(0,n.pj)({...(0,a.N)(e),artists:i})};var o=t(76873);let u=e=>{var i,t;let{album:r,artists:a,bookmateOptionRequired:l,chart:u,likesCount:c,trailer:d}=e,{available:m,disclaimers:v}=(0,o.NuW)(r);return(0,n.pj)({id:r.id,title:r.title,coverUri:null===(i=r.cover)||void 0===i?void 0:i.uri,type:r.albumType,contentWarning:r.contentWarning,disclaimers:v,artists:null==a?void 0:a.map(e=>(0,s.tR)({artist:e})),averageColor:null===(t=r.cover)||void 0===t?void 0:t.color,isAvailable:m,likesCount:c,bookmateOptionRequired:l,chart:u,trailer:(0,o.GFX)(d),listeningFinished:r.listeningFinished})};var c=t(94342);let d=e=>{let{album:i,artists:t,likesCount:r,chart:a}=e;return(0,n.pj)({...u({album:i,artists:t,likesCount:r}),chart:a&&(0,c.W5)(a)})};var m=t(74717),v=t(98639);(0,v.cache)(async e=>{try{let{container:i,backendHostTld:t,serverDetectedLocale:r,host:n,fullUrl:a,requestUrl:s}=await (0,o.rbP)(),l=i.get(o.qV$),u=await l.getAlbumWithTracksIds({albumId:Number(e),resumeStream:!1});return"not-found"===u.error&&(0,m.notFound)(),{album:u,backendHostTld:t,serverDetectedLocale:r,host:n,fullUrl:a,requestUrl:s}}catch(e){return{album:void 0,backendHostTld:"",serverDetectedLocale:"",host:null,fullUrl:null,requestUrl:null}}});let b=e=>{var i;let t=null===(i=e.artists)||void 0===i?void 0:i.map(e=>(0,s.tR)({artist:e}));return(0,n.pj)({...(0,a.hh)(e),artists:t})};var p=t(11856);let _=a.KX.props({artists:n.V5.maybe(n.V5.array(s.Go)),chart:n.V5.maybe(c.BH)}).views(e=>({get artistNames(){var i;return null===(i=e.artists)||void 0===i?void 0:i.map(e=>e.name).join(", ")},get artistIds(){var t;return null===(t=e.artists)||void 0===t?void 0:t.map(e=>e.id)}})),g=a.gI.props({artists:n.V5.maybe(n.V5.array(s.Go))}).views(e=>({get artistNames(){var i;return null===(i=e.artists)||void 0===i?void 0:i.map(e=>e.name).join(", ")}}));var h=t(49473),A=t(41566),k=t(9753),C=t(3084);let f=e=>{let{forwardRef:i,isShimmerVisible:t,isShimmerActive:r,title:n,description:a,albums:s,className:l,containerClassName:o,headerClassName:u,viewAllActionLink:c,headingRef:d,headingVariant:m,...v}=e;return(0,k.jsx)(C.HY,{isShimmerVisible:t,isShimmerActive:r,className:l,headerClassName:u,containerClassName:o,ref:i,title:n,description:a,viewAllActionLink:c,headingRef:d,headingVariant:m,...v,children:null==s?void 0:s.map(e=>(0,k.jsx)(h.AlbumCard,{album:e,contentLinesCount:3},e.id))})},y=(0,v.forwardRef)((e,i)=>(0,k.jsx)(f,{forwardRef:i,...e}));var x=t(24298)},36784:function(e,i,t){"use strict";var r,n;t.d(i,{y:function(){return r}}),(n=r||(r={})).PAGE="PAGE",n.CARD="CARD"},11856:function(e,i,t){"use strict";t.d(i,{useAlbumDisclaimer:function(){return s}});var r=t(98639),n=t(3429),a=t(76873);let s=e=>{let{album:i,callback:t,shouldHistoryBack:s}=e,{disclaimer:l,modals:{disclaimerModal:o}}=(0,a.oR4)(),u=(0,r.useRef)(String((0,n.Z)())),c=(0,r.useRef)(!1),d=(0,a.uK4)().get(a.ceh);return(0,r.useEffect)(()=>{l.isUnsafeDisclaimerConfirmed&&l.id===u.current&&!c.current&&(null==t||t(),c.current=!0)},[t,l.isUnsafeDisclaimerConfirmed,l.id]),(0,r.useCallback)(async e=>{let r=d.get(a.BUb.ExEx),n=(null==i?void 0:i.isPodcast)?null==r?void 0:r.includes("".concat(a.coP.PODCAST,"_").concat(i.id)):null==r?void 0:r.includes("".concat(a.coP.ALBUM,"_").concat(null==i?void 0:i.id));if((null==i?void 0:i.isUnsafeLegal)&&n){null==t||t();return}if((null==i?void 0:i.isLegalRejected)||(null==i?void 0:i.isUnsafeLegal)){null==e||e.preventDefault(),await l.getAlbumDisclaimer({albumId:i.id}),i.isUnsafeLegal&&l.setType(a.Gq.UNSAFE),l.setId(u.current),l.setEntityId(i.id),i.isPodcast?l.setEntityType(a.coP.PODCAST):l.setEntityType(a.coP.ALBUM),l.setShouldHistoryBack(!!s),c.current=!1,o.open();return}null==e||e.preventDefault(),null==t||t()},[null==i?void 0:i.id,null==i?void 0:i.isLegalRejected,null==i?void 0:i.isPodcast,null==i?void 0:i.isUnsafeLegal,t,l,o,d,s])}},49473:function(e,i,t){"use strict";t.r(i),t.d(i,{AlbumCard:function(){return P}});var r=t(9753),n=t(60836),a=t(9544),s=t(98639),l=t(80542),o=t(79452),u=t(23881),c=t(84338),d=t(31490),m=t(27491),v=t(28852),b=t(12404),p=t(2570),_=t(98456),g=t(33589),h=t(94342),A=t(76873),k=t(3084),C=t(36784),f=t(11856),y=t(41566),x=t(96027),V=t.n(x);let P=(0,a.Pi)(e=>{let{className:i,children:t,album:a,contentLinesCount:x,withLikesCount:P,withChart:j,withAddition:B=!0,withArtistName:L=!0}=e,{ref:U,intersectionPropertyId:O}=(0,A.VfV)(),{trailer:N,adState:R}=(0,A.oR4)(),{from:I,utmLink:w}=(0,A.MhG)({contextId:a.id,contextType:c.Ak.Album,utmForPageIds:a.artistIds}),{notify:E}=(0,A.d$W)(),{formatMessage:M}=(0,l.Z)(),{sendLikeSearchFeedback:W,sendNavigateSearchFeedback:S,sendPlaySearchFeedback:T}=(0,A.sAF)(),[z,D]=(0,s.useState)(!1),[F,Z]=(0,s.useState)(!1),[K,G]=(0,s.useState)(!1),$=(0,A.zxW)(),q=(0,_.SB)(a),Y=(0,_.BV)(a),H=(0,A.s0h)(a.url),Q=(0,A.s0h)(a.url,!0),[X,J]=(0,s.useState)(!1),ee=(0,A.FTC)(),ei=(0,s.useCallback)(e=>{if(e.stopPropagation(),R.isAdActive){e.preventDefault(),E((0,r.jsx)(k.vd,{}),{containerId:A.W$x.INFO});return}N.openAlbumTrailer(a.id),ee(o.OB.Album,String(a.id))},[a.id,ee,N,R.isAdActive,E]),et=a.type===d.VZ.SINGLE?M({id:"entity-names.single"}):void 0,er=(0,A.tNA)([a.year,et]),en=(0,_.H0)(a.type),ea=(0,s.useMemo)(()=>{var e;let i=a.isLiked?M({id:"entity-names.has-your-like"}):"";return"".concat(en," ").concat(a.title," ").concat(null!==(e=a.version)&&void 0!==e?e:""," ").concat(i)},[en,M,a.title,a.isLiked,a.version]),{isPlaying:es,togglePlay:el}=(0,A.qmq)({playContextParams:{contextData:{type:c.Ak.Album,meta:{id:a.id},from:I,utmLink:w},loadContextMeta:!0}}),eo=(0,f.useAlbumDisclaimer)({album:a,callback:H}),eu=(0,f.useAlbumDisclaimer)({album:a,callback:Q}),ec=(0,f.useAlbumDisclaimer)({album:a,callback:el}),ed=(0,g.ik)(eu,eo),em=(0,s.useCallback)(e=>{$({to:o.qU.AlbumScreen}),null==S||S(),ed(e)},[$,S,ed]),ev=(0,s.useCallback)(e=>{em(e)},[em]),eb=(0,s.useCallback)(()=>{F||es||(Z(!0),null==T||T()),ec()},[es,F,T,ec]),ep=(0,s.useCallback)(()=>{z||a.isLiked||(D(!0),null==W||W()),q()},[a.isLiked,q,z,W]),e_=(0,s.useCallback)(()=>{G(!K),J(!K)},[K]),eg=(0,s.useMemo)(()=>{var e;return(0,r.jsxs)(p.Caption,{className:(0,n.W)(V().title,{[V().title_withVersion]:a.version,[V().title_withChart]:j}),variant:"div",type:"entity",size:"s",weight:"medium",lineClamp:2,...(0,u.BA)(u.bG.album.ALBUM_TITLE),children:[(0,r.jsx)(k.rU,{"aria-label":"".concat(a.title," ").concat(null!==(e=a.version)&&void 0!==e?e:""),className:V().titleLink,href:a.url,onClick:em,children:a.title}),a.version&&(0,r.jsx)(p.Caption,{className:V().version,variant:"span",...(0,u.BA)(u.bG.album.ALBUM_VERSION),children:" ".concat(a.version)})]})},[a.title,a.url,a.version,em,j]),eh=(0,s.useMemo)(()=>{var e;return(0,r.jsx)(k.rU,{href:a.url,onClick:em,children:"".concat(a.title," ").concat(null!==(e=a.version)&&void 0!==e?e:"")})},[a.title,a.url,a.version,em]),eA=(0,s.useMemo)(()=>{var e;if(null==a?void 0:null===(e=a.trailer)||void 0===e?void 0:e.canShow)return(0,r.jsx)(k.xf,{children:(0,r.jsx)(k.eP,{className:(0,n.W)(V().trailerButton,V().control),radius:"round",size:"s",iconSize:"xxs",onClick:ei},a.getKey("TrailerButton"))})},[a,ei]),ek=(0,s.useMemo)(()=>(0,r.jsx)(y.AlbumContextMenu,{album:a,onOpenChange:e_,open:K,className:(0,n.W)(V().menuButton,V().control),icon:(0,r.jsx)(v.Icon,{size:"xxs",variant:"more"}),size:"s",variant:C.y.CARD,...(0,u.BA)(u.bG.album.ALBUM_CONTEXT_MENU_BUTTON)},a.getKey("AlbumContextMenu")),[a,e_,K]),eC=(0,s.useMemo)(()=>{if(a.isAvailable)return(0,r.jsx)(m.kk,{isVisible:K||X,className:V().controls,playControl:(0,r.jsx)(k.JM,{className:(0,n.W)(V().playButton,V().control),buttonVariant:"default",withHover:!1,iconSize:"xl",variant:"filled",onClick:eb,isPlaying:es},a.getKey("PlayButton")),likeControl:(0,r.jsx)(k.dJ,{className:(0,n.W)(V().likeButton,V().control),isLiked:a.isLiked,onClick:ep,variant:"default",size:"s",iconSize:"xxs"},a.getKey("LikeButton")),menuControl:ek,pinControl:(0,r.jsx)(k.RT,{onClick:Y,isPinned:a.isPinned,className:(0,n.W)(V().pinButton,V().control),withRipple:!1},a.getKey("PinButton")),trailerControl:eA})},[a,K,X,eb,es,ep,ek,Y,eA]),ef=(0,s.useMemo)(()=>{let e=a.shouldShowPlusBadge&&!a.isUnsafeLegal&&!a.isLegalRejected;return(0,r.jsx)(b.Paper,{className:V().cover,radius:"s",withShadow:!0,...(0,u.BA)(u.bG.album.ALBUM_CARD),children:(0,r.jsxs)("div",{className:V().coverBlock,onClick:ev,children:[(0,r.jsx)(k.BE,{className:V().image,src:a.coverUri,size:200,fit:"cover",alt:ea,withAvatarReplace:!0,isAvailable:a.isAvailable,"aria-hidden":!0}),e&&(0,r.jsx)(v.Icon,{variant:"plusBadge",className:V().plusBadge}),eC]})})},[ev,a.coverUri,a.isAvailable,ea,a.shouldShowPlusBadge,a.isUnsafeLegal,a.isLegalRejected,eC]);return(0,r.jsxs)(m.m7,{ref:U,className:(0,n.W)(V().root,{[V().root_withChart]:j},i),"aria-label":ea,explicitMarkComponent:a.albumExplicitMark&&(0,r.jsx)(k.$i,{variant:a.albumExplicitMark,iconSize:a.isNonMusic?"xs":"xxxs"}),title:eg,srTitle:eh,"data-intersection-property-id":O,contentLinesCount:x,view:ef,description:L&&(0,r.jsx)(g.jO,{className:V().artists,artists:a.artists,lineClamp:1,linkClassName:V().artistLink,captionSize:"s"},a.getKey("description")),chart:j&&a.chart&&(0,r.jsx)(h.kL,{className:V().chart,position:a.chart.position,progress:a.chart.progress},a.getKey("chart")),...(0,u.BA)(u.bG.album.ALBUM_ITEM),children:[B&&er&&(0,r.jsx)(p.Caption,{className:V().addition,variant:"div",type:"entity",size:"s",weight:"medium",lineClamp:1,children:er}),P&&!!a.actualLikesCount&&(0,r.jsx)(k.DB,{className:V().likeTextButton,ariaLabel:M({id:"entity-names.likes-counter"},{counter:a.actualLikesCount}),likesCount:a.actualLikesCount,isLiked:a.isLiked,handleLikeClick:q}),t]})})},41566:function(e,i,t){"use strict";t.d(i,{AlbumContextMenu:function(){return b}});var r=t(9753),n=t(9544),a=t(98639),s=t(80542),l=t(79452),o=t(23881),u=t(385),c=t(98456),d=t(76873),m=t(3084),v=t(36784);let b=(0,n.Pi)(e=>{var i,t;let{album:n,onOpenChange:b,open:p,wrapperClassName:_,variant:g,...h}=e,{settings:A,trailer:k,adState:C}=(0,d.oR4)(),f=(0,c.SB)(n),y=(0,c.BV)(n),{notify:x}=(0,d.d$W)(),V=(0,d.FTC)(),P="".concat(d.aUg.ALBUM,"-").concat(n.id),j=A.layout===d.t8m.Mobile,B=(0,d.RVp)()&&n.isNonMusic,L=B&&g===v.y.PAGE,{formatMessage:U}=(0,s.Z)(),O=(0,c.ap)(),{href:N}=(0,d.qKB)(n.url),{isPlaying:R,togglePlay:I}=(0,d.QhE)({seeds:null!==(t=null==n?void 0:n.seeds)&&void 0!==t?t:[],pageIdForFrom:d.Rhz.RADIO,blockIdForFrom:P}),w=(0,a.useCallback)(()=>{if(C.isAdActive){x((0,r.jsx)(m.vd,{}),{containerId:d.W$x.INFO});return}R||I()},[R,I,C.isAdActive,x]),E=(0,a.useCallback)(()=>{if(C.isAdActive){x((0,r.jsx)(m.vd,{}),{containerId:d.W$x.INFO});return}k.openAlbumTrailer(n.id),V(l.OB.Album,String(n.id))},[n.id,V,k,C.isAdActive,x]);(0,d.ZP4)(p);let M=(0,a.useMemo)(()=>{if(!j)return(0,r.jsx)(m.Zd,{onClick:y,isPinned:n.isPinned,disabled:!n.isAvailable})},[n.isAvailable,n.isPinned,y,j]),W=(0,a.useMemo)(()=>B?(0,r.jsx)(m.qq,{onClick:f,isLiked:null==n?void 0:n.isLiked,disabled:!n.isAvailable,albumType:n.type}):(0,r.jsx)(m.xZ,{onClick:f,isLiked:null==n?void 0:n.isLiked,disabled:!n.isAvailable}),[n.isAvailable,null==n?void 0:n.isLiked,n.type,f,B]),S=(0,a.useMemo)(()=>{var e;if(!B&&(null===(e=n.trailer)||void 0===e?void 0:e.canShow))return(0,r.jsx)(m.NB,{onClick:E})},[null===(i=n.trailer)||void 0===i?void 0:i.canShow,E,B]),T=(0,a.useMemo)(()=>{if(!B)return(0,r.jsx)(m.GQ,{onClick:w,disabled:!n.isAvailable,variant:d.xIL.ALBUM})},[n.isAvailable,w,B]);return(0,r.jsxs)(u.v2,{isMobile:j,offsetOptions:10,open:p,onOpenChange:b,ariaLabel:U({id:"interface-actions.context-menu"}),wrapperClassName:_,containerProps:(0,o.BA)(o.bG.album.ALBUM_CONTEXT_MENU),...h,children:[M,W,S,T,L&&(0,r.jsx)(m.RY,{onClick:O,isFinished:n.listeningFinished}),(0,r.jsx)(m.zq,{shareLink:N,entityVariant:"album",entityTitle:n.title})]})})},24298:function(e,i,t){"use strict";t.d(i,{UpcomingAlbumCard:function(){return k}});var r=t(9753),n=t(60836),a=t(9544),s=t(98639),l=t(80542),o=t(31014),u=t(39513),c=t(27491),d=t(28852),m=t(12404),v=t(2570),b=t(98456),p=t(33589),_=t(76873),g=t(3084),h=t(38994),A=t.n(h);let k=(0,a.Pi)(e=>{let{className:i,children:t,upcomingAlbum:a,contentLinesCount:h}=e,{ref:k,intersectionPropertyId:C}=(0,_.VfV)(),{formatMessage:f,formatDate:y}=(0,l.Z)(),x=(0,b.IK)(a),V=(0,s.useMemo)(()=>{let e=f({id:"entity-names.upcoming-album-name"},{upcomingAlbumName:a.title}),i=a.isPresave?f({id:"entity-names.has-your-like"}):"";return"".concat(e," ").concat(i)},[f,a.title,a.isPresave]),P=(0,s.useMemo)(()=>(0,r.jsxs)(m.Paper,{className:A().cover,radius:"s",withShadow:!0,children:[(0,r.jsx)(g.BE,{className:A().image,src:a.coverUri,size:200,fit:"cover",alt:V,withAvatarReplace:!0}),(0,r.jsx)(c.kk,{className:A().controls,playControl:(0,r.jsx)(u.z,{className:A().lockButton,disabled:!0,radius:"xxxl",variant:"default",size:"s",icon:(0,r.jsx)(d.Icon,{variant:"lock",size:"xxs",className:A().lockIcon}),"aria-label":f({id:"entity-names.upcoming-album-play-disabled"})}),likeControl:(0,r.jsx)(g.dJ,{className:(0,n.W)(A().control,A().presaveButton),isLiked:a.isPresave,onClick:x,variant:"default",size:"s",iconSize:"xxs"})})]}),[f,x,a.coverUri,a.isPresave,V]);return(0,r.jsxs)(c.m7,{ref:k,className:(0,n.W)(A().root,i),"aria-label":V,explicitMarkComponent:a.albumExplicitMark&&(0,r.jsx)(g.$i,{variant:a.albumExplicitMark}),title:(0,r.jsx)(v.Caption,{variant:"div",type:"entity",size:"s",weight:"medium",lineClamp:2,children:a.title}),"data-intersection-property-id":C,contentLinesCount:h,view:P,description:(0,r.jsx)(p.jO,{className:A().artists,artists:a.artists,lineClamp:1,linkClassName:A().artistLink,captionSize:"s"}),children:[(0,r.jsx)(v.Caption,{className:A().releaseDate,variant:"div",type:"entity",size:"s",weight:"medium",lineClamp:1,children:(0,r.jsx)(o.Z,{id:"entity-names.upcoming-album-date",values:{releaseDate:y(a.releaseDate,(0,_.YTW)())}})}),t]})})},7005:function(e){e.exports={card_root:"HorizontalCardContainer_root__YoAAP",root:"Chart_root__ODed_",position:"Chart_position__7UNY9",position_disliked:"Chart_position_disliked__HzjC7",position_disabled:"Chart_position_disabled__poZzD",progress:"Chart_progress__sGj4s",progress_up:"Chart_progress_up__y083c",progress_same:"Chart_progress_same__Cnbdb",progress_down:"Chart_progress_down__lv_ae",progress_new:"Chart_progress_new__7DobI",progress_disliked:"Chart_progress_disliked__maVAk",progress_disabled:"Chart_progress_disabled__JoFqG"}},96027:function(e){e.exports={root:"AlbumCard_root__vP6k4",root_withChart:"AlbumCard_root_withChart__J2SZv",artists:"AlbumCard_artists__phKco",likeTextButton:"AlbumCard_likeTextButton__2AQd9",controls:"AlbumCard_controls__yuO40",cover:"AlbumCard_cover__zXmdl",coverBlock:"AlbumCard_coverBlock__94ZzY",image:"AlbumCard_image__Mm55s",titleLink:"AlbumCard_titleLink__u_WLG",title:"AlbumCard_title__8YvhT",title_withVersion:"AlbumCard_title_withVersion__NClAp",title_withChart:"AlbumCard_title_withChart__PVOiJ",chart:"AlbumCard_chart__gASdj",version:"AlbumCard_version__h2aJz",artistLink:"AlbumCard_artistLink__uPR_2",playButton:"AlbumCard_playButton__mYK9R",likeButton:"AlbumCard_likeButton__9B9C0",menuButton:"AlbumCard_menuButton__pxkA6",pinButton:"AlbumCard_pinButton__Mdi_E",trailerButton:"AlbumCard_trailerButton__typHh",control:"AlbumCard_control__qx7Xh",plusBadge:"AlbumCard_plusBadge__i0FkP"}},38994:function(e){e.exports={root:"UpcomingAlbumCard_root__lSZ5l",controls:"UpcomingAlbumCard_controls__fQ50f",cover:"UpcomingAlbumCard_cover__qvU1m",image:"UpcomingAlbumCard_image__WKtGR",releaseDate:"UpcomingAlbumCard_releaseDate__EvDzB",artists:"UpcomingAlbumCard_artists__Jp1OE",artistLink:"UpcomingAlbumCard_artistLink__RSqXw",control:"UpcomingAlbumCard_control__pSMdI",presaveButton:"UpcomingAlbumCard_presaveButton__ixwy_",lockButton:"UpcomingAlbumCard_lockButton__9_qyp",lockIcon:"UpcomingAlbumCard_lockIcon__wtvkP"}}}]);