(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5708],{43683:function(e,i,t){"use strict";t.d(i,{wV:function(){return d.AlbumEntityNameConsumer},KX:function(){return k},gI:function(){return x},lf:function(){return a},N:function(){return u},hh:function(){return c},H0:function(){return d.useAlbumEntityName},ap:function(){return m.useMarkAlbumListenedClick},SB:function(){return v.useOnLikeClick},BV:function(){return b.useOnPinClick},IK:function(){return p.useOnPresaveClick}});var r,n,a,s,l=t(97898),o=t(20794);let u=e=>{let i=(0,o.GFX)(e.trailer);return(0,l.pj)({id:e.id,title:e.title,coverUri:e.coverUri,type:e.type,year:e.year,version:e.version,contentWarning:e.contentWarning,genre:e.genre,likesCount:e.likesCount,averageColor:(0,o.Usz)(e.derivedColors),isAvailable:!!e.available,trackPosition:e.trackPosition,disclaimers:e.disclaimers,trackCount:e.trackCount,availableForPremiumUsers:e.availableForPremiumUsers,availableForOptions:e.availableForOptions||[],bestAlbumTracks:e.bests,durationSec:e.durationSec,trailer:i,listeningFinished:!!e.listeningFinished})},c=e=>{let i=!1;return e.presaveDate?i=!0:e.presaved&&(i=e.presaved),(0,l.pj)({id:e.id,contentWarning:e.contentWarning,disclaimers:e.disclaimers,isPresave:i,title:e.title,type:e.type,coverUri:e.coverUri,releaseDate:e.releaseDate})};(r=a||(a={})).TRACK="track",r.TEXT="text";var d=t(89424),m=t(704),v=t(65436),b=t(36750),p=t(32335),h=t(43236);(n=s||(s={})).KIDS="kids",n.BOOKMATE="bookmate";var A=t(4110),_=t(81337),g=t(30821),f=t(15526);let C=l.V5.model("TrackPosition",{volume:l.V5.number,index:l.V5.number}),k=l.V5.compose(l.V5.model({id:l.V5.number,title:l.V5.string,type:l.V5.maybe(l.V5.enumeration(Object.values(h.V))),coverUri:l.V5.maybe(l.V5.string),averageColor:l.V5.maybe(l.V5.string),year:l.V5.maybe(l.V5.number),version:l.V5.maybe(l.V5.string),isAvailable:l.V5.optional(l.V5.boolean,!0),availableForOptions:l.V5.maybe(l.V5.array(l.V5.enumeration(Object.values(s)))),availableForPremiumUsers:l.V5.maybe(l.V5.boolean),bookmateOptionRequired:l.V5.maybe(l.V5.boolean),genre:l.V5.maybe(l.V5.string),trackPosition:l.V5.maybe(C),disclaimers:l.V5.maybe(l.V5.array(l.V5.string)),trackCount:l.V5.maybe(l.V5.number),bestAlbumTracks:l.V5.maybe(l.V5.array(l.V5.number)),trailer:l.V5.maybe(f.K8),durationSec:l.V5.maybe(l.V5.number),listeningFinished:l.V5.maybe(l.V5.boolean)}),f.fE,f.ie).views(e=>({get url(){return"/album/".concat(e.id)},get isLiked(){if(!(0,l.fh)(e))return!1;let{library:i}=(0,l.yj)(e);return i.isAlbumLiked(e.id)},get pinId(){return"".concat(A.Q.ALBUM).concat(e.id)},get seeds(){return["album:".concat(e.id)]},get isPodcast(){return e.type===h.V.PODCAST},get isAudiobook(){return e.type===h.V.AUDIOBOOK},get isNonMusic(){return this.isAudiobook||this.isPodcast},get isPinned(){if(!(0,l.fh)(e))return!1;let{pinsCollection:i}=(0,l.yj)(e);return i.isPinned(this.pinId)},get isForeignAgent(){var i;if(!(0,l.fh)(e))return!1;let{experiments:t}=(0,l.yj)(e);return!!(null===(i=e.disclaimers)||void 0===i?void 0:i.includes(_.e.FOREIGN_AGENT))&&t.checkExperiment(o.peG.WebNextAgentPodcast,"on")},get isLegalRejected(){if(!(0,l.fh)(e))return!1;let{experiments:i}=(0,l.yj)(e),t=i.checkExperiment(o.peG.WebNextLegalRejectAlbum,"on");if(e.disclaimers&&t)return!e.isAvailable&&e.disclaimers.includes(_.e.MODAL);return!1},get isUnsafeLegal(){if(!(0,l.fh)(e))return!1;let{experiments:i}=(0,l.yj)(e),t=i.checkExperiment(o.peG.WebNextLegalUnsafeAlbum,"on");if(e.disclaimers&&t)return e.isAvailable&&e.disclaimers.includes(_.e.MODAL);return!1},get isAvailableOnlyForPlus(){var t;return!e.isAvailable&&(e.availableForPremiumUsers||!!(null===(t=e.availableForOptions)||void 0===t?void 0:t.includes(s.BOOKMATE)))},get shouldShowBooksBadge(){var r;return!!(e.bookmateOptionRequired||!e.availableForPremiumUsers&&(null===(r=e.availableForOptions)||void 0===r?void 0:r.includes(s.BOOKMATE)))}})).actions(e=>({toggleLike:(0,l.ls)(function*(){if(!(0,l.fh)(e))return;let{library:i,user:t}=(0,l.yj)(e);if(t.isAuthorized){let r=yield i.toggleAlbumLike({entityId:e.id,userId:t.account.uid});return(0,l.fh)(e)&&r===g.B.OK&&(e.isLiked?e.likePending():e.unlikePending()),r}}),togglePin:(0,l.ls)(function*(){if(!(0,l.fh)(e))return;let{pinsCollection:i,user:t}=(0,l.yj)(e);if(t.isAuthorized)return yield i.toggleAlbumPin({id:e.id},e.pinId)}),getKey:i=>"".concat(i,"_").concat(e.id),updateFinished:i=>{e.listeningFinished=i}})).named("BaseAlbum");var y=t(52900);let x=l.V5.compose(l.V5.model("BaseUpcomingAlbum",{id:l.V5.number,isPresave:l.V5.boolean,title:l.V5.maybe(l.V5.string),type:l.V5.maybe(l.V5.enumeration(Object.values(h.V))),coverUri:l.V5.maybe(l.V5.string),releaseDate:l.V5.maybe(l.V5.string)}),f.ie).actions(e=>{let i={presaveAlbum:(0,l.ls)(function*(i){let{usersResource:t,modelActionsLogger:r}=(0,l.dU)(e);try{e.isPresave=!0;let r=yield t.presaveAlbum(i);return r===y.Z.ERROR&&(e.isPresave=!1),r}catch(i){return e.isPresave=!1,r.error(i),y.Z.ERROR}}),removePresaveAlbum:(0,l.ls)(function*(i){let{usersResource:t,modelActionsLogger:r}=(0,l.dU)(e);try{e.isPresave=!1;let r=yield t.removePresaveAlbum(i);return r===y.Z.ERROR&&(e.isPresave=!0),r}catch(i){return e.isPresave=!0,r.error(i),y.Z.ERROR}}),toggleLike:(0,l.ls)(function*(){let t;if(!(0,l.fh)(e))return;let{user:r}=(0,l.yj)(e);if(r.account.uid)return t=e.isPresave?yield i.removePresaveAlbum({albumId:e.id,userId:r.account.uid}):yield i.presaveAlbum({albumId:e.id,userId:r.account.uid,likeAfterRelease:!0}),(0,l.fh)(e),t})};return i})},89424:function(e,i,t){"use strict";t.d(i,{AlbumEntityNameConsumer:function(){return r},useAlbumEntityName:function(){return o}});var r,n=t(71859),a=t(36621),s=t(43236),l=t(20794);(r||(r={})).PIN="pin";let o=(e,i)=>{let{formatMessage:t}=(0,a.Z)(),r=(0,l.RVp)();return(0,n.useMemo)(()=>{if(!r)return e===s.V.SINGLE?t({id:"entity-names.single"}):t({id:"entity-names.album"});switch(e){case s.V.SINGLE:return t({id:"entity-names.single"});case s.V.PODCAST:return t({id:"entity-names.podcast"});case s.V.AUDIOBOOK:if("pin"===i)return t({id:"entity-names.book"});return t({id:"entity-names.audio"});case s.V.FAIRY_TALE:return t({id:"entity-names.fairy-tale"});default:return t({id:"entity-names.album"})}},[e,t,r,i])}},704:function(e,i,t){"use strict";t.d(i,{useMarkAlbumListenedClick:function(){return l}});var r=t(71859),n=t(36621),a=t(1925),s=t(20794);let l=()=>{let{user:e,album:i}=(0,s.oR4)(),{notify:t}=(0,s.d$W)(),{formatMessage:l}=(0,n.Z)();return(0,r.useCallback)(async()=>{if(i){var r,n;let o;if(!e.isAuthorized){t(l({id:"authorization-messages.need-to-authorizate"}),{containerId:s.W$x.ERROR});return}let u=null===(r=i.meta)||void 0===r?void 0:r.listeningFinished;u?(o=await i.markUnfinished({albumId:Number(i.id)}),i.setAllTracksUnfinished(!0)):o=await i.markFinished({albumId:Number(i.id)}),o!==a.P.OK?t(l({id:"error-messages.error-during-action"}),{containerId:s.W$x.ERROR}):null===(n=i.meta)||void 0===n||n.updateFinished(!u)}},[l,t,i,e.isAuthorized])}},91525:function(e,i,t){"use strict";t.d(i,{C:function(){return s}});var r=t(43236),n=t(20794),a=t(96235);let s=e=>{if(!(0,n.RVp)())return a.j9.ALBUM;switch(e.type){case r.V.PODCAST:return a.j9.PODCAST;case r.V.AUDIOBOOK:return a.j9.AUDIOBOOK;default:return a.j9.ALBUM}}},65436:function(e,i,t){"use strict";t.d(i,{useOnLikeClick:function(){return h}});var r=t(95660),n=t(10576),a=t(71859),s=t(36621),l=t(30821),o=t(20794),u=t(96235),c=t(44744),d=t(91525),m=t(43236);let v="/collection/albums",b=e=>{if(!(0,o.RVp)())return v;switch(e.type){case m.V.PODCAST:case m.V.AUDIOBOOK:return"/collection/non-music/liked";default:return v}},p=(0,c.Pi)(e=>{let{album:i,closeToast:t}=e,n=b(i),a=(0,d.C)(i);return(0,r.jsx)(u.AP,{closeToast:t,entityVariant:a,coverUri:i.coverUri,entityUrl:"/album/".concat(i.id),collectionUrl:n,entityTitle:i.title,isLiked:i.isLiked})}),h=e=>{let{user:i}=(0,o.oR4)(),{notify:t}=(0,o.d$W)(),[c,d]=(0,a.useState)(!1),{formatMessage:m}=(0,s.Z)();return(0,a.useCallback)(async()=>{if(!e)return;if(!i.isAuthorized){t((0,r.jsx)(u.Q,{error:m({id:"authorization-messages.need-to-authorizate"})}),{containerId:o.W$x.ERROR});return}if(c)return;let a={...(0,n.ZN)(e),isLiked:!e.isLiked};d(!0);let s=await e.toggleLike();d(!1),s===l.B.OK?t((0,r.jsx)(p,{album:a}),{containerId:o.W$x.INFO}):t((0,r.jsx)(u.Q,{error:m({id:"error-messages.error-during-action"})}),{containerId:o.W$x.ERROR})},[i.isAuthorized,c,e,m,t])}},36750:function(e,i,t){"use strict";t.d(i,{useOnPinClick:function(){return m}});var r=t(95660),n=t(10576),a=t(71859),s=t(36621),l=t(20794),o=t(96235),u=t(44744),c=t(91525);let d=(0,u.Pi)(e=>{let{album:i,closeToast:t}=e,n=(0,c.C)(i);return(0,r.jsx)(o.K1,{closeToast:t,entityVariant:n,coverUri:i.coverUri,entityUrl:"/album/".concat(i.id),entityTitle:i.title,isPinned:i.isPinned})}),m=e=>{let{user:i}=(0,l.oR4)(),{notify:t}=(0,l.d$W)(),{formatMessage:u}=(0,s.Z)(),[c,m]=(0,a.useState)(!1);return(0,a.useCallback)(async()=>{if(!i.isAuthorized){t((0,r.jsx)(o.Q,{error:u({id:"authorization-messages.need-to-authorizate"})}),{containerId:l.W$x.ERROR});return}if(c)return;let a={...(0,n.ZN)(e),isPinned:!e.isPinned};m(!0);let s=await e.togglePin();m(!1),s?t((0,r.jsx)(d,{album:a}),{containerId:l.W$x.INFO}):t((0,r.jsx)(o.Q,{error:u({id:"error-messages.error-during-action"})}),{containerId:l.W$x.ERROR})},[e,u,t,c,i.isAuthorized])}},32335:function(e,i,t){"use strict";t.d(i,{useOnPresaveClick:function(){return d}});var r=t(95660),n=t(10576),a=t(71859),s=t(36621),l=t(52900),o=t(20794),u=t(96235);let c=e=>{let{upcomingAlbum:i,closeToast:t}=e;return(0,r.jsx)(u.V1,{closeToast:t,albumTitle:i.title,coverUri:i.coverUri,entityTitle:i.title,isPresave:i.isPresave})},d=e=>{let{user:i}=(0,o.oR4)(),{notify:t}=(0,o.d$W)(),[d,m]=(0,a.useState)(!1),{formatMessage:v}=(0,s.Z)();return(0,a.useCallback)(async()=>{if(!i.isAuthorized){t((0,r.jsx)(u.Q,{error:v({id:"authorization-messages.need-to-authorizate"})}),{containerId:o.W$x.ERROR});return}if(d)return;let a={...(0,n.ZN)(e),isPresave:!e.isPresave};m(!0);let s=await e.toggleLike();m(!1),s===l.Z.OK?t((0,r.jsx)(c,{upcomingAlbum:a}),{containerId:o.W$x.INFO}):t((0,r.jsx)(u.Q,{error:v({id:"error-messages.error-during-action"})}),{containerId:o.W$x.ERROR})},[i.isAuthorized,d,e,t,v])}},6609:function(e,i,t){"use strict";t.d(i,{kL:function(){return l.Chart},BH:function(){return s},W5:function(){return n}});var r=t(97898);let n=e=>(0,r.pj)({position:e.position,progress:e.progress});var a=t(64163);let s=r.V5.model("Chart",{position:r.V5.maybe(r.V5.number),progress:r.V5.maybe(r.V5.enumeration(Object.values(a.h)))});var l=t(37490)},37490:function(e,i,t){"use strict";t.d(i,{Chart:function(){return v}});var r=t(95660),n=t(23974),a=t(44744),s=t(71859),l=t(36621),o=t(64163),u=t(15706),c=t(42255),d=t(29961),m=t.n(d);let v=(0,a.Pi)(e=>{let{progress:i,position:t,isDisliked:a,isDisabled:d,className:v}=e,{formatMessage:b}=(0,l.Z)(),p=(0,s.useMemo)(()=>{switch(i){case o.h.UP:return"chartUp";case o.h.DOWN:return"chartDown";case o.h.NEW:return"chartNew";default:return"chartSame"}},[i]),h=(0,s.useMemo)(()=>{switch(i){case o.h.UP:return b({id:"entity-names.chart-up"});case o.h.DOWN:return b({id:"entity-names.chart-down"});case o.h.NEW:return b({id:"entity-names.chart-new"});default:return b({id:"entity-names.chart-same"})}},[b,i]);return(0,r.jsxs)("div",{className:(0,n.W)(m().root,v),children:[(0,r.jsx)(c.Caption,{variant:"div",weight:"normal",type:"entity",size:"m",className:(0,n.W)(m().position,{[m().position_disliked]:a,[m().position_disabled]:d}),children:t}),(0,r.jsx)(u.Icon,{variant:p,size:"xxs","aria-label":h,className:(0,n.W)(m().progress,m()["progress_".concat(i)],{[m().progress_disliked]:a,[m().progress_disabled]:d})})]})})},13555:function(e,i,t){"use strict";t.d(i,{rf:function(){return g.AlbumCard},oK:function(){return f.AlbumContextMenu},y2:function(){return r.y},ug:function(){return A},wk:function(){return x},vK:function(){return P.UpcomingAlbumCard},W9:function(){return _},ym:function(){return l},re:function(){return u},cO:function(){return d},wJ:function(){return m},wq:function(){return p},jV:function(){return h.useAlbumDisclaimer}});var r=t(59628),n=t(97898),a=t(43683),s=t(11232);let l=e=>{let i=e.artists.map(e=>(0,s.d)(e));return(0,n.pj)({...(0,a.N)(e),artists:i})};var o=t(6609);let u=(e,i)=>(0,n.pj)({...l(e),chart:i&&(0,o.W5)(i)});var c=t(20794);let d=e=>{var i,t;let{album:r,artists:a,bookmateOptionRequired:l,chart:o,likesCount:u,trailer:d}=e,{available:m,disclaimers:v}=(0,c.NuW)(r);return(0,n.pj)({id:r.id,title:r.title,coverUri:null===(i=r.cover)||void 0===i?void 0:i.uri,type:r.albumType,contentWarning:r.contentWarning,disclaimers:v,artists:null==a?void 0:a.map(e=>(0,s.tR)({artist:e})),averageColor:null===(t=r.cover)||void 0===t?void 0:t.color,isAvailable:m,likesCount:u,bookmateOptionRequired:l,chart:o,trailer:(0,c.GFX)(d),listeningFinished:r.listeningFinished})},m=e=>{let{album:i,artists:t,likesCount:r,chart:a}=e;return(0,n.pj)({...d({album:i,artists:t,likesCount:r}),chart:a&&(0,o.W5)(a)})};var v=t(97667),b=t(71859);(0,b.cache)(async e=>{try{let{container:i,backendHostTld:t,locale:r,host:n,fullUrl:a,requestUrl:s}=await (0,c.rbP)(),l=i.get(c.qV$),o=await l.getAlbumWithTracksIds({albumId:Number(e),resumeStream:!1});return"not-found"===o.error&&(0,v.notFound)(),{album:o,backendHostTld:t,locale:r,host:n,fullUrl:a,requestUrl:s}}catch(e){return{album:void 0,backendHostTld:"",locale:null,host:"",fullUrl:null,requestUrl:null}}});let p=e=>{var i;let t=null===(i=e.artists)||void 0===i?void 0:i.map(e=>(0,s.tR)({artist:e}));return(0,n.pj)({...(0,a.hh)(e),artists:t})};var h=t(34868);let A=a.KX.props({artists:n.V5.maybe(n.V5.array(s.Go)),chart:n.V5.maybe(o.BH)}).views(e=>({get artistNames(){var i;return null===(i=e.artists)||void 0===i?void 0:i.map(e=>e.name).join(", ")},get artistIds(){var t;return null===(t=e.artists)||void 0===t?void 0:t.map(e=>e.id)}})),_=a.gI.props({artists:n.V5.maybe(n.V5.array(s.Go))}).views(e=>({get artistNames(){var i;return null===(i=e.artists)||void 0===i?void 0:i.map(e=>e.name).join(", ")}}));var g=t(1848),f=t(64251),C=t(95660),k=t(96235);let y=e=>{let{forwardRef:i,isShimmerVisible:t,isShimmerActive:r,title:n,description:a,albums:s,className:l,containerClassName:o,headerClassName:u,viewAllActionLink:c,headingRef:d,headingVariant:m,...v}=e;return(0,C.jsx)(k.HY,{isShimmerVisible:t,isShimmerActive:r,className:l,headerClassName:u,containerClassName:o,ref:i,title:n,description:a,viewAllActionLink:c,headingRef:d,headingVariant:m,...v,children:null==s?void 0:s.map(e=>(0,C.jsx)(g.AlbumCard,{album:e,contentLinesCount:3},e.id))})},x=(0,b.forwardRef)((e,i)=>(0,C.jsx)(y,{forwardRef:i,...e}));var P=t(80795)},59628:function(e,i,t){"use strict";var r,n;t.d(i,{y:function(){return r}}),(n=r||(r={})).PAGE="PAGE",n.CARD="CARD"},34868:function(e,i,t){"use strict";t.d(i,{useAlbumDisclaimer:function(){return s}});var r=t(71859),n=t(71833),a=t(20794);let s=e=>{let{album:i,callback:t,shouldHistoryBack:s}=e,{disclaimer:l,modals:{disclaimerModal:o}}=(0,a.oR4)(),u=(0,r.useRef)(String((0,n.Z)())),c=(0,r.useRef)(!1),d=(0,a.uK4)().get(a.ceh);return(0,r.useEffect)(()=>{l.isUnsafeDisclaimerConfirmed&&l.id===u.current&&!c.current&&(null==t||t(),c.current=!0)},[t,l.isUnsafeDisclaimerConfirmed,l.id]),(0,r.useCallback)(async e=>{let r=d.get(a.BUb.ExEx),n=(null==i?void 0:i.isPodcast)?null==r?void 0:r.includes("".concat(a.coP.PODCAST,"_").concat(i.id)):null==r?void 0:r.includes("".concat(a.coP.ALBUM,"_").concat(null==i?void 0:i.id));if((null==i?void 0:i.isUnsafeLegal)&&n){null==t||t();return}if((null==i?void 0:i.isLegalRejected)||(null==i?void 0:i.isUnsafeLegal)){null==e||e.preventDefault(),await l.getAlbumDisclaimer({albumId:i.id}),i.isUnsafeLegal&&l.setType(a.Gq.UNSAFE),l.setId(u.current),l.setEntityId(i.id),i.isPodcast?l.setEntityType(a.coP.PODCAST):l.setEntityType(a.coP.ALBUM),l.setShouldHistoryBack(!!s),c.current=!1,o.open();return}null==e||e.preventDefault(),null==t||t()},[null==i?void 0:i.id,null==i?void 0:i.isLegalRejected,null==i?void 0:i.isPodcast,null==i?void 0:i.isUnsafeLegal,t,l,o,d,s])}},1848:function(e,i,t){"use strict";t.r(i),t.d(i,{AlbumCard:function(){return O}});var r=t(95660),n=t(23974),a=t(44744),s=t(71859),l=t(36621),o=t(51739),u=t(9883),c=t(20062),d=t(43236),m=t(1559),v=t(15706),b=t(67061),p=t(42255),h=t(43683),A=t(11232),_=t(6609),g=t(20794),f=t(96235),C=t(59628);let k={mainAxis:-26,alignmentAxis:-16},y={isEnabled:!0,width:20,height:8,tipRadius:2,fill:"var(--ym-background-color-primary-enabled-tooltip)"};var x=t(34868),P=t(64251),V=t(32298),j=t.n(V);let O=(0,a.Pi)(e=>{let{className:i,children:t,album:a,contentLinesCount:V,withLikesCount:O,withChart:N,withAddition:U=!0,withArtistName:B=!0}=e,{ref:L,intersectionPropertyId:R}=(0,g.VfV)(),{trailer:w,advert:I,settings:M,experiments:E}=(0,g.oR4)(),{from:S,utmLink:T}=(0,g.MhG)({contextId:a.id,contextType:c.A.Album,utmForPageIds:a.artistIds}),{notify:W}=(0,g.d$W)(),{formatMessage:z}=(0,l.Z)(),{sendLikeSearchFeedback:D,sendNavigateSearchFeedback:F,sendPlaySearchFeedback:K}=(0,g.sAF)(),[G,Z]=(0,s.useState)(!1),[$,q]=(0,s.useState)(!1),[H,Q]=(0,s.useState)(!1),X=(0,g.zxW)(),J=(0,h.SB)(a),Y=(0,h.BV)(a),ee=(0,g.s0h)(a.url),ei=(0,g.s0h)(a.url,!0),[et,er]=(0,s.useState)(!1),en=(0,g.FTC)(),[ea,es]=(0,s.useState)(!1),el=M.layout===g.t8m.Mobile,eo=a.isAvailableOnlyForPlus&&!a.isUnsafeLegal&&!a.isLegalRejected,eu=E.checkExperiment(g.peG.WebNextBookmatePlusPaywall,"on"),ec=eo&&!el&&eu,ed=(0,s.useCallback)(e=>{if(e.stopPropagation(),I.isAdvertShown){e.preventDefault(),W((0,r.jsx)(f.vd,{}),{containerId:g.W$x.INFO});return}w.openAlbumTrailer(a.id),en(o.OB.Album,String(a.id))},[a.id,en,w,I.isAdvertShown,W]),em=a.type===d.V.SINGLE?z({id:"entity-names.single"}):void 0,ev=(0,g.tNA)([a.year,em]),eb=(0,h.H0)(a.type),ep=(0,s.useMemo)(()=>{var e;let i=a.isLiked?z({id:"entity-names.has-your-like"}):"";return"".concat(eb," ").concat(a.title," ").concat(null!==(e=a.version)&&void 0!==e?e:""," ").concat(i)},[eb,z,a.title,a.isLiked,a.version]),{isPlaying:eh,togglePlay:eA}=(0,g.qmq)({playContextParams:{contextData:{type:c.A.Album,meta:{id:a.id},from:S,utmLink:T},loadContextMeta:!0}}),e_=(0,x.useAlbumDisclaimer)({album:a,callback:ee}),eg=(0,x.useAlbumDisclaimer)({album:a,callback:ei}),ef=(0,x.useAlbumDisclaimer)({album:a,callback:eA}),eC=(0,A.ik)(eg,e_),ek=(0,s.useCallback)(e=>{X({to:o.qU.AlbumScreen}),null==F||F(),eC(e)},[X,F,eC]),ey=(0,s.useCallback)(e=>{ek(e)},[ek]),ex=(0,s.useCallback)(()=>{$||eh||(q(!0),null==K||K()),ef()},[eh,$,K,ef]),eP=(0,s.useCallback)(()=>{G||a.isLiked||(Z(!0),null==D||D()),J()},[a.isLiked,J,G,D]),eV=(0,s.useCallback)(()=>{Q(!H),er(!H)},[H]),ej=(0,s.useMemo)(()=>{var e;return(0,r.jsxs)(p.Caption,{className:(0,n.W)(j().title,{[j().title_withVersion]:a.version,[j().title_withChart]:N}),variant:"div",type:"entity",size:"s",weight:"medium",lineClamp:2,...(0,u.BA)(u.bG.album.ALBUM_TITLE),children:[(0,r.jsx)(f.rU,{"aria-label":"".concat(a.title," ").concat(null!==(e=a.version)&&void 0!==e?e:""),className:j().titleLink,href:a.url,onClick:ek,children:a.title}),a.version&&(0,r.jsx)(p.Caption,{className:j().version,variant:"span",...(0,u.BA)(u.bG.album.ALBUM_VERSION),children:" ".concat(a.version)})]})},[a.title,a.url,a.version,ek,N]),eO=(0,s.useMemo)(()=>{var e;return(0,r.jsx)(f.rU,{href:a.url,onClick:ek,children:"".concat(a.title," ").concat(null!==(e=a.version)&&void 0!==e?e:"")})},[a.title,a.url,a.version,ek]),eN=(0,s.useMemo)(()=>{var e;if(null==a?void 0:null===(e=a.trailer)||void 0===e?void 0:e.canShow)return(0,r.jsx)(f.xf,{children:(0,r.jsx)(f.eP,{className:(0,n.W)(j().trailerButton,j().control),radius:"round",size:"s",iconSize:"xxs",onClick:ed},a.getKey("TrailerButton"))})},[a,ed]),eU=(0,s.useMemo)(()=>(0,r.jsx)(P.AlbumContextMenu,{album:a,onOpenChange:eV,open:H,className:(0,n.W)(j().menuButton,j().control),icon:(0,r.jsx)(v.Icon,{size:"xxs",variant:"more"}),size:"s",variant:C.y.CARD,...(0,u.BA)(u.bG.album.ALBUM_CONTEXT_MENU_BUTTON)},a.getKey("AlbumContextMenu")),[a,eV,H]),eB=(0,s.useCallback)(()=>(0,r.jsx)(f.JM,{className:(0,n.W)(j().playButton,j().control),buttonVariant:"default",withHover:!1,iconSize:"xl",variant:"filled",onClick:ex,isPlaying:eh,disabled:ec},a.getKey("PlayButton")),[ec,a,eh,ex]),eL=(0,s.useMemo)(()=>ec?(0,r.jsx)(f.pl,{className:j().buyPlusPopover,buttonText:z({id:"interface-actions.more-details"}),isNested:!0,placement:"top-start",isOpened:ea,onOpenChange:es,textVariant:"bookmate",arrowProps:y,offsetOptions:k,renderChildren:eB}):eB(),[ec,ea,es,z,eB]),eR=(0,s.useMemo)(()=>{if(!ec)return(0,r.jsx)(f.dJ,{className:(0,n.W)(j().likeButton,j().control),isLiked:a.isLiked,onClick:eP,variant:"default",size:"s",iconSize:"xxs"},a.getKey("LikeButton"))},[a,ec,eP]),ew=(0,s.useMemo)(()=>{if(!ec)return(0,r.jsx)(f.RT,{onClick:Y,isPinned:a.isPinned,className:(0,n.W)(j().pinButton,j().control),withRipple:!1,isDisabled:ec},a.getKey("PinButton"))},[a,ec,Y]),eI=(0,s.useMemo)(()=>{if(a.isAvailable||ec)return(0,r.jsx)(m.kk,{isVisible:H||et||ea,className:j().controls,playControl:eL,likeControl:eR,menuControl:eU,pinControl:ew,trailerControl:eN})},[a,H,et,eU,eN,ea,eL,eR,ew,ec]),eM=(0,s.useMemo)(()=>(0,r.jsx)(b.Paper,{className:j().cover,radius:"s",withShadow:!0,...(0,u.BA)(u.bG.album.ALBUM_CARD),children:(0,r.jsxs)("div",{className:j().coverBlock,onClick:ey,children:[(0,r.jsx)(f.BE,{className:j().image,src:a.coverUri,size:200,fit:"cover",alt:ep,withAvatarReplace:!0,isAvailable:a.isAvailable||ec,"aria-hidden":!0}),eo&&(0,r.jsx)(v.Icon,{variant:"plusBadge",className:j().plusBadge}),eI]})}),[ey,a.coverUri,a.isAvailable,ep,eI,eo,ec]);return(0,r.jsxs)(m.m7,{ref:L,className:(0,n.W)(j().root,{[j().root_withChart]:N},i),"aria-label":ep,explicitMarkComponent:a.albumExplicitMark&&(0,r.jsx)(f.$i,{variant:a.albumExplicitMark,iconSize:a.isNonMusic?"xs":"xxxs"}),title:ej,srTitle:eO,"data-intersection-property-id":R,contentLinesCount:V,view:eM,description:B&&(0,r.jsx)(A.jO,{className:j().artists,artists:a.artists,lineClamp:1,linkClassName:j().artistLink,captionSize:"s"},a.getKey("description")),chart:N&&a.chart&&(0,r.jsx)(_.kL,{className:j().chart,position:a.chart.position,progress:a.chart.progress},a.getKey("chart")),...(0,u.BA)(u.bG.album.ALBUM_ITEM),children:[U&&ev&&(0,r.jsx)(p.Caption,{className:j().addition,variant:"div",type:"entity",size:"s",weight:"medium",lineClamp:1,children:ev}),O&&!!a.actualLikesCount&&(0,r.jsx)(f.DB,{className:j().likeTextButton,ariaLabel:z({id:"entity-names.likes-counter"},{counter:a.actualLikesCount}),likesCount:a.actualLikesCount,isLiked:a.isLiked,handleLikeClick:J}),t]})})},64251:function(e,i,t){"use strict";t.d(i,{AlbumContextMenu:function(){return p}});var r=t(95660),n=t(44744),a=t(71859),s=t(36621),l=t(51739),o=t(9883),u=t(20062),c=t(83317),d=t(43683),m=t(20794),v=t(96235),b=t(59628);let p=(0,n.Pi)(e=>{var i,t;let{album:n,onOpenChange:p,open:h,wrapperClassName:A,variant:_,...g}=e,{shouldShowBuySubscriptionModal:f,showBuySubscriptionModal:C}=(0,m.vLf)(),{settings:k,trailer:y,advert:x,user:P}=(0,m.oR4)(),V=(0,d.SB)(n),j=(0,d.BV)(n),{notify:O}=(0,m.d$W)(),N=(0,m.FTC)(),U="".concat(m.aUg.ALBUM,"-").concat(n.id),B=k.layout===m.t8m.Mobile,L=(0,m.RVp)()&&n.isNonMusic,R=L&&_===b.y.PAGE,{formatMessage:w}=(0,s.Z)(),I=(0,d.ap)(),{href:M}=(0,m.qKB)(n.url),{isPlaying:E,togglePlay:S}=(0,m.QhE)({seeds:null!==(t=null==n?void 0:n.seeds)&&void 0!==t?t:[],pageIdForFrom:m.Rhz.RADIO,blockIdForFrom:U}),{utmLink:T}=(0,m.MhG)({blockId:m.aUg.ALBUM,contextType:u.A.Album,contextId:null==n?void 0:n.id}),W=(0,a.useCallback)(()=>{if(f&&P.isAuthorized){C();return}if(x.isAdvertShown){O((0,r.jsx)(v.vd,{}),{containerId:m.W$x.INFO});return}E||S()},[f,P.isAuthorized,x.isAdvertShown,E,C,O,S]),z=(0,a.useCallback)(()=>{if(f){C();return}if(x.isAdvertShown){O((0,r.jsx)(v.vd,{}),{containerId:m.W$x.INFO});return}y.setUtmLink(T),y.openAlbumTrailer(n.id),N(l.OB.Album,String(n.id))},[f,x.isAdvertShown,y,T,n.id,N,C,O]);(0,m.ZP4)(h);let D=(0,a.useMemo)(()=>{if(!B)return(0,r.jsx)(v.Zd,{onClick:j,isPinned:n.isPinned,disabled:!n.isAvailable})},[n.isAvailable,n.isPinned,j,B]),F=(0,a.useMemo)(()=>L?(0,r.jsx)(v.qq,{onClick:V,isLiked:null==n?void 0:n.isLiked,disabled:!n.isAvailable,albumType:n.type}):(0,r.jsx)(v.xZ,{onClick:V,isLiked:null==n?void 0:n.isLiked,disabled:!n.isAvailable}),[n.isAvailable,null==n?void 0:n.isLiked,n.type,V,L]),K=(0,a.useMemo)(()=>{var e;if(!L&&(null===(e=n.trailer)||void 0===e?void 0:e.canShow))return(0,r.jsx)(v.NB,{onClick:z,disabled:!n.isAvailable})},[n.isAvailable,null===(i=n.trailer)||void 0===i?void 0:i.canShow,z,L]),G=(0,a.useMemo)(()=>{if(!L)return(0,r.jsx)(v.GQ,{onClick:W,disabled:!n.isAvailable,variant:m.xIL.ALBUM})},[n.isAvailable,W,L]);return(0,r.jsxs)(c.v2,{isMobile:B,offsetOptions:10,open:h,onOpenChange:p,ariaLabel:w({id:"interface-actions.context-menu"}),wrapperClassName:A,containerProps:(0,o.BA)(o.bG.album.ALBUM_CONTEXT_MENU),...g,children:[D,F,K,G,R&&(0,r.jsx)(v.RY,{onClick:I,isFinished:n.listeningFinished}),(0,r.jsx)(v.zq,{shareLink:M,entityVariant:"album",entityTitle:n.title})]})})},80795:function(e,i,t){"use strict";t.d(i,{UpcomingAlbumCard:function(){return f}});var r=t(95660),n=t(23974),a=t(44744),s=t(71859),l=t(36621),o=t(71037),u=t(93062),c=t(1559),d=t(15706),m=t(67061),v=t(42255),b=t(43683),p=t(11232),h=t(20794),A=t(96235),_=t(51781),g=t.n(_);let f=(0,a.Pi)(e=>{let{className:i,children:t,upcomingAlbum:a,contentLinesCount:_}=e,{ref:f,intersectionPropertyId:C}=(0,h.VfV)(),{formatMessage:k,formatDate:y}=(0,l.Z)(),x=(0,b.IK)(a),P=(0,s.useMemo)(()=>{let e=k({id:"entity-names.upcoming-album-name"},{upcomingAlbumName:a.title}),i=a.isPresave?k({id:"entity-names.has-your-like"}):"";return"".concat(e," ").concat(i)},[k,a.title,a.isPresave]),V=(0,s.useMemo)(()=>(0,r.jsxs)(m.Paper,{className:g().cover,radius:"s",withShadow:!0,children:[(0,r.jsx)(A.BE,{className:g().image,src:a.coverUri,size:200,fit:"cover",alt:P,withAvatarReplace:!0}),(0,r.jsx)(c.kk,{className:g().controls,playControl:(0,r.jsx)(u.z,{className:g().lockButton,disabled:!0,radius:"xxxl",variant:"default",size:"s",icon:(0,r.jsx)(d.Icon,{variant:"lock",size:"xxs",className:g().lockIcon}),"aria-label":k({id:"entity-names.upcoming-album-play-disabled"})}),likeControl:(0,r.jsx)(A.dJ,{className:(0,n.W)(g().control,g().presaveButton),isLiked:a.isPresave,onClick:x,variant:"default",size:"s",iconSize:"xxs"})})]}),[k,x,a.coverUri,a.isPresave,P]);return(0,r.jsxs)(c.m7,{ref:f,className:(0,n.W)(g().root,i),"aria-label":P,explicitMarkComponent:a.albumExplicitMark&&(0,r.jsx)(A.$i,{variant:a.albumExplicitMark}),title:(0,r.jsx)(v.Caption,{variant:"div",type:"entity",size:"s",weight:"medium",lineClamp:2,children:a.title}),"data-intersection-property-id":C,contentLinesCount:_,view:V,description:(0,r.jsx)(p.jO,{className:g().artists,artists:a.artists,lineClamp:1,linkClassName:g().artistLink,captionSize:"s"}),children:[(0,r.jsx)(v.Caption,{className:g().releaseDate,variant:"div",type:"entity",size:"s",weight:"medium",lineClamp:1,children:(0,r.jsx)(o.Z,{id:"entity-names.upcoming-album-date",values:{releaseDate:y(a.releaseDate,(0,h.YTW)())}})}),t]})})},29961:function(e){e.exports={card_root:"HorizontalCardContainer_root__YoAAP",root:"Chart_root__ODed_",position:"Chart_position__7UNY9",position_disliked:"Chart_position_disliked__HzjC7",position_disabled:"Chart_position_disabled__poZzD",progress:"Chart_progress__sGj4s",progress_up:"Chart_progress_up__y083c",progress_same:"Chart_progress_same__Cnbdb",progress_down:"Chart_progress_down__lv_ae",progress_new:"Chart_progress_new__7DobI",progress_disliked:"Chart_progress_disliked__maVAk",progress_disabled:"Chart_progress_disabled__JoFqG"}},32298:function(e){e.exports={root:"AlbumCard_root__vP6k4",root_withChart:"AlbumCard_root_withChart__J2SZv",artists:"AlbumCard_artists__phKco",likeTextButton:"AlbumCard_likeTextButton__2AQd9",controls:"AlbumCard_controls__yuO40",cover:"AlbumCard_cover__zXmdl",coverBlock:"AlbumCard_coverBlock__94ZzY",image:"AlbumCard_image__Mm55s",titleLink:"AlbumCard_titleLink__u_WLG",title:"AlbumCard_title__8YvhT",title_withVersion:"AlbumCard_title_withVersion__NClAp",title_withChart:"AlbumCard_title_withChart__PVOiJ",chart:"AlbumCard_chart__gASdj",version:"AlbumCard_version__h2aJz",artistLink:"AlbumCard_artistLink__uPR_2",playButton:"AlbumCard_playButton__mYK9R",likeButton:"AlbumCard_likeButton__9B9C0",menuButton:"AlbumCard_menuButton__pxkA6",pinButton:"AlbumCard_pinButton__Mdi_E",trailerButton:"AlbumCard_trailerButton__typHh",control:"AlbumCard_control__qx7Xh",plusBadge:"AlbumCard_plusBadge__i0FkP",buyPlusPopover:"AlbumCard_buyPlusPopover__Kb79C"}},51781:function(e){e.exports={root:"UpcomingAlbumCard_root__lSZ5l",controls:"UpcomingAlbumCard_controls__fQ50f",cover:"UpcomingAlbumCard_cover__qvU1m",image:"UpcomingAlbumCard_image__WKtGR",releaseDate:"UpcomingAlbumCard_releaseDate__EvDzB",artists:"UpcomingAlbumCard_artists__Jp1OE",artistLink:"UpcomingAlbumCard_artistLink__RSqXw",control:"UpcomingAlbumCard_control__pSMdI",presaveButton:"UpcomingAlbumCard_presaveButton__ixwy_",lockButton:"UpcomingAlbumCard_lockButton__9_qyp",lockIcon:"UpcomingAlbumCard_lockIcon__wtvkP"}},52900:function(e,i,t){"use strict";var r,n;t.d(i,{Z:function(){return r}}),(n=r||(r={})).OK="ok",n.ERROR="error"},64163:function(e,i,t){"use strict";var r,n;t.d(i,{h:function(){return r}}),(n=r||(r={})).UP="up",n.DOWN="down",n.SAME="same",n.NEW="new"}}]);