(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3276],{73276:function(i,t,e){"use strict";e.d(t,{vY:function(){return f.EmptyPlaylistBlock},ZL:function(){return L.PlaylistCard},Nn:function(){return _},d2:function(){return P},VD:function(){return x.PlaylistsCarousel},RE:function(){return s},Q9:function(){return u},VB:function(){return d},PB:function(){return y}});var l=e(42288),n=e(76873);let s=i=>{var t,e;let{playlist:s,generatedPlaylistType:a,likesCount:r,trailer:o}=i;return(0,l.pj)({isAvailable:null===(e=s.available)||void 0===e||e,uuid:s.playlistUuid,title:s.title,uid:s.uid,kind:s.kind,coverUri:null===(t=s.cover)||void 0===t?void 0:t.uri,generatedPlaylistType:a,likesCount:r,trailer:(0,n.GFX)(o)})};var a=e(10668);let r=i=>({uid:i.uid,login:i.login,name:i.name,sex:i.sex,verified:i.verified}),o=i=>(0,l.pj)({userInfo:i.userInfo?r(i.userInfo):null,caseForms:i.caseForms?(0,n.GA0)(i.caseForms):null}),u=i=>(0,l.pj)({...(0,a.PV)(i),owner:i.owner?r(i.owner):void 0,description:i.description,modified:i.modified,madeFor:i.madeFor?o(i.madeFor):null});var c=e(33589);let d=i=>{var t,e;return(0,l.pj)({...(0,a.PV)(i),artists:null!==(e=null==i?void 0:null===(t=i.artists)||void 0===t?void 0:t.map(c.d))&&void 0!==e?e:[]})};var p=e(16092);let y=i=>{var t,e;return(0,l.pj)({...(0,a.PV)(i),tracks:null!==(e=null==i?void 0:null===(t=i.tracks)||void 0===t?void 0:t.map(p.wM))&&void 0!==e?e:[]})};var m=e(68133),v=e(31490);let k=l.V5.model("PlaylistOwner",{uid:l.V5.number,login:l.V5.string,name:l.V5.string,sex:l.V5.enumeration(Object.values(v.oF)),verified:l.V5.boolean}),C=l.V5.model("PlaylistOwner",{userInfo:l.V5.maybeNull(k),caseForms:l.V5.maybeNull(m.S2)}),_=a.Cd.props({owner:l.V5.maybe(k),modified:l.V5.string,description:l.V5.maybe(l.V5.string),madeFor:l.V5.maybeNull(C)}).views(i=>({get seeds(){var t;return["playlist:".concat(null===(t=i.owner)||void 0===t?void 0:t.login,"_").concat(i.kind)]}})).actions(i=>({changeDescription:(0,l.ls)(function*(t){if(!(0,l.fh)(i))return n.SLo.ERROR;if(i.description===t)return n.SLo.OK;if(t.length>a.Zn)return n.SLo.ERROR;let{usersResource:e,modelActionsLogger:s}=(0,l.dU)(i);if(i.canUserChange){let l=i.description;i.description=t;try{let l=yield e.changePlaylistDescription({description:t,userId:i.uid,playlistKind:i.kind});return i.description=l.description,n.SLo.OK}catch(t){i.description=l,s.error(t)}}return n.SLo.ERROR}),changePlaylistCover:(0,l.ls)(function*(t){if(!(0,l.fh)(i))return n.SLo.ERROR;let{usersResource:e,modelActionsLogger:s}=(0,l.dU)(i);try{return yield e.uploadPlaylistCover({userId:i.uid,formData:t,playlistKind:i.kind}),n.SLo.OK}catch(i){s.error(i)}return n.SLo.ERROR})})),P=a.$h.props({artists:l.V5.maybe(l.V5.array(c.Go))});var f=e(6030),L=e(22003),x=e(18921)},6030:function(i,t,e){"use strict";e.d(t,{EmptyPlaylistBlock:function(){return p}});var l=e(9753),n=e(60836),s=e(98639),a=e(31014),r=e(23881),o=e(28852),u=e(2570),c=e(98746),d=e.n(c);let p=i=>{let{className:t,isEmptySearch:e}=i,c=(0,s.useMemo)(()=>e?(0,l.jsx)(a.Z,{id:"search-results.not-found-title"}):(0,l.jsx)(a.Z,{id:"error-messages.empty-collection-playlist-title"}),[e]),p=(0,s.useMemo)(()=>e?(0,l.jsx)(a.Z,{id:"search-results.not-found-description"}):(0,l.jsx)(a.Z,{id:"error-messages.empty-collection-playlist-description"}),[e]);return(0,l.jsxs)("div",{className:(0,n.W)(d().root,t),...(0,r.BA)(r.bG.playlist.PLAYLIST_EMPTY_BLOCK),children:[(0,l.jsx)("div",{className:d().iconBackground,children:(0,l.jsx)(o.Icon,{variant:"search",size:"l",className:d().icon,...(0,r.BA)(r.bG.playlist.PLAYLIST_EMPTY_BLOCK_ICON)})}),(0,l.jsx)(u.Heading,{variant:"h3",size:"xs",className:d().title,...(0,r.BA)(r.bG.playlist.PLAYLIST_EMPTY_BLOCK_TITLE),children:c}),(0,l.jsx)(u.Caption,{variant:"span",size:"l",className:d().subtitle,...(0,r.BA)(r.bG.playlist.PLAYLIST_EMPTY_BLOCK_TEXT),children:p})]})}},22003:function(i,t,e){"use strict";e.d(t,{PlaylistCard:function(){return h}});var l=e(9753),n=e(60836),s=e(9544),a=e(98639),r=e(80542),o=e(79452),u=e(23881),c=e(84338),d=e(27491),p=e(28852),y=e(12404),m=e(2570),v=e(33589),k=e(10668),C=e(76873),_=e(3084);let P=i=>{let{formatMessage:t}=(0,r.Z)();return(0,a.useMemo)(()=>{let e="";i.isLiked&&!i.actualLikesCount?e=t({id:"entity-names.has-your-like"}):"number"==typeof i.actualLikesCount&&(e=i.actualLikesCount>0?t({id:"entity-names.likes-counter"},{counter:i.actualLikesCount}):t({id:"entity-names.likes-counter-empty"}));let l=t({id:"entity-names.playlist-name"},{playlistName:i.title});return"".concat(l," ").concat(e)},[t,i])};var f=e(385);let L=(0,s.Pi)(i=>{var t;let{playlist:e,onOpenChange:n,open:s,...c}=i,{settings:d,trailer:p,adState:y}=(0,C.oR4)(),{notify:m}=(0,C.d$W)(),v=(0,k.SB)(e),P=(0,k.BV)(e),L=(0,C.FTC)(),x=d.layout===C.t8m.Mobile,{formatMessage:B}=(0,r.Z)();(0,C.ZP4)(s);let h=(0,a.useCallback)(()=>{if(y.isAdActive){m((0,l.jsx)(_.vd,{}),{containerId:C.W$x.INFO});return}p.openPlaylistTrailer(e.id),L(o.OB.Playlist,e.id)},[e.id,L,p,y.isAdActive,m]);return(0,l.jsxs)(f.v2,{title:e.title,onOpenChange:n,open:s,offsetOptions:10,isMobile:x,ariaLabel:B({id:"interface-actions.context-menu"}),containerProps:(0,u.BA)(u.bG.playlist.PLAYLIST_CONTEXT_MENU),...c,children:[!x&&(0,l.jsx)(_.Zd,{onClick:P,isPinned:e.isPinned}),!e.isFavouritePlaylist&&(0,l.jsx)(_.xZ,{onClick:v,isLiked:e.isLiked}),(null===(t=e.trailer)||void 0===t?void 0:t.canShow)&&(0,l.jsx)(_.NB,{onClick:h})]})});var x=e(88308),B=e.n(x);let h=(0,s.Pi)(i=>{let{className:t,playlist:e,children:s,contentLinesCount:f,customDescription:x}=i,{ref:h,intersectionPropertyId:j}=(0,C.VfV)(),{trailer:b,adState:g}=(0,C.oR4)(),{notify:A}=(0,C.d$W)(),{from:N,utmLink:S}=(0,C.MhG)({contextId:e.uuid,contextType:c.Ak.Playlist}),{formatMessage:T}=(0,r.Z)(),{sendLikeSearchFeedback:V,sendNavigateSearchFeedback:E,sendPlaySearchFeedback:R}=(0,C.sAF)(),[I,O]=(0,a.useState)(!1),[w,M]=(0,a.useState)(!1),[F,z]=(0,a.useState)(!1),K=P(e),Y=(0,k.SB)(e),U=(0,k.BV)(e),W=(0,C.zxW)(),G=(0,C.s0h)(e.url),Z=(0,C.s0h)(e.url,!0),D=(0,v.ik)(Z,G),H=(0,C.FTC)(),q=(0,a.useCallback)(i=>{if(i.stopPropagation(),g.isAdActive){i.preventDefault(),A((0,l.jsx)(_.vd,{}),{containerId:C.W$x.INFO});return}b.setUtmLink(S),b.openPlaylistTrailer(e.id),H(o.OB.Playlist,e.id)},[e.id,H,b,S,g.isAdActive,A]),[Q,X]=(0,a.useState)(!1),{isPlaying:$,togglePlay:J}=(0,C.qmq)({playContextParams:{contextData:{type:c.Ak.Playlist,meta:{id:e.id,uuid:e.uuid},from:N,utmLink:S},loadContextMeta:!0}}),ii=(0,a.useCallback)(()=>{W({to:o.qU.PlaylistScreen}),null==E||E()},[W,E]),it=(0,a.useCallback)(i=>{ii(),D(i)},[D,ii]),ie=(0,a.useCallback)(()=>{I||$||(O(!0),null==R||R()),J()},[$,I,R,J]),il=(0,a.useCallback)(()=>{w||e.isLiked||(M(!0),null==V||V()),Y()},[Y,w,e.isLiked,V]),is=(0,a.useCallback)(i=>{i.preventDefault(),i.stopPropagation()},[]),ia=(0,a.useCallback)(()=>{z(!F),X(!F)},[F]),ir=(0,a.useMemo)(()=>{var i;return x?(0,l.jsx)(m.Caption,{variant:"span",type:"entity",size:"s",weight:"medium",lineClamp:2,children:x},e.getKey("description")):(null===(i=e.artists)||void 0===i?void 0:i.length)?(0,l.jsx)(v.jO,{className:B().artists,artists:e.artists,lineClamp:1,linkClassName:B().artistLink,captionSize:"s"},e.getKey("description")):void 0},[x,e]),io=(0,a.useMemo)(()=>{if(!e.isFavouritePlaylist)return(0,l.jsx)(_.dJ,{className:(0,n.W)(B().likeButton,B().control),isLiked:e.isLiked,onClick:il,variant:"default",size:"s",iconSize:"xxs"},e.getKey("LikeButton"))},[il,e]),iu=(0,a.useMemo)(()=>{var i;if(null==e?void 0:null===(i=e.trailer)||void 0===i?void 0:i.canShow)return(0,l.jsx)(_.xf,{children:(0,l.jsx)(_.eP,{className:(0,n.W)(B().trailerButton,B().control),radius:"round",size:"s",iconSize:"xxs",onClick:q},e.getKey("TrailerButton"))})},[q,e]),ic=(0,a.useMemo)(()=>(0,l.jsx)(y.Paper,{className:B().cover,radius:"s",withShadow:!0,...(0,u.BA)(u.bG.playlist.PLAYLIST_CARD),children:(0,l.jsxs)("div",{className:B().coverBlock,onClick:it,children:[(0,l.jsx)(_.BE,{className:B().image,src:e.coverUri,size:200,fit:"cover",alt:K,withAvatarReplace:!0,"aria-hidden":!0}),(0,l.jsx)(d.kk,{isVisible:F||Q,className:B().controls,playControl:(0,l.jsx)(_.JM,{className:(0,n.W)(B().playButton,B().control),buttonVariant:"default",withHover:!1,iconSize:"xl",variant:"filled",onClick:ie,isPlaying:$,disabled:!e.isAvailable},e.getKey("PlayButton")),likeControl:io,menuControl:(0,l.jsx)(L,{playlist:e,onOpenChange:ia,open:F,onClick:is,className:(0,n.W)(B().menuButton,B().control),icon:(0,l.jsx)(p.Icon,{size:"xxs",variant:"more"}),size:"s",...(0,u.BA)(u.bG.playlist.PLAYLIST_CONTEXT_MENU_BUTTON)},e.getKey("PlaylistContextMenu")),pinControl:(0,l.jsx)(_.RT,{onClick:U,isPinned:e.isPinned,className:(0,n.W)(B().pinButton,B().control),withRipple:!1},e.getKey("PinButton")),trailerControl:iu})]})}),[it,e,K,F,Q,ie,$,io,ia,is,U,iu]),id=!!e.actualLikesCount&&!e.isLikesCountHidden;return(0,l.jsxs)(d.m7,{ref:h,"aria-label":K,className:(0,n.W)(B().root,t),title:(0,l.jsx)(m.Caption,{variant:"div",type:"entity",size:"s",weight:"medium",lineClamp:2,...(0,u.BA)(u.bG.playlist.PLAYLIST_TITLE),children:(0,l.jsx)(_.rU,{className:B().titleLink,href:e.url,onClick:ii,children:e.title})}),srTitle:(0,l.jsx)(_.rU,{href:e.url,onClick:ii,children:e.title}),"data-intersection-property-id":j,contentLinesCount:f,view:ic,description:ir,...(0,u.BA)(u.bG.playlist.PLAYLIST_ITEM),children:[id&&(0,l.jsx)(_.DB,{ariaLabel:T({id:"entity-names.likes-counter"},{counter:e.actualLikesCount}),likesCount:e.actualLikesCount,isLiked:e.isLiked,handleLikeClick:Y}),s]})})},18921:function(i,t,e){"use strict";e.d(t,{PlaylistsCarousel:function(){return o}});var l=e(9753),n=e(98639),s=e(3084),a=e(22003);let r=i=>{let{forwardRef:t,isShimmerVisible:e,isShimmerActive:n,title:r,description:o,playlists:u,containerClassName:c,className:d,headerClassName:p,viewAllActionLink:y,headingVariant:m,...v}=i;return(0,l.jsx)(s.HY,{isShimmerVisible:e,isShimmerActive:n,className:d,headerClassName:p,containerClassName:c,ref:t,title:r,description:o,viewAllActionLink:y,headingVariant:m,...v,children:null==u?void 0:u.map(i=>(0,l.jsx)(a.PlaylistCard,{playlist:i,contentLinesCount:3},i.key))})},o=(0,n.forwardRef)((i,t)=>(0,l.jsx)(r,{forwardRef:t,...i}))},98746:function(i){i.exports={root:"EmptyPlaylistBlock_root__wpA0j",iconBackground:"EmptyPlaylistBlock_iconBackground__pnUlz",title:"EmptyPlaylistBlock_title__pQQLf",subtitle:"EmptyPlaylistBlock_subtitle__P4Q7x"}},88308:function(i){i.exports={root:"PlaylistCard_root__i3pR4",controls:"PlaylistCard_controls__Ej8Rz",cover:"PlaylistCard_cover__tpK5L",coverBlock:"PlaylistCard_coverBlock__1slsN",image:"PlaylistCard_image__Li6oy",titleLink:"PlaylistCard_titleLink__H8qEc",artists:"PlaylistCard_artists__HtVIF",artistLink:"PlaylistCard_artistLink__jx3KB",playButton:"PlaylistCard_playButton__eaduk",likeButton:"PlaylistCard_likeButton__RYXJz",menuButton:"PlaylistCard_menuButton__jFcWr",pinButton:"PlaylistCard_pinButton__jhWnL",trailerButton:"PlaylistCard_trailerButton__Qjg_U",control:"PlaylistCard_control__73YUq"}}}]);