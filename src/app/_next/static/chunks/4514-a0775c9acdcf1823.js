(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4514],{27491:function(e,t,i){"use strict";i.d(t,{kk:function(){return c},m7:function(){return f}});var r,n,a,l=i(98639),o={5881:(e,t,i)=>{function r(){for(var e,t,i=0,r="";i<arguments.length;)(e=arguments[i++])&&(t=function e(t){var i,r,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t))for(i=0;i<t.length;i++)t[i]&&(r=e(t[i]))&&(n&&(n+=" "),n+=r);else for(i in t)t[i]&&(n&&(n+=" "),n+=i)}return n}(e))&&(r&&(r+=" "),r+=t);return r}i.r(t),i.d(t,{clsx:()=>r,default:()=>n});let n=r},6079:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});let r={root:"KL50tMDvfAdw_9MzcVht",bottom:"bL0wE1Bui8zpIZbvMVL3",top:"P6gOmyFtXyetUz0dqhF3",bottom_left:"RvWjZle1erRBXzJEF9Zj",bottom_right:"bBh7lvgdfF7bqNqlK78Q",label:"FgncHYHPDU14dLddn0wF",controls:"PBhQ1krUFiAybu_BS2YE",controls_radius_default:"cSCPJSa6Lx6OnpM4ljX9",controls_radius_round:"kHUOlGxOaBwL4P3jEBXU",controls_visible:"QZC5vQL9p11QsEkdkTtZ"}},1594:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});let r={root:"laBJlJAaqEVS0i_4Ot3l",titleContainer:"LmhA6nlLyzxwYIX31gYa",wrapper:"IO4kvpDGNI2J0CHwcKSf",content:"l8SktNpJd30JWp1owp_b",content_left:"Mb33JzAWx9EjbQAeScFt",description:"kbcBH9meMfY6Du_xQNnI",content_center:"Dp41JRuLGzwV3MHBYHMC",content_right:"eOsuNCgUirwAw16iUKLu",title:"FAmeEGy52GX1k0xZuPDn",content_linesCount_2:"lV4OXsCTURC5K1s9Q5mx",content_linesCount_3:"PVBDIXF2RTUThmbNT9sV",content_linesCount_4:"ND4XIwkIYtNoU89EOISr"}},2994:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});let r={root:"LizdJ2L0HW7JWOvPrfly"}},2068:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});let r={root:"eaYyesBmJL_NbkgoYR1c",focusable:"uL1dD5rxgI4bPmfyMMe7"}},390:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});let r={root_controls_xxs:"tRaaBpDMg9Qu8v6gKjtn",root_entity_xxs:"M9zvtlcpLUVn6DKdcHhj",root_text_xxs:"ln0PYYwDmFnfYxCDJsFU",root_controls_xs:"n5AeWEsJC3_AYXcbK4Lt",root_entity_xs:"__hrMKGmNbw54T54IUyh",root_text_xs:"SehSa7OyRpC2nzYTVb2Q",root_controls_s:"_oBLf5gprWsKjCw4Ce58",root_entity_s:"mxSPe5xpZnie9gpIqacd",root_text_s:"Ai2iRN9elHpk_u5splD6",root_controls_m:"tk7ahHRDYXJMMB879KUA",root_entity_m:"Z_WIr2W8JU4MPQek3hgR",root_text_m:"g3qWNP6xl__7qxNmtrvd",root_controls_l:"grvxapJE3vGArOKDWf6n",root_entity_l:"Esj5A1UeSi4xV4tZ839D",root_text_l:"V3WU123oO65AxsprotU9",root_weight_normal:"ZYV27jeWd30QDXu4GhaH",root_weight_medium:"_3_Mxw7Si7j2g4kWjlpR",root_weight_bold:"Vi7Rd0SZWqD17F0872TB"}},8544:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});let r={root_size_xs:"qJJ288377iHlWN_RXeEE",root_size_s:"_sd8Q9d_Ttn0Ufe4ISWS",root_size_m:"Ctk8dbecq31Qh7isOJPQ",root_size_l:"M_Djh6ppIkCO3A2k_BTA",root_size_xl:"dtxlzGQMPAbM2MEndXWX",root_size_xxl:"IUb9XLplTAoZqne9rNUL",root_size_xxxl:"ZYZamUwql_rfFR4RpI2B",root_size_xxxxl:"ZBZyxow5njdq8z5dnRPY",root_size_xxxxxl:"WdvQQNwdDNCdRSwRkAtT",root_weight_bold:"nSU6fV9y80WrZEfafvww",root_weight_black:"KBeGPPK4DinQzAP41Y_N"}},2524:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});let r={root:"_MWOVuZRvUQdXKTMcOPx",root_clamp:"LezmJlldtbHWqU7l1950",root_clamp_oneline:"oyQL2RSmoNbNQf3Vc6YI",root_clamp_multiline:"jMyoZB5J9iZbzJmWOrF0"}},6161:(e,t,i)=>{/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=i(810),n=Symbol.for("react.element"),a=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,i){var r,a={},u=null,d=null;for(r in void 0!==i&&(u=""+i),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(d=t.ref),t)l.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:n,type:e,key:u,ref:d,props:a,_owner:o.current}}t.Fragment=a,t.jsx=u,t.jsxs=u},9541:(e,t,i)=>{e.exports=i(6161)},5817:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CardControls=void 0;let n=i(9541),a=i(5881),l=i(9e3),o=r(i(6079));t.CardControls=e=>{let{className:t,playControl:i,likeControl:r,menuControl:s,pinControl:u,trailerControl:d,isVisible:c,radius:f="default",bottomContainerClassName:m,labelText:v}=e;return(0,n.jsxs)("div",{className:(0,a.clsx)(o.default.root,o.default.controls,{[o.default.controls_visible]:c},o.default["controls_radius_".concat(f)],t),children:[(0,n.jsx)("div",{className:o.default.top,children:u}),(0,n.jsxs)("div",{className:(0,a.clsx)(o.default.bottom,m),children:[(0,n.jsxs)("div",{className:o.default.bottom_left,children:[d,i]}),(0,n.jsxs)("div",{className:o.default.bottom_right,children:[s,r]})]}),!!v&&(0,n.jsx)(l.Label,{className:o.default.label,children:v})]})}},440:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EntityCard=void 0;let n=i(9541),a=i(810),l=i(5881),o=i(2582),s=i(3758),u=r(i(1594)),d=e=>{let{forwardRef:t,view:i,className:r,textPosition:a="left",contentLinesCount:d=2,title:c,description:f,explicitMarkComponent:m,chart:v,children:p,srTitle:y,...h}=e;return(0,n.jsxs)("div",{className:(0,l.clsx)(u.default.root,r),ref:t,...h,children:[(0,n.jsx)(s.SROnly,{tabIndex:-1,children:y||c}),(0,n.jsx)("div",{className:u.default.viewContainer,children:i}),(0,n.jsxs)("div",{className:u.default.wrapper,children:[v,(0,n.jsxs)("div",{className:(0,l.clsx)(u.default.content,u.default["content_".concat(a)],u.default["content_linesCount_".concat(d)]),children:[(0,n.jsxs)("div",{className:u.default.titleContainer,children:[(0,n.jsx)(o.Caption,{className:u.default.title,variant:"div",type:"entity",size:"s",weight:"medium",lineClamp:2,"aria-hidden":!0,children:c}),m]}),f,p]})]})]})};t.EntityCard=(0,a.forwardRef)((e,t)=>(0,n.jsx)(d,{forwardRef:t,...e}))},2:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Label=void 0;let n=i(9541),a=i(5881),l=i(2582),o=r(i(2994));t.Label=e=>{let{children:t,className:i,size:r="s"}=e;return(0,n.jsx)(l.Caption,{variant:"div",type:"text",size:r,lineClamp:1,className:(0,a.clsx)(o.default.root,i),children:t})}},9e3:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Label=void 0;var r=i(2);Object.defineProperty(t,"Label",{enumerable:!0,get:function(){return r.Label}})},2865:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SROnly=void 0;let n=i(9541),a=i(5881),l=i(810),o=r(i(2068));t.SROnly=e=>{let{className:t,focusable:i,children:r,...s}=e,u=(0,a.clsx)(o.default.root,{[o.default.focusable]:i},t);return(0,l.isValidElement)(r)?(0,l.cloneElement)(r,{...s,className:(0,a.clsx)(u,r.props.className)}):(0,n.jsx)("span",{className:u,...s,children:r})}},3758:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SROnly=void 0;var r=i(2865);Object.defineProperty(t,"SROnly",{enumerable:!0,get:function(){return r.SROnly}})},7743:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Caption=t.CaptionComponent=void 0;let n=i(9541),a=i(5881),l=i(810),o=i(4721),s=r(i(390));function u(e){let{forwardRef:t,variant:i,type:r="text",size:l="s",className:u,children:d,weight:c="medium",...f}=e;return(0,n.jsx)(o.Typography,{variant:i,ref:t,className:(0,a.clsx)(s.default.root,s.default["root_".concat(r,"_").concat(l)],s.default["root_weight_".concat(c)],u),...f,children:d})}t.CaptionComponent=u,t.Caption=(0,l.forwardRef)((e,t)=>(0,n.jsx)(u,{forwardRef:t,...e}))},404:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Heading=t.HeadingComponent=void 0;let n=i(9541),a=i(5881),l=i(810),o=i(4721),s=r(i(8544));t.HeadingComponent=e=>{let{forwardRef:t,variant:i,weight:r="bold",size:l="s",className:u,children:d,...c}=e;return(0,n.jsx)(o.Typography,{variant:i,ref:t,className:(0,a.clsx)(s.default.root,s.default["root_size_".concat(l)],s.default["root_weight_".concat(r)],u),...c,children:d})},t.Heading=(0,l.forwardRef)((e,i)=>(0,n.jsx)(t.HeadingComponent,{forwardRef:i,...e}))},4721:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Typography=t.TypographyComponent=void 0;let n=i(9541),a=i(5881),l=i(810),o=r(i(2524));function s(e){let{forwardRef:t,style:i,className:r,children:l,variant:s,lineClamp:u,...d}=e,c=u&&"string"==typeof l?l:void 0;return(0,n.jsx)(s,{style:{...i,WebkitLineClamp:u},ref:t,title:c,className:(0,a.clsx)(o.default.root,{[o.default.root_clamp]:u&&u>0,[o.default.root_clamp_oneline]:u&&1===u,[o.default.root_clamp_multiline]:u&&u>1},r),...d,children:l})}t.TypographyComponent=s,t.Typography=(0,l.forwardRef)((e,t)=>(0,n.jsx)(s,{forwardRef:t,...e}))},2582:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Heading=t.Caption=void 0;var r=i(7743);Object.defineProperty(t,"Caption",{enumerable:!0,get:function(){return r.Caption}});var n=i(404);Object.defineProperty(t,"Heading",{enumerable:!0,get:function(){return n.Heading}})},810:e=>{e.exports=a||(a=i.t(l,2))}},s={};function u(e){var t=s[e];if(void 0!==t)return t.exports;var i=s[e]={exports:{}};return o[e].call(i.exports,i,i.exports,u),i.exports}u.d=(e,t)=>{for(var i in t)u.o(t,i)&&!u.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var d={};Object.defineProperty(d,"X$",{value:!0}),d.kk=d.m7=void 0,r=u(440),Object.defineProperty(d,"m7",{enumerable:!0,get:function(){return r.EntityCard}}),n=u(5817),Object.defineProperty(d,"kk",{enumerable:!0,get:function(){return n.CardControls}});var c=d.kk,f=d.m7;d.X$},33589:function(e,t,i){"use strict";i.d(t,{Go:function(){return g},jO:function(){return b.SeparatedArtists},d:function(){return s},tR:function(){return u},ik:function(){return d.i},SB:function(){return c.useOnLikeClick},BV:function(){return f.useOnPinClick}});var r=i(42288),n=i(76873);let a=e=>({albums:e.directAlbums,compilations:e.alsoAlbums,tracks:e.tracks}),l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.forEach((i,n)=>{let a=e[n+1];if("string"==typeof i&&"object"==typeof a){var l;t.push((0,r.pj)({id:String(a.id),name:a.name,various:a.various,composer:a.composer,separator:i,isAvailable:null===(l=a.available)||void 0===l||l,disclaimers:a.disclaimers}))}}),t.length>0?t:void 0},o=e=>({type:e.type,title:null==e?void 0:e.title,color:null==e?void 0:e.color,url:null==e?void 0:e.url}),s=e=>{var t,i,s;let u=l(e.decomposed),d=(null==e?void 0:e.counts)?a(e.counts):void 0,c=null===(t=e.extraActions)||void 0===t?void 0:t.map(o),f=(0,n.GFX)(e.trailer);return(0,r.pj)({id:String(e.id),name:e.name,composer:e.composer,coverUri:null===(i=e.cover)||void 0===i?void 0:i.uri,various:e.various,averageColor:(0,n.Usz)(null==e?void 0:e.derivedColors),decomposed:u,counts:d,extraActions:c,isAvailable:null===(s=null==e?void 0:e.available)||void 0===s||s,disclaimers:e.disclaimers,trailer:f})},u=e=>{var t;let{artist:i,trailer:a}=e,o=l(i.decomposed),{available:s,disclaimers:u}=(0,n.NuW)(i);return(0,r.pj)({id:String(i.id),name:i.name,coverUri:null===(t=i.cover)||void 0===t?void 0:t.uri,decomposed:o,isAvailable:s,disclaimers:u,trailer:(0,n.GFX)(a)})};var d=i(28367),c=i(51997),f=i(35481),m=i(31490),v=i(68133);let p=r.V5.model("BaseArtist",{id:r.V5.string,name:r.V5.string,various:r.V5.maybe(r.V5.boolean),composer:r.V5.maybe(r.V5.boolean),isAvailable:r.V5.boolean,disclaimers:r.V5.maybe(r.V5.array(r.V5.string)),trailer:r.V5.maybe(v.K8)}).views(e=>({get key(){return"".concat(e.id,"_").concat(e.name)},get url(){return"/artist/".concat(e.id)},get isLiked(){if(!(0,r.fh)(e))return!1;let{library:t}=(0,r.yj)(e);return t.isArtistLiked(e.id)},get pinId(){return"".concat(m.Qm.ARTIST).concat(e.id)},get seeds(){return["artist:".concat(e.id)]},get isPinned(){if(!(0,r.fh)(e))return!1;let{pinsCollection:t}=(0,r.yj)(e);return t.isPinned(this.pinId)},get isForeignAgent(){var t;if(!(0,r.fh)(e))return!1;let{experiments:i}=(0,r.yj)(e);return!!(null===(t=e.disclaimers)||void 0===t?void 0:t.includes(m.em.FOREIGN_AGENT))&&i.checkExperiment(n.peG.WebNextAgentArtist,"on")},get isLegalRejected(){if(!(0,r.fh)(e))return!1;let{experiments:t}=(0,r.yj)(e),i=t.checkExperiment(n.peG.WebNextLegalRejectArtist,"on");if(e.disclaimers&&i)return!e.isAvailable&&e.disclaimers.includes(m.em.MODAL);return!1},get isUnsafeLegal(){if(!(0,r.fh)(e))return!1;let{experiments:t}=(0,r.yj)(e),i=t.checkExperiment(n.peG.WebNextLegalUnsafeArtist,"on");if(e.disclaimers&&i)return e.isAvailable&&e.disclaimers.includes(m.em.MODAL);return!1}})).actions(e=>({toggleLike(){if(!(0,r.fh)(e))return;let{library:t,user:i}=(0,r.yj)(e);if(i.isAuthorized)return t.toggleArtistLike({entityId:e.id,userId:i.account.uid})},togglePin:(0,r.ls)(function*(){if(!(0,r.fh)(e))return;let{pinsCollection:t,user:i}=(0,r.yj)(e);if(i.isAuthorized)return yield t.toggleArtistPin({id:e.id},e.pinId)}),getKey:t=>"".concat(t,"_").concat(e.id)})),y=r.V5.model("Counts",{albums:r.V5.number,compilations:r.V5.number,tracks:r.V5.number}),h=p.props({separator:r.V5.maybe(r.V5.string)}),_=r.V5.model("ExtraAction",{type:r.V5.enumeration(Object.values(m.r1)),title:r.V5.maybe(r.V5.string),color:r.V5.maybe(r.V5.string),url:r.V5.maybe(r.V5.string)}),g=p.props({coverUri:r.V5.maybe(r.V5.string),decomposed:r.V5.maybe(r.V5.array(h)),averageColor:r.V5.maybe(r.V5.string),counts:r.V5.maybe(y),extraActions:r.V5.maybe(r.V5.array(_)),composer:r.V5.maybe(r.V5.boolean)}).views(e=>({get isAvailableForPlaying(){if(void 0===e.counts)return!0;return e.counts.tracks>0}}));var b=i(25066)},28367:function(e,t,i){"use strict";i.d(t,{i:function(){return n}});var r=i(98639);let n=(e,t)=>(0,r.useCallback)(e=>{e.metaKey||e.ctrlKey||e.shiftKey||t(e)},[e,t])},51997:function(e,t,i){"use strict";i.d(t,{useOnLikeClick:function(){return c}});var r=i(9753),n=i(24244),a=i(98639),l=i(80542),o=i(31490),s=i(76873),u=i(3084);let d=e=>{let{artist:t,closeToast:i}=e;return(0,r.jsx)(u.AP,{closeToast:i,entityVariant:u.j9.ARTIST,entityUrl:"/artist/".concat(t.id),collectionUrl:"/collection/artists",coverUri:t.coverUri,entityTitle:t.name,isLiked:t.isLiked})},c=e=>{let{user:t}=(0,s.oR4)(),{notify:i}=(0,s.d$W)(),[c,f]=(0,a.useState)(!1),{formatMessage:m}=(0,l.Z)();return(0,a.useCallback)(async()=>{if(!e)return;if(!t.isAuthorized){i((0,r.jsx)(u.Q,{error:m({id:"authorization-messages.need-to-authorizate"})}),{containerId:s.W$x.ERROR});return}if(c)return;let a={...(0,n.ZN)(e),isLiked:!e.isLiked};f(!0);let l=await e.toggleLike();f(!1),l===o.Bi.OK?i((0,r.jsx)(d,{artist:a}),{containerId:s.W$x.INFO}):i((0,r.jsx)(u.Q,{error:m({id:"error-messages.error-during-action"})}),{containerId:s.W$x.ERROR})},[e,t.isAuthorized,c,m,i])}},35481:function(e,t,i){"use strict";i.d(t,{useOnPinClick:function(){return d}});var r=i(9753),n=i(24244),a=i(98639),l=i(80542),o=i(76873),s=i(3084);let u=e=>{let{artist:t,closeToast:i}=e;return(0,r.jsx)(s.K1,{closeToast:i,entityVariant:s.j9.ARTIST,coverUri:t.coverUri,entityUrl:"/artist/".concat(t.id),entityTitle:t.name,isPinned:t.isPinned})},d=e=>{let{user:t}=(0,o.oR4)(),{notify:i}=(0,o.d$W)(),{formatMessage:d}=(0,l.Z)(),[c,f]=(0,a.useState)(!1);return(0,a.useCallback)(async()=>{if(!e)return;if(!t.isAuthorized){i((0,r.jsx)(s.Q,{error:d({id:"authorization-messages.need-to-authorizate"})}),{containerId:o.W$x.ERROR});return}if(c)return;let a={...(0,n.ZN)(e),isPinned:!e.isPinned};f(!0);let l=await e.togglePin();f(!1),l?i((0,r.jsx)(u,{artist:a}),{containerId:o.W$x.INFO}):i((0,r.jsx)(s.Q,{error:d({id:"error-messages.error-during-action"})}),{containerId:o.W$x.ERROR})},[e,t.isAuthorized,c,d,i])}},25066:function(e,t,i){"use strict";i.d(t,{SeparatedArtists:function(){return O}});var r=i(9753),n=i(60836),a=i(98639),l=i(5773),o=i(76873);let s=e=>e.reduce((e,t)=>e.concat([t.name]),[]),u=(e,t)=>e.reduce(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(t.decomposed){let i=s(t.decomposed);return e.length?e.concat([t.name,...i]):[t.name,...i]}return e.length?(e.push(t.name),e):[t.name]},[]).join(t);var d=i(91266),c=i.n(d),f=i(9544),m=i(80542),v=i(79452),p=i(23881),y=i(2570),h=i(3084),_=i(28367),g=i(3429);let b=e=>{let{artist:t,callback:i}=e,{disclaimer:r,currentTrackInfo:n,modals:{disclaimerModal:l},fullscreenPlayer:s}=(0,o.oR4)(),{modal:u}=n,d=(0,a.useRef)(String((0,g.Z)())),c=(0,a.useRef)(!1),f=(0,o.uK4)().get(o.ceh);return(0,a.useEffect)(()=>{r.isUnsafeDisclaimerConfirmed&&r.id===d.current&&!c.current&&(null==i||i(),c.current=!0)},[i,r.id,r.isUnsafeDisclaimerConfirmed]),(0,a.useCallback)(async e=>{null==e||e.stopPropagation(),u.isOpened&&(n.reset(),u.close()),s.modal.isOpened&&s.modal.close();let a=f.get(o.BUb.ExEx);if((null==t?void 0:t.isUnsafeLegal)&&(null==a?void 0:a.includes("".concat(o.coP.ARTIST,"_").concat(t.id)))){null==i||i();return}if((null==t?void 0:t.isLegalRejected)||(null==t?void 0:t.isUnsafeLegal)){null==e||e.preventDefault(),await r.getArtistDisclaimer({artistId:t.id}),t.isUnsafeLegal&&r.setType(o.Gq.UNSAFE),r.setId(d.current),r.setEntityId(t.id),r.setEntityType(o.coP.ARTIST),c.current=!1,l.open();return}null==e||e.preventDefault(),null==i||i()},[t.id,null==t?void 0:t.isLegalRejected,t.isUnsafeLegal,i,n,r,l,s.modal,f,u])},x=(0,f.Pi)(e=>{let{artist:t,withLink:i=!0,linkClassName:n,captionClassName:s,captionSize:u="m",allArtistsTitle:d,withCustomTooltip:c,hoverSettings:f}=e,{formatMessage:g}=(0,m.Z)(),x=(0,o.s0h)(t.url),k=(0,o.s0h)(t.url,!0),{sendNavigateSearchFeedback:P}=(0,o.sAF)(),E=(0,o.zxW)(),j=b({artist:t,callback:x}),O=b({artist:t,callback:k}),C=(0,_.i)(O,j),R=(0,a.useCallback)(e=>{E({to:v.qU.ArtistScreen}),null==P||P(),C(e)},[C,E,P]);return(i=i&&!t.various)?(0,r.jsx)(h.rU,{"aria-label":g({id:"entity-names.artist-name"},{artistName:t.name}),className:n,href:t.url,onClick:R,title:c?void 0:d||t.name,...(0,p.BA)(p.FK.artists.SEPARATED_ARTIST_TITLE),children:(0,r.jsx)(l.u,{enabled:!d&&c,offsetOptions:4,placement:"top",text:d||t.name,hoverSettings:f,children:(0,r.jsx)(y.Caption,{variant:"span",type:"entity",size:u,weight:"medium",className:s,children:t.name})})}):(0,r.jsx)(l.u,{enabled:!d&&c,offsetOptions:4,placement:"top",text:d||t.name,hoverSettings:f,children:(0,r.jsx)(y.Caption,{variant:"span",type:"entity",size:u,weight:"medium",className:s,title:c?void 0:d||t.name,children:t.name})})}),k=e=>{let{artist:t,withLink:i=!0,linkClassName:n,captionClassName:l,captionSize:o,allArtistsTitle:s,withCustomTooltip:u,hoverSettings:d}=e,c=(0,a.useMemo)(()=>{var e;return null===(e=t.decomposed)||void 0===e?void 0:e.reduce((e,t)=>e.concat([t.separator,(0,r.jsx)(x,{artist:t,withLink:i,linkClassName:n,captionClassName:l,captionSize:o,allArtistsTitle:s,withCustomTooltip:u,hoverSettings:d},t.id)]),[])},[t.decomposed,l,n,i,o,s,u,d]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x,{artist:t,withLink:i,linkClassName:n,captionClassName:l,captionSize:o,allArtistsTitle:s,withCustomTooltip:u,hoverSettings:d}),c]})};var P=i(31014),E=i(32727);let j=e=>{let{spoilerArtistsCount:t,spoilerClassName:i,handleOnSpoilerClick:a}=e;return(0,r.jsxs)(r.Fragment,{children:[" ",(0,r.jsx)(E.r,{role:"button",href:"",className:(0,n.W)(c().spoiler,i),onClick:a,rel:"nofollow",...(0,p.BA)(p.FK.artists.SEPARATED_ARTISTS_SPOILER),children:(0,r.jsx)(P.Z,{id:"entity-names.number-of-more-artists",values:{counter:t}})})]})},O=e=>{let{className:t,artists:i=[],separator:s=", ",lineClamp:d,visibleArtistsCount:f,withLink:m=!0,spoilerClassName:v,linkClassName:p,captionClassName:y,captionSize:h,variant:_="breakAll",withAllArtistsTitle:g=!0,withComposer:b=!0,spoilerComponent:x,withCustomTooltip:P=!0,artistIdWithoutLink:E}=e,[O,C]=(0,a.useState)(!1),R=(0,a.useMemo)(()=>g&&i?u(i,s):"",[i,s,g]),S=(0,a.useCallback)(e=>{C(!0),e.preventDefault()},[]),I=(0,a.useMemo)(()=>{let e=i;return f&&!O&&(e=i.slice(0,f)),e.reduce((e,t)=>{if(!b&&t.composer)return e.length?e:[];let i=(0,r.jsx)(k,{artist:t,linkClassName:p,captionClassName:y,withLink:m&&t.id!==E,captionSize:h,allArtistsTitle:R,withCustomTooltip:P,hoverSettings:o.cHI},t.key);return e.length?e.concat([s,i]):[i]},[])},[i,f,O,p,y,m,s,h,R,b,P,E]),N=(0,a.useMemo)(()=>{if(!O&&f&&f<i.length){let e=i.length-f;return(0,a.isValidElement)(x)?x:(0,r.jsx)(j,{spoilerClassName:v,spoilerArtistsCount:e,handleOnSpoilerClick:S})}},[i.length,S,O,v,x,f]),A=(0,a.useMemo)(()=>{if(d)return{WebkitLineClamp:d}},[d]);return(0,r.jsx)(l.u,{enabled:!!(g&&R)&&P,offsetOptions:4,placement:"top",text:R,hoverSettings:o.cHI,children:(0,r.jsxs)("div",{style:A,className:(0,n.W)(c().root,c()["root_variant_".concat(_)],{[c().root_clamp]:d&&d>0},{[c().ellipsis]:!d},t),title:g&&R&&!P?R:void 0,children:[I,N]})})}},10668:function(e,t,i){"use strict";i.d(t,{Cd:function(){return P},pX:function(){return l},pT:function(){return O.ContextMenuPlaylistPrivacyItem},lN:function(){return C.CreatePlaylistCard},b_:function(){return E},Zn:function(){return f},cp:function(){return m},XD:function(){return I.NotificationAddToPlaylist},wi:function(){return R.NotificationFailedAddToPlaylist},BQ:function(){return S.NotificationFailedRemoveFromPlaylist},H2:function(){return N.NotificationRemoveFromPlaylist},aL:function(){return o},eX:function(){return s},$h:function(){return j},jK:function(){return h.TrackPlaylistContext},PV:function(){return c},PG:function(){return y},SB:function(){return _.useOnLikeClick},BV:function(){return g.useOnPinClick}});var r,n,a,l,o,s,u=i(42288),d=i(76873);let c=e=>{var t,i,r,n,a;e=e||{};let l=(0,d.GFX)(e.trailer);return(0,u.pj)({isAvailable:null===(n=e.available)||void 0===n||n,uid:e.uid,uuid:null!==(a=e.playlistUuid)&&void 0!==a?a:"",kind:e.kind,title:e.title,coverUri:(null==e?void 0:null===(t=e.cover)||void 0===t?void 0:t.uri)||(null==e?void 0:null===(r=e.cover)||void 0===r?void 0:null===(i=r.itemsUri)||void 0===i?void 0:i[0]),likesCount:e.likesCount,averageColor:(0,d.Usz)(null==e?void 0:e.derivedColors),revision:e.revision,generatedPlaylistType:e.generatedPlaylistType,visibility:e.visibility,trailer:l})};(r=l||(l={})).OK="ok",r.ERROR="error",r.RELOAD="reload";let f=1e3,m=100;var v=i(45919);let p=e=>Object.keys(e).filter(t=>void 0!==e[t]).reduce((t,i)=>(t[i]=e[i],t),{}),y=e=>{let{operation:t,position:i,startPosition:r,endPosition:n,tracks:a}=e,l=p({op:t,at:i,from:r,to:n,tracks:a});return(0,v.d8)([l])};var h=i(46603);(n=o||(o={})).INSERT="insert",n.DELETE="delete",n.MOVE="move",(a=s||(s={}))[a.LIKE=3]="LIKE",a[a.CHART=1076]="CHART";var _=i(76880),g=i(56289),b=i(60991),x=i(31490),k=i(68133);let P=u.V5.compose(u.V5.model({uuid:u.V5.string,isAvailable:u.V5.boolean,revision:u.V5.maybe(u.V5.number),uid:u.V5.number,kind:u.V5.number,title:u.V5.maybe(u.V5.string),coverUri:u.V5.maybe(u.V5.string),likesCount:u.V5.maybe(u.V5.number),tracksCount:u.V5.maybe(u.V5.number),averageColor:u.V5.maybe(u.V5.string),generatedPlaylistType:u.V5.maybe(u.V5.string),visibility:u.V5.maybe(u.V5.string),trailer:u.V5.maybe(k.K8)}),k.fE).views(e=>({get key(){return"".concat(e.uuid,"_").concat(e.uid,"_").concat(e.kind)},get url(){return"/playlists/".concat(e.uuid)},get isLikesCountHidden(){return e.kind===s.LIKE||e.kind===s.CHART||e.generatedPlaylistType},get isFavouritePlaylist(){return e.kind===s.LIKE},get isPublic(){return e.visibility===x.we.PUBLIC},get isLiked(){if(!(0,u.fh)(e))return!1;let{library:t}=(0,u.yj)(e);return t.isPlaylistLiked("".concat(e.uid,":").concat(e.kind))},get pinId(){return"".concat(x.Qm.PLAYLIST).concat(e.uid,"_").concat(e.kind)},get id(){return"".concat(e.uid,":").concat(e.kind)},get isPinned(){if(!(0,u.fh)(e))return!1;let{pinsCollection:t}=(0,u.yj)(e);return t.isPinned(this.pinId)},get isOwnPlaylist(){var t;let{user:i}=(0,u.yj)(e);return!!(i.isAuthorized&&e.uid&&(null===(t=i.account)||void 0===t?void 0:t.uid)&&e.uid===i.account.uid)},get canUserChange(){if(!(0,u.fh)(e))return!1;return this.isOwnPlaylist&&!this.isFavouritePlaylist}})).actions(e=>({toggleLike:(0,u.ls)(function*(){if(!(0,u.fh)(e))return;let{library:t,user:i}=(0,u.yj)(e);if(i.isAuthorized){let r=yield t.togglePlaylistLike({userId:i.account.uid,entityId:e.id,ownerId:e.uid,kindId:e.kind});return(0,u.fh)(e)&&r===x.Bi.OK&&(e.isLiked?e.likePending():e.unlikePending()),r}}),togglePin:(0,u.ls)(function*(){if(!(0,u.fh)(e))return;let{pinsCollection:t,user:i}=(0,u.yj)(e);if(i.isAuthorized)return yield t.togglePlaylistPin({uid:e.uid,kind:e.kind},e.pinId)}),changePlaylist:(0,u.ls)(function*(t){if(!(0,u.fh)(e))return l.ERROR;let{usersResource:i,modelActionsLogger:r}=(0,u.dU)(e);try{var n,a;let r=yield i.changePlaylistRelative({userId:e.uid,diff:t,revision:null!==(n=e.revision)&&void 0!==n?n:0,playlistKind:e.kind});return e.revision=r.revision,e.isAvailable=null===(a=r.available)||void 0===a||a,l.OK}catch(e){if(r.error(e),e&&"object"==typeof e&&"statusCode"in e&&e.statusCode===b.CN.PRECONDITION_FAILED)return l.RELOAD;return l.ERROR}}),changeTitle:(0,u.ls)(function*(t){if(!(0,u.fh)(e))return d.SLo.ERROR;if(e.title===t)return d.SLo.OK;let{usersResource:i,modelActionsLogger:r}=(0,u.dU)(e);if(e.canUserChange){if(t.length<1||t.length>m)return d.SLo.ERROR;let n=e.title;e.title=t;try{let r=yield i.changePlaylistTitle({title:t,userId:e.uid,playlistKind:e.kind});if(!(null==r?void 0:r.title))return e.title=n,d.SLo.ERROR;return e.title=r.title,d.SLo.OK}catch(t){e.title=n,r.error(t)}}return d.SLo.ERROR}),deletePlaylist:(0,u.ls)(function*(){if(!(0,u.fh)(e)||!e.canUserChange)return d.SLo.ERROR;let{pinsCollection:t}=(0,u.yj)(e),{usersResource:i,modelActionsLogger:r}=(0,u.dU)(e);try{return yield i.deletePlaylist({userId:e.uid,playlistKind:e.kind}),t.isPinned(e.pinId)&&t.deletePin(e.pinId),d.SLo.OK}catch(e){r.error(e)}return d.SLo.ERROR}),toggleVisibility:(0,u.ls)(function*(t){if(!(0,u.fh)(e)||!e.canUserChange)return d.SLo.ERROR;let{usersResource:i,modelActionsLogger:r}=(0,u.dU)(e),n=e.visibility,a=e.isPublic?x.we.PRIVATE:x.we.PUBLIC;t&&(a=t);try{return e.visibility=a,yield i.togglePlaylistVisibility({visibility:a,userId:e.uid,playlistKind:e.kind}),d.SLo.OK}catch(e){r.error(e)}return e.visibility=n,d.SLo.ERROR}),getKey:t=>"".concat(t,"_").concat(e.id)})),E=u.V5.model("CreatePlaylist",{meta:u.V5.maybeNull(P)}).actions(e=>({create:(0,u.ls)(function*(t){if(!(0,u.fh)(e))return null;let{usersResource:i,modelActionsLogger:r}=(0,u.dU)(e),{user:n}=(0,u.yj)(e);if(!n.isAuthorized)return null;let a=n.account.uid;try{let r=yield i.createPlaylist({userId:String(a),...t});return e.meta=c(r),e.meta.uuid}catch(e){return r.error(e),null}}),reset(){e.meta=null}})),j=P.props({tracks:u.V5.maybe(u.V5.array(k.tC))}).actions(e=>({getKey:t=>"".concat(t,"_").concat(e.id)}));var O=i(24316),C=i(78876),R=i(35960),S=i(57151),I=i(12396),N=i(86307)},46603:function(e,t,i){"use strict";i.d(t,{TrackPlaylistContext:function(){return r}});let r=(0,i(98639).createContext)(null)},76880:function(e,t,i){"use strict";i.d(t,{useOnLikeClick:function(){return c}});var r=i(9753),n=i(24244),a=i(98639),l=i(80542),o=i(31490),s=i(76873),u=i(3084);let d=e=>{let{playlist:t,closeToast:i}=e;return(0,r.jsx)(u.AP,{entityVariant:u.j9.PLAYLIST,entityUrl:"/playlists/".concat(t.uuid),collectionUrl:"/collection/playlists?tab=".concat(s.cUw.LIKED),entityTitle:t.title,isLiked:t.isLiked,closeToast:i,coverUri:t.coverUri})},c=e=>{let{user:t}=(0,s.oR4)(),{notify:i}=(0,s.d$W)(),[c,f]=(0,a.useState)(!1),{formatMessage:m}=(0,l.Z)();return(0,a.useCallback)(async()=>{if(!t.isAuthorized){i((0,r.jsx)(u.Q,{error:m({id:"authorization-messages.need-to-authorizate"})}),{containerId:s.W$x.ERROR});return}if(c)return;let a={...(0,n.ZN)(e),isLiked:!e.isLiked};f(!0);let l=await e.toggleLike();f(!1),l===o.Bi.OK?i((0,r.jsx)(d,{playlist:a}),{containerId:s.W$x.INFO}):i((0,r.jsx)(u.Q,{error:m({id:"error-messages.error-during-action"})}),{containerId:s.W$x.ERROR})},[t.isAuthorized,c,e,m,i])}},56289:function(e,t,i){"use strict";i.d(t,{useOnPinClick:function(){return d}});var r=i(9753),n=i(24244),a=i(98639),l=i(80542),o=i(76873),s=i(3084);let u=e=>{let{playlist:t,closeToast:i}=e;return(0,r.jsx)(s.K1,{closeToast:i,entityVariant:s.j9.PLAYLIST,entityUrl:"/playlists/".concat(t.uuid),coverUri:t.coverUri,entityTitle:t.title,isPinned:t.isPinned})},d=e=>{let{user:t}=(0,o.oR4)(),{notify:i}=(0,o.d$W)(),{formatMessage:d}=(0,l.Z)(),[c,f]=(0,a.useState)(!1);return(0,a.useCallback)(async()=>{if(!t.isAuthorized){i((0,r.jsx)(s.Q,{error:d({id:"authorization-messages.need-to-authorizate"})}),{containerId:o.W$x.ERROR});return}if(c)return;let a={...(0,n.ZN)(e),isPinned:!e.isPinned};f(!0);let l=await e.togglePin();f(!1),l?i((0,r.jsx)(u,{playlist:a}),{containerId:o.W$x.INFO}):i((0,r.jsx)(s.Q,{error:d({id:"error-messages.error-during-action"})}),{containerId:o.W$x.ERROR})},[t.isAuthorized,c,e,i,d])}},24316:function(e,t,i){"use strict";i.d(t,{ContextMenuPlaylistPrivacyItem:function(){return h}});var r=i(9753),n=i(60836),a=i(9544),l=i(98639),o=i(80542),s=i(31014),u=i(23881),d=i(28852),c=i(385),f=i(34065),m=i(76873),v=i(3084),p=i(34950),y=i.n(p);let h=(0,a.Pi)(e=>{let{className:t,playlist:i}=e,{notify:a}=(0,m.d$W)(),{formatMessage:p}=(0,o.Z)(),h=(0,l.useCallback)(async()=>{await i.toggleVisibility()===m.SLo.ERROR&&a((0,r.jsx)(v.Q,{error:p({id:"playlist-errors.failed-to-change-privacy-settings"})}),{containerId:m.W$x.ERROR})},[p,a,i]);return(0,r.jsxs)(c.sN,{className:(0,n.W)(y().root,t),onClick:h,icon:(0,r.jsx)(d.Icon,{variant:"eye_crossed"}),...(0,u.BA)(u.r9.CONTEXT_MENU_PLAYLIST_PRIVACY_BUTTON),role:"switch","aria-checked":!i.isPublic,isSubMenu:!0,isBlock:!0,children:[(0,r.jsx)("span",{className:y().caption,children:(0,r.jsx)(s.Z,{id:"playlist-actions.privacy"})}),(0,r.jsx)(f.Z,{isChecked:!i.isPublic,ariaLabel:p({id:"playlist-actions.privacy-label"}),tabIndex:-1})]})})},78876:function(e,t,i){"use strict";i.d(t,{CreatePlaylistCard:function(){return _}});var r=i(9753),n=i(9544),a=i(74717),l=i(98639),o=i(80542),s=i(31014),u=i(23881),d=i(31490),c=i(39513),f=i(28852),m=i(2570),v=i(76873),p=i(3084),y=i(57446),h=i.n(y);let _=(0,n.Pi)(e=>{let{className:t}=e,{formatMessage:i}=(0,o.Z)(),{createPlaylist:n}=(0,v.oR4)(),{notify:y}=(0,v.d$W)(),_=(0,a.useRouter)(),g=(0,l.useRef)(!1),b=(0,l.useCallback)(async()=>{if(g.current)return;g.current=!0;let e=await n.create({title:i({id:"entity-names.new-playlist"}),visibility:d.we.PUBLIC});if(e){let t=(0,v.SZ_)("/playlists/".concat(e));t&&_.push(t)}else y((0,r.jsx)(p.Q,{error:i({id:"playlist-errors.failed-to-create-playlist"})}),{containerId:v.W$x.ERROR}),g.current=!1},[n,i,_,y]);return(0,l.useEffect)(()=>()=>{n.reset()},[n]),(0,r.jsxs)("div",{className:t,...(0,u.BA)(u.FK.playlist.CREATE_PLAYLIST_CARD),children:[(0,r.jsx)(c.z,{className:h().button,icon:(0,r.jsx)(f.Icon,{className:h().icon,variant:"add",size:"l"}),radius:"s","aria-label":i({id:"playlist-actions.create-playlist"}),onClick:b,flexIcon:!0,isBlock:!0,...(0,u.BA)(u.FK.playlist.CREATE_PLAYLIST_BUTTON)}),(0,r.jsx)(m.Caption,{weight:"medium",size:"s",variant:"div",className:h().text,...(0,u.BA)(u.FK.playlist.CREATE_PLAYLIST_TITLE),children:(0,r.jsx)(s.Z,{id:"collection.new-playlist"})})]})})},35960:function(e,t,i){"use strict";i.d(t,{NotificationFailedAddToPlaylist:function(){return u}});var r=i(9753),n=i(31014),a=i(2570),l=i(3084),o=i(79202),s=i.n(o);let u=()=>(0,r.jsx)(l.Yj,{message:(0,r.jsx)(a.Caption,{className:s().message,variant:"div",type:"controls",size:"m",children:(0,r.jsx)(n.Z,{id:"playlist-errors.failed-add-track-to-playlist"})})})},57151:function(e,t,i){"use strict";i.d(t,{NotificationFailedRemoveFromPlaylist:function(){return u}});var r=i(9753),n=i(31014),a=i(2570),l=i(3084),o=i(79202),s=i.n(o);let u=()=>(0,r.jsx)(l.Yj,{message:(0,r.jsx)(a.Caption,{className:s().message,variant:"div",type:"controls",size:"m",children:(0,r.jsx)(n.Z,{id:"playlist-errors.failed-to-remove-track"})})})},12396:function(e,t,i){"use strict";i.d(t,{NotificationAddToPlaylist:function(){return f}});var r=i(9753),n=i(9544),a=i(98639),l=i(31014),o=i(2570),s=i(76873),u=i(3084),d=i(26198),c=i.n(d);let f=(0,n.Pi)(e=>{let{entityTitle:t,entityVariant:i,entityCoverUri:n,playlist:d,closeToast:f}=e,{fullscreenPlayer:m}=(0,s.oR4)(),v=(0,a.useCallback)(()=>{m.modal.isOpened&&m.modal.close()},[m.modal]),p=(0,a.useMemo)(()=>{let e;let n={trackName:(0,r.jsxs)(o.Caption,{className:c().title,variant:"div",type:"controls",size:"m",lineClamp:1,children:["\xa0",t,"\xa0"]}),playlistName:(0,r.jsx)(u.rU,{className:c().link,href:d.url,onClick:v,children:(0,r.jsxs)(o.Caption,{className:c().playlistTitle,variant:"div",type:"controls",size:"m",lineClamp:1,children:["\xa0",d.title,"\xa0"]})})};switch(i){case u.j9.PODCAST_EPISODE:e=(0,r.jsx)(l.Z,{id:"notifications-info.added-podcast-episode-to-playlist",values:n});break;case u.j9.AUDIOBOOK_EPISODE:e=(0,r.jsx)(l.Z,{id:"notifications-info.added-audiobook-episode-to-playlist",values:n});break;default:e=(0,r.jsx)(l.Z,{id:"notifications-info.added-track-to-playlist",values:n})}return(0,r.jsx)(o.Caption,{className:c().message,variant:"div",type:"controls",size:"m",lineClamp:1,children:e})},[t,i,v,d.title,d.url]);return(0,r.jsx)(u.Yj,{closeToast:f,message:p,cover:(0,r.jsx)(u.BE,{className:c().image,src:n,withAvatarReplace:!0,size:100,fit:"cover",alt:t})})})},86307:function(e,t,i){"use strict";i.d(t,{NotificationRemoveFromPlaylist:function(){return f}});var r=i(9753),n=i(9544),a=i(98639),l=i(31014),o=i(2570),s=i(76873),u=i(3084),d=i(26198),c=i.n(d);let f=(0,n.Pi)(e=>{let{entityTitle:t,entityVariant:i,entityCoverUri:n,playlist:d,closeToast:f}=e,{fullscreenPlayer:m}=(0,s.oR4)(),v=(0,a.useCallback)(()=>{m.modal.isOpened&&m.modal.close()},[m.modal]),p=(0,a.useMemo)(()=>{let e;let n={trackName:(0,r.jsxs)(o.Caption,{className:c().title,variant:"div",type:"controls",size:"m",lineClamp:1,children:["\xa0",t,"\xa0"]}),playlistName:(0,r.jsx)(u.rU,{className:c().link,href:d.url,onClick:v,children:(0,r.jsxs)(o.Caption,{className:c().playlistTitle,variant:"div",type:"controls",size:"m",lineClamp:1,children:["\xa0",d.title,"\xa0"]})})};switch(i){case u.j9.PODCAST_EPISODE:e=(0,r.jsx)(l.Z,{id:"notifications-info.removed-podcast-episode-from-playlist",values:n});break;case u.j9.AUDIOBOOK_EPISODE:e=(0,r.jsx)(l.Z,{id:"notifications-info.removed-audiobook-episode-from-playlist",values:n});break;default:e=(0,r.jsx)(l.Z,{id:"notifications-info.removed-track-from-playlist",values:n})}return(0,r.jsx)(o.Caption,{className:c().message,variant:"div",type:"controls",size:"m",lineClamp:1,children:e})},[t,i,v,d.title,d.url]);return(0,r.jsx)(u.Yj,{closeToast:f,message:p,cover:(0,r.jsx)(u.BE,{className:c().image,src:n,withAvatarReplace:!0,size:100,fit:"cover",alt:t})})})},16092:function(e,t,i){"use strict";i.d(t,{yp:function(){return E},DR:function(){return R.ListeningProgress},bP:function(){return j},Yc:function(){return S.NotificationLike},h0:function(){return p.h},xZ:function(){return I.RemoveButton},v_:function(){return a},cU:function(){return l},jT:function(){return O},v$:function(){return C},Ni:function(){return f},tx:function(){return h.t},jp:function(){return m},wM:function(){return v},Ey:function(){return y.useMarkListenedClick},KX:function(){return _.useOnDislikeClick},SB:function(){return g.useOnLikeClick},OC:function(){return b.useOnModifyPlayQueue}});var r,n,a,l,o=i(42288),s=i(31490),u=i(76873);let d=(e,t)=>(0,o.pj)({endPositionSec:null==e?void 0:e.endPositionSec,hasEverFinished:(null==t?void 0:t.hasEverFinished)||(null==e?void 0:e.everFinished)}),c=e=>(0,o.pj)({bpm:null==e?void 0:e.bpm,energy:null==e?void 0:e.energy,hue:null==e?void 0:e.hue,userCollectionHue:null==e?void 0:e.userCollectionHue}),f=(e,t)=>{var i,r,n,a,l,f,m,v;e=e||{};let{isSmartPreview:p,hasEverFinished:y}=t||{},h=(0,u.Usz)(null==e?void 0:e.derivedColors),_=p?null===(i=e.smartPreviewParams)||void 0===i?void 0:i.durationMs:null==e?void 0:e.durationMs,g=(0,o.pj)({available:!!(null===(r=e.specialAudioResources)||void 0===r?void 0:r.includes(s.yA.SMART_PREVIEW))});return(0,o.pj)({id:(e.id||0).toString(),isAvailable:!!(null==e?void 0:e.available),isRemoved:(null==e?void 0:e.error)==="not-found",title:null!==(m=null==e?void 0:e.title)&&void 0!==m?m:"",contentWarning:null==e?void 0:e.contentWarning,version:null==e?void 0:e.version,durationMs:_,coverUri:null==e?void 0:e.coverUri,averageColor:h,trackParameters:c(null==e?void 0:e.trackParameters),trackSource:null==e?void 0:e.trackSource,albumId:null===(a=e.albums)||void 0===a?void 0:null===(n=a[0])||void 0===n?void 0:n.id,disclaimers:e.disclaimers,type:e.type,pubDate:e.pubDate,hasLyrics:null===(l=e.lyricsInfo)||void 0===l?void 0:l.hasAvailableTextLyrics,hasSyncLyrics:null===(f=e.lyricsInfo)||void 0===f?void 0:f.hasAvailableSyncLyrics,shouldRememberPosition:e.rememberPosition,streamProgress:d(null==e?void 0:e.streamProgress,{hasEverFinished:y}),shortDescription:null!==(v=e.shortDescription)&&void 0!==v?v:"",trailer:g})},m=e=>(0,o.pj)({id:e.id,name:e.name,prettyName:e.prettyName}),v=e=>({id:e.id,albumId:e.albumId,timestamp:e.timestamp});(r=a||(a={})).TOO_MANY_FILES="TOO_MANY_FILES",r.UNKNOWN_ERROR="UNKNOWN_ERROR",(n=l||(l={})).IDLE="IDLE",n.PREPARE="PREPARE",n.UPLOADING="UPLOADING",n.PROCESSING="PROCESSING",n.RESOLVE="RESOLVE",n.REJECT="REJECT",n.CANCELLED="CANCELLED";var p=i(36614),y=i(64246),h=i(98783),_=i(66757),g=i(89263),b=i(9269),x=i(68133);let k=o.V5.model("StreamProgress",{endPositionSec:o.V5.maybe(o.V5.number),hasEverFinished:o.V5.maybe(o.V5.boolean)}).actions(e=>({updateEndPositionSec:t=>{e.endPositionSec=t},updateEverFinished:t=>{e.hasEverFinished=t},markListened:(0,o.ls)(function*(t){let{streamsResource:i,modelActionsLogger:r}=(0,o.dU)(e);try{return yield i.markFinished(t)}catch(e){return r.error(e),s.PE.ERROR}}),markUnlistened:(0,o.ls)(function*(t){let{streamsResource:i,modelActionsLogger:r}=(0,o.dU)(e);try{return yield i.markUnfinished(t)}catch(e){return r.error(e),s.PE.ERROR}})})),P=o.V5.model("TrackParameters",{bpm:o.V5.maybe(o.V5.number),energy:o.V5.maybe(o.V5.number),hue:o.V5.maybe(o.V5.number),userCollectionHue:o.V5.maybe(o.V5.number)}),E=o.V5.compose(o.V5.model("BaseTrack",{id:o.V5.string,isAvailable:o.V5.boolean,isRemoved:o.V5.boolean,title:o.V5.string,trackSource:o.V5.maybe(o.V5.enumeration(Object.values(s.zu))),version:o.V5.maybe(o.V5.string),durationMs:o.V5.maybe(o.V5.number),coverUri:o.V5.maybe(o.V5.string),averageColor:o.V5.maybe(o.V5.string),trackParameters:o.V5.maybe(P),albumId:o.V5.maybe(o.V5.number),disclaimers:o.V5.maybe(o.V5.array(o.V5.string)),type:o.V5.maybe(o.V5.enumeration(Object.values(s.Vc))),pubDate:o.V5.maybe(o.V5.string),hasLyrics:o.V5.maybe(o.V5.boolean),hasSyncLyrics:o.V5.maybe(o.V5.boolean),trailer:o.V5.maybe(x.K8),shouldRememberPosition:o.V5.maybe(o.V5.boolean),streamProgress:o.V5.maybe(k),shortDescription:o.V5.maybe(o.V5.string)}),x.ie).views(e=>({get isLiked(){if((0,o.fh)(e)){let{library:t}=(0,o.yj)(e);return t.isTrackLiked(e.id)}return!1},get url(){if(e.albumId)return"/album/".concat(e.albumId,"/track/").concat(e.id);return"/track/".concat(e.id)},get isDisliked(){if((0,o.fh)(e)){let{library:t}=(0,o.yj)(e);return t.isTrackDisliked(e.id)}return!1},get isTrackPodcast(){if((0,o.fh)(e))return s.Vc.PODCAST===e.type;return!1},get isTrackAudiobook(){if((0,o.fh)(e))return s.Vc.AUDIOBOOK===e.type;return!1},get isTrackNonMusic(){return this.isTrackPodcast||this.isTrackAudiobook},get isUGC(){if((0,o.fh)(e))return e.trackSource===s.zu.UGC;return},get seeds(){return["track:".concat(e.id)]},get isLegalRejected(){if(!(0,o.fh)(e))return!1;let{experiments:t}=(0,o.yj)(e),i=t.checkExperiment(u.peG.WebNextLegalRejectTrack,"on");if(e.disclaimers&&i)return!e.isAvailable&&e.disclaimers.includes(s.em.MODAL);return!1},get isUnsafeLegal(){if(!(0,o.fh)(e))return!1;let{experiments:t}=(0,o.yj)(e),i=t.checkExperiment(u.peG.WebNextLegalUnsafeTrack,"on");if(e.disclaimers&&i)return e.isAvailable&&e.disclaimers.includes(s.em.MODAL);return!1},get entityId(){if(e.albumId)return"".concat(e.id,":").concat(e.albumId);return e.id}})).actions(e=>({afterCreate(){e.trackType=e.type},toggleLike:(0,o.ls)(function*(){if(!(0,o.fh)(e))return;let{library:t,user:i}=(0,o.yj)(e);if(i.isAuthorized)return yield t.toggleTrackLike({entityId:e.id,albumId:e.albumId,userId:i.account.uid})}),toggleDislike:(0,o.ls)(function*(){if(!(0,o.fh)(e))return;let{library:t,user:i}=(0,o.yj)(e);if(i.isAuthorized)return yield t.toggleTrackDislike({entityId:e.id,albumId:e.albumId,userId:i.account.uid})}),getKey:t=>"".concat(t,"_").concat(e.id)})),j=o.V5.model("MajorModel",{id:o.V5.number,name:o.V5.string,prettyName:o.V5.maybe(o.V5.string)}),O=o.V5.model("TrackUgcUploadModel",{loadingState:o.V5.enumeration(Object.values(l)),errorReason:o.V5.maybeNull(o.V5.enumeration(Object.values(a))),playlistKind:o.V5.number,trackId:o.V5.maybeNull(o.V5.string),uploadUrl:o.V5.maybeNull(o.V5.string)}).volatile(()=>({file:null,abortController:null})).actions(e=>{let t={setFile(t){e.file=t},getUploadUrl:(0,o.ls)(function*(){if(!(0,o.fh)(e))return;let{loaderResource:t,modelActionsLogger:i}=(0,o.dU)(e),{user:r}=(0,o.yj)(e);if(![l.IDLE,l.REJECT].includes(e.loadingState))return;e.loadingState=l.PREPARE;let n=r.account.uid;if(n)try{var u;let i=null===(u=e.file)||void 0===u?void 0:u.name,r=yield t.getUploadUrl({playlistId:"".concat(n,":").concat(e.playlistKind),uid:n,path:i});if(r&&"result"in r&&r.result===s.OV.TOO_MANY_FILES){e.loadingState=l.REJECT,e.errorReason=a.TOO_MANY_FILES;return}if(r&&"post-target"in r&&"ugc-track-id"in r){e.uploadUrl=r["post-target"],e.trackId=r["ugc-track-id"];return}e.errorReason=a.UNKNOWN_ERROR,e.loadingState=l.REJECT;return}catch(t){e.loadingState=l.REJECT,i.error(t);return}}),uploadFile:(0,o.ls)(function*(){if(!(0,o.fh)(e))return;let{prefixlessResource:t,modelActionsLogger:i}=(0,o.dU)(e);if(e.loadingState===l.PREPARE&&e.uploadUrl&&e.file){e.loadingState=l.UPLOADING;try{let i=new FormData;i.append("file",e.file);let r=new AbortController,n=r.signal;e.abortController=r,yield t.uploadFile({url:e.uploadUrl,formData:i,signal:n}),e.loadingState=l.PROCESSING;return}catch(t){e.loadingState=l.REJECT,i.error(t);return}}}),runUpload:(0,o.ls)(function*(){(0,o.fh)(e)&&(yield t.getUploadUrl(),e.loadingState!==l.REJECT&&(yield t.uploadFile()))}),retryUpload(){if(this.reset(),!(0,o.fh)(e))return;let{ugcUploadCenter:t}=(0,o.yj)(e);t.runUploadTracksQueue()},abortUpload(){var t;if(e.loadingState=l.CANCELLED,null===(t=e.abortController)||void 0===t||t.abort(),!(0,o.fh)(e))return;let{ugcUploadCenter:i}=(0,o.yj)(e);i.clearCancelledUploads()},reset(){e.loadingState=l.IDLE,e.trackId=null,e.uploadUrl=null,e.abortController=null}};return t}),C=o.V5.model("Ugc");var R=i(44105);i(83707);var S=i(2057),I=i(35132)},36614:function(e,t,i){"use strict";var r,n;i.d(t,{h:function(){return r}}),(n=r||(r={})).NEXT="NEXT",n.LAST="LAST",n.REMOVE="REMOVE"},64246:function(e,t,i){"use strict";i.d(t,{useMarkListenedClick:function(){return o}});var r=i(98639),n=i(80542),a=i(31490),l=i(76873);let o=e=>{let{user:t,fullscreenPlayer:i,sonataState:{entityMeta:o},album:s}=(0,l.oR4)(),{notify:u}=(0,l.d$W)(),{formatMessage:d}=(0,n.Z)(),c=(0,l.R$C)();return(0,r.useCallback)(async()=>{if(e){let f=i.modal.isOpened?l.W$x.FULLSCREEN_ERROR:l.W$x.ERROR;if(!t.isAuthorized){u(d({id:"authorization-messages.need-to-authorizate"}),{containerId:f});return}let m=e.streamProgress,v=(null==o?void 0:o.id)===e.id&&(null==o?void 0:o.albumId)===e.albumId;if(((null==m?void 0:m.hasEverFinished)?await (null==m?void 0:m.markUnlistened({trackId:Number(e.id)})):await (null==m?void 0:m.markListened({trackId:Number(e.id)})))!==a.PE.OK)u(d({id:"error-messages.error-during-action"}),{containerId:f});else{var r,n;let t=!(null==m?void 0:m.hasEverFinished),i=null==c?void 0:c.state.queueState.entityList.value,a=null==i?void 0:i.find(t=>{var i,r;let n=t.entity.data.meta;return n.realId===e.id&&(null===(r=n.albums)||void 0===r?void 0:null===(i=r[0])||void 0===i?void 0:i.id)===e.albumId});a&&(a.entity.everFinished=!!t),v&&(null==o?void 0:o.streamProgress)&&(null===(r=o.streamProgress)||void 0===r?void 0:r.hasEverFinished)!==t&&(o.streamProgress.updateEverFinished(t),t&&o.streamProgress.updateEndPositionSec(0)),(null===(n=s.meta)||void 0===n?void 0:n.listeningFinished)&&!t&&(s.markTracksFinished({withoutTracks:[e.id]}),s.setAlbumUnfinished(),s.setAllTracksUnfinished(!1)),null==m||m.updateEverFinished(t),s.meta&&t&&s.checkAllAlbumTrackFinished()}}},[d,i.modal.isOpened,u,e,t.isAuthorized,c,o,s])}},98783:function(e,t,i){"use strict";i.d(t,{C:function(){return o},t:function(){return l}});var r=i(31490),n=i(76873),a=i(3084);let l=(e,t)=>{if(!t||!e)return a.j9.TRACK;switch(e.type){case r.Vc.PODCAST:return a.j9.PODCAST_EPISODE;case r.Vc.AUDIOBOOK:return a.j9.AUDIOBOOK_EPISODE;default:return a.j9.TRACK}},o=e=>l(e,(0,n.RVp)())},66757:function(e,t,i){"use strict";i.d(t,{useOnDislikeClick:function(){return m}});var r=i(9753),n=i(24244),a=i(98639),l=i(80542),o=i(84338),s=i(31490),u=i(76873),d=i(3084),c=i(83707),f=i(98783);let m=e=>{let{user:t,fullscreenPlayer:i}=(0,u.oR4)(),m=(0,u.R$C)(),{notify:v}=(0,u.d$W)(),[p,y]=(0,a.useState)(!1),{formatMessage:h}=(0,l.Z)(),_=(0,f.C)(e);return(0,a.useCallback)(async()=>{if(e){let l=i.modal.isOpened?u.W$x.FULLSCREEN_INFO:u.W$x.INFO,f=i.modal.isOpened?u.W$x.FULLSCREEN_ERROR:u.W$x.ERROR;if(!t.isAuthorized){v((0,r.jsx)(d.Q,{error:h({id:"authorization-messages.need-to-authorizate"})}),{containerId:f});return}if(p)return;let g={...(0,n.ZN)(e),isDisliked:!e.isDisliked};y(!0);let b=await e.toggleDislike();if(y(!1),b===s.Bi.OK){var a;v((0,r.jsx)(c.NotificationDislike,{coverUri:g.coverUri,isDisliked:g.isDisliked,title:g.title,entityVariant:_}),{containerId:l});let e=g.isDisliked?s.C.DISLIKE:s.C.UNDISLIKE;m&&(0,o.xA)(m.state.currentContext.value)&&await m.state.currentContext.value.sendFeedback(m.state.playerState,m.state.queueState,e),g.isDisliked&&g.id===(null==m?void 0:null===(a=m.state.queueState.currentEntity.value)||void 0===a?void 0:a.entity.data.meta.id)&&(null==m||m.moveForward())}else v((0,r.jsx)(d.Q,{error:h({id:"error-messages.error-during-action"})}),{containerId:f})}},[h,_,i.modal.isOpened,v,p,m,e,t.isAuthorized])}},89263:function(e,t,i){"use strict";i.d(t,{useOnLikeClick:function(){return f}});var r=i(9753),n=i(24244),a=i(98639),l=i(80542),o=i(84338),s=i(31490),u=i(76873),d=i(3084),c=i(2057);let f=e=>{let{user:t,fullscreenPlayer:i}=(0,u.oR4)(),{notify:f}=(0,u.d$W)(),[m,v]=(0,a.useState)(!1),{formatMessage:p}=(0,l.Z)(),y=(0,u.R$C)();return(0,a.useCallback)(async()=>{if(e){let a=i.modal.isOpened?u.W$x.FULLSCREEN_INFO:u.W$x.INFO,l=i.modal.isOpened?u.W$x.FULLSCREEN_ERROR:u.W$x.ERROR;if(!t.isAuthorized){f((0,r.jsx)(d.Q,{error:p({id:"authorization-messages.need-to-authorizate"})}),{containerId:l});return}if(m)return;let h={...(0,n.ZN)(e),isLiked:!e.isLiked};v(!0);let _=await e.toggleLike();if(v(!1),_===s.Bi.OK){f((0,r.jsx)(c.NotificationLike,{track:h}),{containerId:a});let e=h.isLiked?s.C.LIKE:s.C.UNLIKE;y&&(0,o.xA)(y.state.currentContext.value)&&y.state.currentContext.value.sendFeedback(y.state.playerState,y.state.queueState,e)}else f((0,r.jsx)(d.Q,{error:p({id:"error-messages.error-during-action"})}),{containerId:l})}},[p,i.modal.isOpened,f,m,y,e,t.isAuthorized])}},9269:function(e,t,i){"use strict";i.d(t,{useOnModifyPlayQueue:function(){return _}});var r=i(9753),n=i(98639),a=i(92894),l=i(76873),o=i(31014),s=i(2570),u=i(3084),d=i(36614),c=i(37354),f=i.n(c);let m=(e,t)=>{switch(e){case u.j9.TRACK:return(0,r.jsx)(o.Z,{id:"play-queue.track-will-be-played-next",values:{title:t}});case u.j9.PODCAST_EPISODE:return(0,r.jsx)(o.Z,{id:"play-queue.podcast-episode-will-be-played-next",values:{title:t}});case u.j9.AUDIOBOOK_EPISODE:return(0,r.jsx)(o.Z,{id:"play-queue.audiobook-episode-will-be-played-next",values:{title:t}})}},v=(e,t)=>{switch(e){case u.j9.TRACK:return(0,r.jsx)(o.Z,{id:"play-queue.track-will-be-played-last",values:{title:t}});case u.j9.PODCAST_EPISODE:return(0,r.jsx)(o.Z,{id:"play-queue.podcast-episode-will-be-played-last",values:{title:t}});case u.j9.AUDIOBOOK_EPISODE:return(0,r.jsx)(o.Z,{id:"play-queue.audiobook-episode-will-be-played-last",values:{title:t}})}},p=(e,t)=>{switch(e){case u.j9.TRACK:return(0,r.jsx)(o.Z,{id:"play-queue.track-will-be-removed",values:{title:t}});case u.j9.PODCAST_EPISODE:return(0,r.jsx)(o.Z,{id:"play-queue.podcast-episode-will-be-removed",values:{title:t}});case u.j9.AUDIOBOOK_EPISODE:return(0,r.jsx)(o.Z,{id:"play-queue.audiobook-episode-will-be-removed",values:{title:t}})}},y=e=>{let{closeToast:t,entityVariant:i,entityTitle:a,coverUri:l,variant:o}=e,c=(0,n.useMemo)(()=>(0,r.jsxs)(s.Caption,{className:f().entityTitle,variant:"span",type:"controls",size:"m",lineClamp:1,children:["\xa0",a,"\xa0"]}),[a]),y=(0,n.useMemo)(()=>{switch(o){case d.h.NEXT:return m(i,c);case d.h.LAST:return v(i,c);case d.h.REMOVE:return p(i,c)}},[o,i,c]);return(0,r.jsx)(u.Yj,{message:(0,r.jsx)(s.Caption,{className:f().text,variant:"div",type:"controls",size:"m",children:y}),cover:(0,r.jsx)(u.BE,{className:f().image,src:l,size:100,fit:"cover",alt:a,withAvatarReplace:!0}),closeToast:t})};var h=i(98783);function _(e,t,i){let{notify:o}=(0,l.d$W)(),{fullscreenPlayer:s}=(0,l.oR4)(),u=(0,l.R$C)(),c=(0,h.C)(e);return(0,n.useCallback)(()=>{if(!e)return;switch(t){case d.h.LAST:null==u||u.injectLast([{type:a.RX.Unloaded,meta:{id:e.entityId}}]);break;case d.h.NEXT:null==u||u.injectNext([{type:a.RX.Unloaded,meta:{id:e.entityId}}]);break;case d.h.REMOVE:i&&(null==u||u.remove(i))}let n=s.modal.isOpened?l.W$x.FULLSCREEN_INFO:l.W$x.INFO;o((0,r.jsx)(y,{entityVariant:c,variant:t,entityTitle:e.title,coverUri:e.coverUri}),{containerId:n})},[c,s.modal.isOpened,o,i,u,e,t])}},44105:function(e,t,i){"use strict";i.d(t,{ListeningProgress:function(){return P}});var r,n=i(9753),a=i(60836),l=i(9544),o=i(98639),s=i.t(o,2),u=i(31014),d={1113:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});let r={wrapper:"EOWonrlAZfCxgDQrLIdO",fullCircle:"TNOA7GEcjPELn4mw8Zjz",progressCircle:"LyZUu89TXyP3Jmnxrn9r"}},6161:(e,t,i)=>{/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=i(810),n=Symbol.for("react.element"),a=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,i){var r,a={},u=null,d=null;for(r in void 0!==i&&(u=""+i),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(d=t.ref),t)l.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:n,type:e,key:u,ref:d,props:a,_owner:o.current}}t.Fragment=a,t.jsx=u,t.jsxs=u},9541:(e,t,i)=>{e.exports=i(6161)},833:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CircleProgress=void 0;let n=i(9541),a=i(810),l=r(i(1113));t.CircleProgress=e=>{let{className:t,value:i,max:r=100,"aria-label":o}=e,s=(0,a.useMemo)(()=>{let e=Math.max(Math.min(i,r),0)/r;return"".concat(37.6991*e," ").concat((1-e)*37.6991)},[r,i]);return(0,n.jsx)("div",{className:t,"aria-label":o,role:"progressbar","aria-valuemin":0,"aria-valuemax":r,"aria-valuenow":i,children:(0,n.jsxs)("svg",{className:l.default.wrapper,width:"14",height:"14",viewBox:"0 0 14 14",children:[(0,n.jsx)("circle",{className:l.default.fullCircle,r:6,strokeWidth:2,cx:7,cy:7,role:"presentation"}),(0,n.jsx)("circle",{className:l.default.progressCircle,r:6,strokeWidth:2,cx:7,cy:7,strokeDashoffset:9.424775,strokeDasharray:s,role:"presentation"})]})})}},810:e=>{e.exports=s}},c={};function f(e){var t=c[e];if(void 0!==t)return t.exports;var i=c[e]={exports:{}};return d[e].call(i.exports,i,i.exports,f),i.exports}f.d=(e,t)=>{for(var i in t)f.o(t,i)&&!f.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},f.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),f.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var m={};Object.defineProperty(m,"X",{value:!0}),m.m=void 0,r=f(833),Object.defineProperty(m,"m",{enumerable:!0,get:function(){return r.CircleProgress}});var v=m.m;m.X;var p=i(28852),y=i(2570),h=i(92894),_=i(76873),g=i(80542);let b=()=>{let{formatMessage:e}=(0,g.Z)();return(0,o.useCallback)(t=>{let i=Math.floor(t/60),r=function(t){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=i?e({id:"time.left"},{time:t}):"";return"".concat(r," ").concat(e({id:"time.minutes-left"},{minutes:t}))};if(t<1)return e({id:"time.finished"});if(t<60){let i;return i=Math.floor(t),"".concat(e({id:"time.left"},{time:i})," ").concat(e({id:"time.seconds-left"},{seconds:i}))}if(i<60)return r(i,!0);let n=Math.floor(i/60);i%=60;let a=e({id:"time.hours-left"},{hours:n});return i>0&&(a+=r(i)),a},[e])};var x=i(27908),k=i.n(x);let P=(0,l.Pi)(e=>{var t,i,r,l,s,d,c,f,m;let{id:g,albumId:x,streamProgress:P,durationMs:E,playContextParams:j,withTimeLeftText:O=!0,className:C}=e,R=(0,_.R$C)(),{sonataState:S,album:I}=(0,_.oR4)(),N=Math.floor(E/1e3),[A,L]=(0,o.useState)(!1),T=b(),{isPlaying:V,isCurrent:U}=(0,_.qmq)({playContextParams:j,entityId:x?"".concat(g,":").concat(x):g});(0,o.useEffect)(()=>{if(!U){L(!1);return}let e=null==R?void 0:R.state.playerState.status.onChange(()=>{(null==R?void 0:R.state.playerState.status.value)===h.Xz.LOADING_MEDIA_DATA&&L(!0)});return()=>{null==e||e()}},[R,P,U,V]),(0,o.useEffect)(()=>{var e;(null==I?void 0:null===(e=I.meta)||void 0===e?void 0:e.listeningFinished)?(P.updateEndPositionSec(0),P.updateEverFinished(!0)):(null==I?void 0:I.allTracksUnfinished)&&P.updateEverFinished(!1)},[P,null==I?void 0:I.allTracksUnfinished,null==I?void 0:null===(t=I.meta)||void 0===t?void 0:t.listeningFinished]),(0,o.useEffect)(()=>{var e,t;U&&(null==S?void 0:null===(e=S.entityMeta)||void 0===e?void 0:e.streamProgress)&&P&&S.entityMeta.streamProgress.hasEverFinished!==P.hasEverFinished&&P.updateEverFinished(!!S.entityMeta.streamProgress.hasEverFinished),N-((null==P?void 0:P.endPositionSec)||0)<1&&((null==S?void 0:null===(t=S.entityMeta)||void 0===t?void 0:t.streamProgress)&&U&&(S.entityMeta.streamProgress.updateEverFinished(!0),S.entityMeta.streamProgress.updateEndPositionSec(0)),null==P||P.updateEverFinished(!0))},[U,null==S?void 0:null===(i=S.entityMeta)||void 0===i?void 0:i.streamProgress,null==S?void 0:null===(l=S.entityMeta)||void 0===l?void 0:null===(r=l.streamProgress)||void 0===r?void 0:r.hasEverFinished,P,P.hasEverFinished,P.endPositionSec,N]),(0,o.useEffect)(()=>{if(!U)return;let e=null==R?void 0:R.state.playerState.progress.onChange(()=>{var e;let t=R.state.playerState.progress.value,i=null==S?void 0:null===(e=S.entityMeta)||void 0===e?void 0:e.streamProgress;0!==t.position&&A&&P.updateEndPositionSec(t.position),U&&parseInt("".concat(null==i?void 0:i.endPositionSec),10)!==parseInt("".concat(t.position),10)&&(null==i||i.updateEndPositionSec(t.position))});return()=>{null==e||e()}},[R,P,U,V,A,g,null==S?void 0:S.entityMeta]);let D=(0,o.useMemo)(()=>{var e,t,i,r,l;if(U&&(null==S?void 0:null===(t=S.entityMeta)||void 0===t?void 0:null===(e=t.streamProgress)||void 0===e?void 0:e.hasEverFinished)||(null==P?void 0:P.hasEverFinished)||(null==I?void 0:null===(i=I.meta)||void 0===i?void 0:i.listeningFinished))return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y.Caption,{lineClamp:1,variant:"div",className:(0,a.W)(k().text,{[k().text_hidden]:!O}),children:(0,n.jsx)(u.Z,{id:"time.finished"})}),(0,n.jsx)(p.Icon,{size:"xxs",variant:"check",className:k().checkIcon})]});let o=U&&(null==S?void 0:null===(l=S.entityMeta)||void 0===l?void 0:null===(r=l.streamProgress)||void 0===r?void 0:r.endPositionSec)||P.endPositionSec;if(!o||0===o)return;let s=N-o,d=T(s);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y.Caption,{lineClamp:1,variant:"div",className:(0,a.W)(k().text,{[k().text_withTimeLeft]:!O}),children:d}),s>1?(0,n.jsx)(v,{value:o,max:N}):(0,n.jsx)(p.Icon,{size:"xxs",variant:"check",className:k().checkIcon})]})},[N,null==P?void 0:P.hasEverFinished,null==P?void 0:P.endPositionSec,O,T,U,null==S?void 0:null===(d=S.entityMeta)||void 0===d?void 0:null===(s=d.streamProgress)||void 0===s?void 0:s.hasEverFinished,null==S?void 0:null===(f=S.entityMeta)||void 0===f?void 0:null===(c=f.streamProgress)||void 0===c?void 0:c.endPositionSec,null==I?void 0:null===(m=I.meta)||void 0===m?void 0:m.listeningFinished]);return(0,n.jsx)("div",{className:(0,a.W)(k().root,C),children:D})})},83707:function(e,t,i){"use strict";i.d(t,{NotificationDislike:function(){return f}});var r=i(9753),n=i(60836),a=i(98639),l=i(31014),o=i(12404),s=i(2570),u=i(3084),d=i(47283),c=i.n(d);let f=e=>{let{coverUri:t,title:i,isDisliked:d,closeToast:f,className:m,entityVariant:v}=e,p=(0,a.useMemo)(()=>(0,r.jsx)(o.Paper,{className:c().cover,radius:"s",children:(0,r.jsx)(u.BE,{className:c().image,src:t,alt:i,size:100,fit:"cover",withAvatarReplace:!0})}),[t,i]),y=(0,a.useMemo)(()=>{if(d)switch(v){case u.j9.PODCAST_EPISODE:return(0,r.jsx)(l.Z,{id:"notifications-info.podcast-episode-unavailable-in-recommendations"});case u.j9.AUDIOBOOK_EPISODE:return(0,r.jsx)(l.Z,{id:"notifications-info.audiobook-episode-unavailable-in-recommendations"});default:return(0,r.jsx)(l.Z,{id:"notifications-info.track-unavailable-in-recommendations"})}else switch(v){case u.j9.PODCAST_EPISODE:return(0,r.jsx)(l.Z,{id:"notifications-info.podcast-episode-available-in-recommendations"});case u.j9.AUDIOBOOK_EPISODE:return(0,r.jsx)(l.Z,{id:"notifications-info.audiobook-episode-available-in-recommendations"});default:return(0,r.jsx)(l.Z,{id:"notifications-info.track-available-in-recommendations"})}},[v,d]);return(0,r.jsx)(u.Yj,{className:(0,n.W)(c().root,m),closeToast:f,message:(0,r.jsxs)("div",{className:c().message,children:[p,(0,r.jsx)(s.Caption,{className:c().text,variant:"div",type:"controls",size:"m",children:y})]})})}},2057:function(e,t,i){"use strict";i.d(t,{NotificationLike:function(){return c}});var r=i(9753),n=i(9544),a=i(3084),l=i(98783),o=i(31490),s=i(76873);let u="/collection",d=e=>{if(!(0,s.RVp)())return u;switch(e.type){case o.Vc.PODCAST:case o.Vc.AUDIOBOOK:return"/collection/shelf/liked";default:return u}},c=(0,n.Pi)(e=>{let{track:t,closeToast:i}=e,n=d(t),o=(0,l.C)(t);return(0,r.jsx)(a.AP,{closeToast:i,entityVariant:o,entityTitle:t.title,collectionUrl:n,coverUri:t.coverUri,isLiked:t.isLiked})})},35132:function(e,t,i){"use strict";i.d(t,{RemoveButton:function(){return u}});var r=i(9753),n=i(98639),a=i(80542),l=i(23881),o=i(39513),s=i(28852);let u=e=>{let{className:t,variant:i="text",onClick:u,iconClassName:d,iconSize:c,size:f="s"}=e,{formatMessage:m}=(0,a.Z)(),v=(0,n.useCallback)(e=>{null==u||u(),e.stopPropagation()},[u]);return(0,r.jsx)(o.z,{className:t,withRipple:!1,variant:i,size:f,radius:"round","aria-label":m({id:"play-queue.delete-from-queue"}),onClick:v,icon:(0,r.jsx)(s.Icon,{size:c,className:d,variant:"bucket"}),...(0,l.BA)(l.FK.track.REMOVE_BUTTON)})}},91266:function(e){e.exports={root_clamp:"SeparatedArtists_root_clamp__SyvjM",root_variant_breakAll:"SeparatedArtists_root_variant_breakAll__34YbW",root_variant_breakWord:"SeparatedArtists_root_variant_breakWord__1sziE",ellipsis:"SeparatedArtists_ellipsis__0SUCv"}},34950:function(e){e.exports={root:"ContextMenuPlaylistPrivacyItem_root__kz3gc",caption:"ContextMenuPlaylistPrivacyItem_caption__0VuXh"}},57446:function(e){e.exports={button:"CreatePlaylistCard_button__ZaAtb",icon:"CreatePlaylistCard_icon__09K9N",text:"CreatePlaylistCard_text__dd9Q6"}},79202:function(e){e.exports={message:"FailedPlaylistNotification_message__wxrzi"}},26198:function(e){e.exports={message:"PlaylistNotification_message__nEykK",title:"PlaylistNotification_title__Q5IKF",link:"PlaylistNotification_link__HezVx",playlistTitle:"PlaylistNotification_playlistTitle__HweEg",image:"PlaylistNotification_image__QvYVD"}},27908:function(e){e.exports={root:"ListeningProgress_root__Rvlcn",text:"ListeningProgress_text__JQRFJ",text_withTimeLeft:"ListeningProgress_text_withTimeLeft__2G9_d",checkIcon:"ListeningProgress_checkIcon___yh49"}},47283:function(e){e.exports={message:"NotificationDislike_message__R2jfZ",text:"NotificationDislike_text__xmrnn",cover:"NotificationDislike_cover__bvqFM",image:"NotificationDislike_image__h0_EO"}},37354:function(e){e.exports={entityTitle:"NotificationPlayQueue_entityTitle__XCIsa",entityLink:"NotificationPlayQueue_entityLink__O7tHL",text:"NotificationPlayQueue_text___1DWX",image:"NotificationPlayQueue_image__SLXsp"}}}]);