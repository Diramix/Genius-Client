(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3276],{73276:function(i,t,e){"use strict";e.d(t,{vY:function(){return s.EmptyPlaylistBlock},ZL:function(){return l.PlaylistCard},Nn:function(){return k},d2:function(){return u},VD:function(){return n.PlaylistsCarousel},RE:function(){return f},Q9:function(){return _},VB:function(){return P},PB:function(){return x}});var l=e(22003),n=e(18921),s=e(6030),a=e(42288),r=e(33589),o=e(10668);let u=o.$h.props({artists:a.V5.maybe(a.V5.array(r.Go))});var c=e(34152),d=e(395),p=e(40193);let y=a.V5.model("PlaylistOwner",{uid:a.V5.number,login:a.V5.string,name:a.V5.string,sex:a.V5.enumeration(Object.values(p.oF)),verified:a.V5.boolean}),m=a.V5.model("PlaylistOwner",{userInfo:a.V5.maybeNull(y),caseForms:a.V5.maybeNull(d.S2)}),k=o.Cd.props({owner:a.V5.maybe(y),modified:a.V5.string,description:a.V5.maybe(a.V5.string),madeFor:a.V5.maybeNull(m)}).views(i=>({get seeds(){var t;return["playlist:".concat(null===(t=i.owner)||void 0===t?void 0:t.login,"_").concat(i.kind)]}})).actions(i=>({changeDescription:(0,a.ls)(function*(t){if(!(0,a.fh)(i))return c.SLo.ERROR;if(i.description===t)return c.SLo.OK;if(t.length>o.Zn)return c.SLo.ERROR;let{usersResource:e,modelActionsLogger:l}=(0,a.dU)(i);if(i.canUserChange){let n=i.description;i.description=t;try{let l=yield e.changePlaylistDescription({description:t,userId:i.uid,playlistKind:i.kind});return i.description=l.description,c.SLo.OK}catch(t){i.description=n,l.error(t)}}return c.SLo.ERROR}),changePlaylistCover:(0,a.ls)(function*(t){if(!(0,a.fh)(i))return c.SLo.ERROR;let{usersResource:e,modelActionsLogger:l}=(0,a.dU)(i);try{return yield e.uploadPlaylistCover({userId:i.uid,formData:t,playlistKind:i.kind}),c.SLo.OK}catch(i){l.error(i)}return c.SLo.ERROR})})),C=i=>({uid:i.uid,login:i.login,name:i.name,sex:i.sex,verified:i.verified}),v=i=>(0,a.pj)({userInfo:i.userInfo?C(i.userInfo):null,caseForms:i.caseForms?(0,c.GA0)(i.caseForms):null}),_=i=>(0,a.pj)({...(0,o.PV)(i),owner:i.owner?C(i.owner):void 0,description:i.description,modified:i.modified,madeFor:i.madeFor?v(i.madeFor):null}),P=i=>{var t,e;return(0,a.pj)({...(0,o.PV)(i),artists:null!==(e=null==i?void 0:null===(t=i.artists)||void 0===t?void 0:t.map(r.d))&&void 0!==e?e:[]})},f=i=>{var t,e;let{playlist:l,generatedPlaylistType:n,likesCount:s,trailer:r}=i;return(0,a.pj)({isAvailable:null===(e=l.available)||void 0===e||e,uuid:l.playlistUuid,title:l.title,uid:l.uid,kind:l.kind,coverUri:null===(t=l.cover)||void 0===t?void 0:t.uri,generatedPlaylistType:n,likesCount:s,trailer:(0,c.GFX)(r)})};var L=e(58852);let x=i=>{var t,e;return(0,a.pj)({...(0,o.PV)(i),tracks:null!==(e=null==i?void 0:null===(t=i.tracks)||void 0===t?void 0:t.map(L.wM))&&void 0!==e?e:[]})}},6030:function(i,t,e){"use strict";e.d(t,{EmptyPlaylistBlock:function(){return p}});var l=e(9753),n=e(60836),s=e(98639),a=e(31014),r=e(23881),o=e(28852),u=e(2570),c=e(98746),d=e.n(c);let p=i=>{let{className:t,isEmptySearch:e}=i,c=(0,s.useMemo)(()=>e?(0,l.jsx)(a.Z,{id:"search-results.not-found-title"}):(0,l.jsx)(a.Z,{id:"error-messages.empty-collection-playlist-title"}),[e]),p=(0,s.useMemo)(()=>e?(0,l.jsx)(a.Z,{id:"search-results.not-found-description"}):(0,l.jsx)(a.Z,{id:"error-messages.empty-collection-playlist-description"}),[e]);return(0,l.jsxs)("div",{className:(0,n.W)(d().root,t),...(0,r.BA)(r.bG.playlist.PLAYLIST_EMPTY_BLOCK),children:[(0,l.jsx)("div",{className:d().iconBackground,children:(0,l.jsx)(o.J,{variant:"search",size:"l",className:d().icon,...(0,r.BA)(r.bG.playlist.PLAYLIST_EMPTY_BLOCK_ICON)})}),(0,l.jsx)(u.Heading,{variant:"h3",size:"xs",className:d().title,...(0,r.BA)(r.bG.playlist.PLAYLIST_EMPTY_BLOCK_TITLE),children:c}),(0,l.jsx)(u.Caption,{variant:"span",size:"l",className:d().subtitle,...(0,r.BA)(r.bG.playlist.PLAYLIST_EMPTY_BLOCK_TEXT),children:p})]})}},22003:function(i,t,e){"use strict";e.d(t,{PlaylistCard:function(){return h}});var l=e(9753),n=e(60836),s=e(9544),a=e(98639),r=e(80542),o=e(18375),u=e(23881),c=e(84338),d=e(27491),p=e(28852),y=e(12404),m=e(2570),k=e(33589),C=e(10668),v=e(34152),_=e(3084);let P=i=>{let{formatMessage:t}=(0,r.Z)();return(0,a.useMemo)(()=>{let e="";i.isLiked&&!i.actualLikesCount?e=t({id:"entity-names.has-your-like"}):"number"==typeof i.actualLikesCount&&(e=i.actualLikesCount>0?t({id:"entity-names.likes-counter"},{counter:i.actualLikesCount}):t({id:"entity-names.likes-counter-empty"}));let l=t({id:"entity-names.playlist-name"},{playlistName:i.title});return"".concat(l," ").concat(e)},[t,i])};var f=e(385);let L=(0,s.Pi)(i=>{var t;let{playlist:e,onOpenChange:n,open:s,...u}=i,{settings:c,trailer:d}=(0,v.oR4)(),p=(0,C.SB)(e),y=(0,C.BV)(e),m=(0,v.FTC)(),k=c.layout===v.t8m.Mobile,{formatMessage:P}=(0,r.Z)();(0,v.ZP4)(s);let L=(0,a.useCallback)(()=>{d.openPlaylistTrailer(e.id),m(o.OB.Playlist,e.id)},[e.id,m,d]);return(0,l.jsxs)(f.v2,{title:e.title,onOpenChange:n,open:s,offsetOptions:10,isMobile:k,ariaLabel:P({id:"interface-actions.context-menu"}),...u,children:[!k&&(0,l.jsx)(_.Zd,{onClick:y,isPinned:e.isPinned}),!e.isFavouritePlaylist&&(0,l.jsx)(_.xZ,{onClick:p,isLiked:e.isLiked}),(null===(t=e.trailer)||void 0===t?void 0:t.canShow)&&(0,l.jsx)(_.NB,{onClick:L})]})});var x=e(88308),B=e.n(x);let h=(0,s.Pi)(i=>{let{className:t,playlist:e,children:s,contentLinesCount:f,customDescription:x}=i,{ref:h,intersectionPropertyId:j}=(0,v.VfV)(),{trailer:b}=(0,v.oR4)(),{from:g}=(0,v.MhG)(),{formatMessage:N}=(0,r.Z)(),{sendLikeSearchFeedback:S,sendNavigateSearchFeedback:T,sendPlaySearchFeedback:V}=(0,v.sAF)(),[R,A]=(0,a.useState)(!1),[E,w]=(0,a.useState)(!1),[O,M]=(0,a.useState)(!1),I=P(e),z=(0,C.SB)(e),K=(0,C.BV)(e),F=(0,v.zxW)(),Y=(0,v.s0h)(e.url),U=(0,v.s0h)(e.url,!0),G=(0,k.ik)(U,Y),Z=(0,v.FTC)(),W=(0,a.useCallback)(i=>{i.stopPropagation(),b.openPlaylistTrailer(e.id),Z(o.OB.Playlist,e.id)},[e.id,Z,b]),[D,H]=(0,a.useState)(!1),{isPlaying:q,togglePlay:J}=(0,v.qmq)({playContextParams:{contextData:{type:c.Ak.Playlist,meta:{id:e.id,uuid:e.uuid},from:g},loadContextMeta:!0}}),Q=(0,a.useCallback)(()=>{F({to:o.qU.PlaylistScreen}),null==T||T()},[F,T]),X=(0,a.useCallback)(i=>{Q(),G(i)},[G,Q]),$=(0,a.useCallback)(()=>{R||q||(A(!0),null==V||V()),J()},[q,R,V,J]),ii=(0,a.useCallback)(()=>{E||e.isLiked||(w(!0),null==S||S()),z()},[z,E,e.isLiked,S]),it=(0,a.useCallback)(i=>{i.preventDefault(),i.stopPropagation()},[]),ie=(0,a.useCallback)(()=>{M(!O),H(!O)},[O]),il=(0,a.useMemo)(()=>{var i;return x?(0,l.jsx)(m.Caption,{variant:"span",type:"entity",size:"s",weight:"medium",lineClamp:2,children:x},e.getKey("description")):(null===(i=e.artists)||void 0===i?void 0:i.length)?(0,l.jsx)(k.jO,{className:B().artists,artists:e.artists,lineClamp:1,linkClassName:B().artistLink,captionSize:"s"},e.getKey("description")):void 0},[x,e]),is=(0,a.useMemo)(()=>{if(!e.isFavouritePlaylist)return(0,l.jsx)(_.dJ,{className:(0,n.W)(B().likeButton,B().control),isLiked:e.isLiked,onClick:ii,variant:"default",size:"s",iconSize:"xxs"},e.getKey("LikeButton"))},[ii,e]),ia=(0,a.useMemo)(()=>{var i;if(null==e?void 0:null===(i=e.trailer)||void 0===i?void 0:i.canShow)return(0,l.jsx)(_.xf,{children:(0,l.jsx)(_.eP,{className:(0,n.W)(B().trailerButton,B().control),radius:"round",size:"s",iconSize:"xxs",onClick:W},e.getKey("TrailerButton"))})},[W,e]),ir=(0,a.useMemo)(()=>(0,l.jsx)(y.Paper,{className:B().cover,radius:"s",withShadow:!0,...(0,u.BA)(u.bG.playlist.PLAYLIST_CARD),children:(0,l.jsxs)("div",{className:B().coverBlock,onClick:X,children:[(0,l.jsx)(_.BE,{className:B().image,src:e.coverUri,size:200,fit:"cover",alt:I,withAvatarReplace:!0,"aria-hidden":!0}),(0,l.jsx)(d.kk,{isVisible:O||D,className:B().controls,playControl:(0,l.jsx)(_.JM,{className:(0,n.W)(B().playButton,B().control),buttonVariant:"default",withHover:!1,iconSize:"xl",variant:"filled",onClick:$,isPlaying:q,disabled:!e.isAvailable},e.getKey("PlayButton")),likeControl:is,menuControl:(0,l.jsx)(L,{playlist:e,onOpenChange:ie,open:O,onClick:it,className:(0,n.W)(B().menuButton,B().control),icon:(0,l.jsx)(p.J,{size:"xxs",variant:"more"}),size:"s",...(0,u.BA)(u.bG.playlist.PLAYLIST_CONTEXT_MENU_BUTTON)},e.getKey("PlaylistContextMenu")),pinControl:(0,l.jsx)(_.RT,{onClick:K,isPinned:e.isPinned,className:(0,n.W)(B().pinButton,B().control),withRipple:!1},e.getKey("PinButton")),trailerControl:ia})]})}),[X,e,I,O,D,$,q,is,ie,it,K,ia]),io=!!e.actualLikesCount&&!e.isLikesCountHidden;return(0,l.jsxs)(d.m7,{ref:h,"aria-label":I,className:(0,n.W)(B().root,t),title:(0,l.jsx)(m.Caption,{variant:"div",type:"entity",size:"s",weight:"medium",lineClamp:2,...(0,u.BA)(u.bG.playlist.PLAYLIST_TITLE),children:(0,l.jsx)(_.rU,{className:B().titleLink,href:e.url,onClick:Q,children:e.title})}),srTitle:(0,l.jsx)(_.rU,{href:e.url,onClick:Q,children:e.title}),"data-intersection-property-id":j,contentLinesCount:f,view:ir,description:il,...(0,u.BA)(u.bG.playlist.PLAYLIST_ITEM),children:[io&&(0,l.jsx)(_.DB,{ariaLabel:N({id:"entity-names.likes-counter"},{counter:e.actualLikesCount}),likesCount:e.actualLikesCount,isLiked:e.isLiked,handleLikeClick:z}),s]})})},18921:function(i,t,e){"use strict";e.d(t,{PlaylistsCarousel:function(){return o}});var l=e(9753),n=e(98639),s=e(3084),a=e(22003);let r=i=>{let{forwardRef:t,isShimmerVisible:e,isShimmerActive:n,title:r,description:o,playlists:u,containerClassName:c,className:d,headerClassName:p,viewAllActionLink:y,...m}=i;return(0,l.jsx)(s.HY,{isShimmerVisible:e,isShimmerActive:n,className:d,headerClassName:p,containerClassName:c,ref:t,title:r,description:o,viewAllActionLink:y,...m,children:null==u?void 0:u.map(i=>(0,l.jsx)(a.PlaylistCard,{playlist:i,contentLinesCount:3},i.key))})},o=(0,n.forwardRef)((i,t)=>(0,l.jsx)(r,{forwardRef:t,...i}))},98746:function(i){i.exports={root:"EmptyPlaylistBlock_root__wpA0j",iconBackground:"EmptyPlaylistBlock_iconBackground__pnUlz",title:"EmptyPlaylistBlock_title__pQQLf",subtitle:"EmptyPlaylistBlock_subtitle__P4Q7x"}},88308:function(i){i.exports={root:"PlaylistCard_root__i3pR4",controls:"PlaylistCard_controls__Ej8Rz",cover:"PlaylistCard_cover__tpK5L",coverBlock:"PlaylistCard_coverBlock__1slsN",image:"PlaylistCard_image__Li6oy",titleLink:"PlaylistCard_titleLink__H8qEc",artists:"PlaylistCard_artists__HtVIF",artistLink:"PlaylistCard_artistLink__jx3KB",playButton:"PlaylistCard_playButton__eaduk",likeButton:"PlaylistCard_likeButton__RYXJz",menuButton:"PlaylistCard_menuButton__jFcWr",pinButton:"PlaylistCard_pinButton__jhWnL",trailerButton:"PlaylistCard_trailerButton__Qjg_U",control:"PlaylistCard_control__73YUq"}}}]);