(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8101],{18739:function(e,t,i){"use strict";i.d(t,{ap:function(){return Y},Ux:function(){return m}});var n,a,s=i(76873);let o=e=>!!e&&e.some(e=>{let[t]=(null==e?void 0:e.split(":"))||[];return e===s.sHr||t&&s.kF5.includes(t)});var l=i(42288);let r=e=>{let{type:t,tag:i}=e.id;return{title:e.name,seed:"".concat(t,":").concat(i),specialContext:e.specialContext,specialContextImage:e.specialContextImage}},c=e=>({value:e.value,title:e.name,seed:e.serializedSeed,imageUrl:e.imageUrl}),d=(e,t)=>{let i=[];return t.possibleValues.forEach(e=>{e.unspecified||i.push(c(e))}),{type:e,title:t.name,values:(0,l.pj)(i)}};(n=a||(a={})).DIVERSITY="diversity",n.MOOD_ENERGY="moodEnergy",n.LANGUAGE="language";let u=l.V5.model("ContextItem",{title:l.V5.string,seed:l.V5.string,specialContext:l.V5.boolean,specialContextImage:l.V5.optional(l.V5.string,"")}),g=l.V5.model("RestrictonValue",{value:l.V5.string,title:l.V5.string,seed:l.V5.string,imageUrl:l.V5.maybe(l.V5.string)}),_=l.V5.model("Restricton",{type:l.V5.enumeration(Object.values(a)),title:l.V5.string,values:l.V5.array(g)}),m=l.V5.model("VibeSettings",{loadingState:l.V5.enumeration(Object.values(s.Gui)),contextItems:l.V5.array(u),diversity:l.V5.maybeNull(_),moodEnergy:l.V5.maybeNull(_),language:l.V5.maybeNull(_)}).views(e=>({get isNeededToLoad(){return e.loadingState===s.Gui.IDLE}})).actions(e=>({getData:(0,l.ls)(function*(t){let{rotorResource:i,modelActionsLogger:n}=(0,l.dU)(e);if(e.loadingState!==s.Gui.PENDING)try{var o,c,u,g;e.loadingState=s.Gui.PENDING;let n=yield i.waveSettings(t);(null==n?void 0:null===(o=n.settingRestrictions)||void 0===o?void 0:o.diversity)&&(e.diversity=d(a.DIVERSITY,n.settingRestrictions.diversity)),(null==n?void 0:null===(c=n.settingRestrictions)||void 0===c?void 0:c.moodEnergy)&&(e.moodEnergy=d(a.MOOD_ENERGY,n.settingRestrictions.moodEnergy)),(null==n?void 0:null===(u=n.settingRestrictions)||void 0===u?void 0:u.language)&&(e.language=d(a.LANGUAGE,n.settingRestrictions.language));let _=Array.isArray(null==n?void 0:n.blocks)&&(null==n?void 0:null===(g=n.blocks)||void 0===g?void 0:g.find(e=>(null==e?void 0:e.type)==="contexts"));_&&Array.isArray(_.items)&&(e.contextItems=(0,l.pj)(_.items.map(r))),e.loadingState!==s.Gui.IDLE&&(e.loadingState=s.Gui.RESOLVE)}catch(t){n.error(t),e.loadingState!==s.Gui.IDLE&&(e.loadingState=s.Gui.REJECT)}}),reset(){e.loadingState=s.Gui.IDLE,e.contextItems=(0,l.pj)([]),e.diversity=null,e.moodEnergy=null,e.language=null}}));var p=i(9753),v=i(9544),b=i(98639),x=i(80542),E=i(31014),y=i(23881),B=i(98342),h=i(39513),N=i(28852),S=i(75316),I=i(5773),V=i(2570);let R=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,[t,i]=(0,b.useState)(e),{contentRef:n}=(0,s.$Y6)();return(0,b.useEffect)(()=>{let e=new ResizeObserver(e=>{let[n]=e||[];n&&n.contentRect.height!==t&&i(n.contentRect.height)});return n&&e.observe(n),()=>{e.disconnect()}},[t,n]),{contentHeight:t}};var j=i(60836),f=i(16636),C=i(1673),T=i.n(C);let G=e=>{let{title:t,children:i,restrictionsClassName:n,...a}=e;return(0,p.jsxs)("section",{className:T().root,...(0,s.tEg)(a),children:[(0,p.jsx)(V.Caption,{variant:"span",type:"text",size:"m",weight:"medium","aria-hidden":!0,children:t}),(0,p.jsx)(f.y,{children:(0,p.jsx)(V.Heading,{variant:"h4",children:t})}),(0,p.jsx)("div",{className:(0,j.W)(T().restrictions,n),children:i})]})};var L=i(86939);let k=e=>{var t,i,n;let{seed:a,title:o,isStation:l}=e,{vibe:r}=(0,s.oR4)(),{applySetting:c}=(0,s.QhE)({seeds:null!==(n=null===(t=r.meta)||void 0===t?void 0:t.seeds)&&void 0!==n?n:[],pageIdForFrom:s.Rhz.HOME,blockIdForFrom:s.BEo.RUP_MAIN_RADIO}),{formatMessage:d}=(0,x.Z)(),u=!!(null===(i=r.meta)||void 0===i?void 0:i.seeds.includes(a)),g=r.applyingSetting===a,_=(0,b.useMemo)(()=>u?"".concat(d({id:"vibe-actions.remove"})," ").concat(o):"".concat(d({id:"vibe-actions.apply"})," ").concat(o),[u,o,d]);return{isApplying:g,isSelected:u,ariaLabel:_,ariaPressed:u,onClickHandler:(0,b.useCallback)(async()=>{r.setApplyingSetting(a),await c(a,l),r.setApplyingSetting()},[c,l,a,r])}};var O=i(29715),A=i.n(O);let z=(0,v.Pi)(e=>{let{item:t}=e,{vibe:i}=(0,s.oR4)(),n=(0,b.useRef)(null),{isApplying:a,isSelected:o,ariaPressed:l,onClickHandler:r}=k({seed:t.seed,title:t.title,isStation:!0}),c=(0,b.useCallback)(e=>{i.isLoading||(n.current&&(0,B.m)(e,A().ripple,n.current),r())},[r,i.isLoading]);return(0,p.jsxs)(h.z,{radius:"xxxl",className:(0,j.W)(A().button,A().textButton,{[A().button_selected]:o,[A().button_applying]:a,[A().specialButton]:t.specialContext}),onClick:c,"aria-disabled":i.isLoading,"aria-pressed":l,withRipple:!1,...(0,y.BA)(y.bG.vibeSettings.VIBE_SETTINGS_CONTEXT_BUTTON),children:[t.specialContext&&(0,p.jsx)(L.Image,{className:A().specialImage,src:t.specialContextImage,size:100,fit:"cover",withAvatarReplace:!0}),(0,p.jsx)(V.Caption,{variant:"span",type:"controls",size:"m",weight:"medium",className:A().title,children:t.title}),(0,p.jsx)("div",{className:A().rippleContainer,ref:n})]})}),P=(0,v.Pi)(e=>{let{type:t,restrictionValue:i}=e,{vibe:n}=(0,s.oR4)(),o=(0,b.useRef)(null),{isApplying:l,isSelected:r,ariaPressed:c,onClickHandler:d}=k({seed:i.seed,title:i.title}),u=(0,b.useCallback)(e=>{n.isLoading||(o.current&&(0,B.m)(e,A().ripple,o.current),d())},[d,n.isLoading]),g=(0,b.useMemo)(()=>(0,p.jsx)(V.Caption,{variant:"span",type:"controls",size:"m",weight:"medium",className:A().title,children:i.title}),[i.title]);switch(t){case a.DIVERSITY:return(0,p.jsxs)(h.z,{className:(0,j.W)(A().button,A().diversityButton,{[A().button_selected]:r,[A().button_applying]:l}),radius:"xl","aria-disabled":n.isLoading,"aria-pressed":c,onClick:u,withRipple:!1,...(0,y.BA)(y.bG.vibeSettings.VIBE_SETTINGS_DIVERSITY_BUTTON),children:[(0,p.jsx)(L.Image,{"aria-hidden":!0,src:i.imageUrl,fit:"contain",width:40,height:40,withAvatarReplace:!0,className:A().diversityButtonImage}),g,(0,p.jsx)("div",{className:A().rippleContainer,ref:o})]});case a.MOOD_ENERGY:return(0,p.jsxs)("div",{className:A().moodEnergy,...(0,y.BA)(y.bG.vibeSettings.VIBE_SETTINGS_MOOD_ENERGY_BUTTON),children:[(0,p.jsx)(h.z,{variant:"text",className:(0,j.W)(A().button,A().moodEnergyButton,{[A().button_selected]:r,[A().button_applying]:l}),radius:"round",onClick:u,withRipple:!1,"aria-disabled":n.isLoading,"aria-pressed":c,"aria-label":i.title,children:(0,p.jsx)(L.Image,{src:i.imageUrl,fit:"contain",width:52,height:52,"aria-hidden":!0,withAvatarReplace:!0,className:A().moodEnergyButtonImage})}),(0,p.jsx)("span",{"aria-hidden":!0,children:g})]});case a.LANGUAGE:return(0,p.jsxs)(h.z,{radius:"xxxl",className:(0,j.W)(A().button,A().textButton,{[A().button_selected]:r,[A().button_applying]:l}),onClick:u,withRipple:!1,"aria-disabled":n.isLoading,"aria-pressed":c,...(0,y.BA)(y.bG.vibeSettings.VIBE_SETTINGS_LANGUAGE_BUTTON),children:[g,(0,p.jsx)("div",{className:A().rippleContainer,ref:o})]});default:return null}});var M=i(42052),U=i.n(M);let D=(0,v.Pi)(()=>{let{vibeSettings:e}=(0,s.oR4)(),{formatMessage:t}=(0,x.Z)();return e.isNeededToLoad&&e.getData(),(0,p.jsxs)("div",{className:U().root,children:[e.contextItems.length>0&&(0,p.jsx)(G,{title:t({id:"interface-actions.my-vibe-context-settings"}),restrictionsClassName:U().contextItems,...(0,y.BA)(y.bG.vibeSettings.VIBE_SETTINGS_CONTEXT_BLOCK),children:e.contextItems.map(e=>(0,p.jsx)(z,{item:e,...(0,y.BA)(y.bG.vibeSettings.VIBE_SETTINGS_CONTEXT_BUTTON)},e.seed))}),e.diversity&&(0,p.jsx)(G,{title:e.diversity.title,restrictionsClassName:U().diversity,...(0,y.BA)(y.bG.vibeSettings.VIBE_SETTINGS_DIVERSITY_BLOCK),children:e.diversity.values.map(t=>{var i;return(0,p.jsx)(P,{type:null===(i=e.diversity)||void 0===i?void 0:i.type,restrictionValue:t},t.value)})}),e.moodEnergy&&(0,p.jsx)(G,{title:e.moodEnergy.title,restrictionsClassName:U().moodEnergy,...(0,y.BA)(y.bG.vibeSettings.VIBE_SETTINGS_MOOD_ENERGY_BLOCK),children:e.moodEnergy.values.map(t=>{var i;return(0,p.jsx)(P,{type:null===(i=e.moodEnergy)||void 0===i?void 0:i.type,restrictionValue:t},t.value)})}),e.language&&(0,p.jsx)(G,{title:e.language.title,restrictionsClassName:U().contextItems,...(0,y.BA)(y.bG.vibeSettings.VIBE_SETTINGS_LANGUAGE_BLOCK),children:e.language.values.map(t=>{var i;return(0,p.jsx)(P,{type:null===(i=e.language)||void 0===i?void 0:i.type,restrictionValue:t},t.value)})})]})});var w=i(67654),F=i.n(w);let W={duration:300,initial:{transform:"translateX(5%)",opacity:0},open:{transform:"translateX(0)",opacity:1},close:{transform:"translateX(5%)",opacity:0}},Y=(0,v.Pi)(()=>{var e,t,i,n;let{formatMessage:a}=(0,x.Z)(),{vibe:l,settings:r,vibeSettings:c}=(0,s.oR4)(),{pageId:d}=(0,s.lVB)(),{blockIdForFrom:u}=(0,s.qYG)(),g=(0,b.useRef)(null),_=(0,b.useRef)(null),{resetSettings:m}=(0,s.QhE)({seeds:null!==(n=null===(e=l.meta)||void 0===e?void 0:e.seeds)&&void 0!==n?n:[],pageIdForFrom:d,blockIdForFrom:u}),{contentRef:v}=(0,s.$Y6)(),{contentHeight:j}=R(0),[f,C]=(0,b.useState)(!1);(0,b.useEffect)(()=>()=>{c.reset()},[c]);let T=(0,b.useCallback)(()=>{C(!1)},[C]),G=r.layout===s.t8m.Mobile,L=(0,b.useMemo)(()=>G?{height:"90vh"}:v?{insetInlineEnd:20,insetBlockStart:v.offsetTop+7,height:j-16}:{},[j,v,G]),k=!!(l.isLoading||l.isMyVibe),O=(0,b.useCallback)(e=>{if(!l.isLoading){var t;g.current&&(0,B.m)(e,F().ripple,g.current),m(),null===(t=_.current)||void 0===t||t.focus()}},[m,l.isLoading]),A=(0,b.useMemo)(()=>{var e,t;if(o(null===(e=l.meta)||void 0===e?void 0:e.seeds))return(null===(t=l.meta)||void 0===t?void 0:t.context)?(0,p.jsx)(h.z,{className:F().toggleSettingsButton,size:"m",radius:"round",icon:(0,p.jsx)(N.Icon,{variant:"filter",size:"xs"}),"aria-label":a({id:"vibe-actions.aria-label-settings"}),...(0,y.BA)(y.bG.vibeSettings.VIBE_SETTINGS_BUTTON)}):(0,p.jsx)(h.z,{className:F().toggleSettingsButton,size:"default",radius:"xxxl",icon:(0,p.jsx)(N.Icon,{variant:"filter",size:"xxs"}),"aria-label":a({id:"vibe-actions.aria-label-settings"}),...(0,y.BA)(y.bG.vibeSettings.VIBE_SETTINGS_BUTTON),children:(0,p.jsx)(V.Caption,{variant:"span",type:"controls",size:"m",weight:"medium",children:(0,p.jsx)(E.Z,{id:"interface-actions.configure-my-vibe"})})})},[a,null===(t=l.meta)||void 0===t?void 0:t.context,null===(i=l.meta)||void 0===i?void 0:i.seeds]);return(0,p.jsxs)(S.J2,{placement:"bottom",isMobile:G,strategy:"fixed",transform:!1,positionElement:v,disableFloatingStyles:!G,open:f,onOpenChange:C,style:L,overlayClassName:F().overlay,transition:W,children:[A,(0,p.jsx)(S.yk,{className:F().popover,...(0,y.BA)(y.bG.vibeSettings.VIBE_SETTINGS_BLOCK),children:(0,p.jsxs)("div",{className:F().root,children:[(0,p.jsxs)("div",{className:F().header,children:[(0,p.jsx)(V.Heading,{variant:"h3",size:"s",weight:"bold",...(0,y.BA)(y.bG.vibeSettings.VIBE_SETTINGS_TITLE),children:(0,p.jsx)(E.Z,{id:"interface-actions.my-vibe-settings"})}),(0,p.jsxs)("div",{className:F().actions,children:[(0,p.jsx)(I.u,{offsetOptions:4,placement:"left",text:a({id:"interface-actions.reset-my-vibe-settings"}),children:(0,p.jsx)(h.z,{variant:"outline",radius:"round",size:"xxxs",icon:(0,p.jsx)(N.Icon,{variant:"reset",size:"xxxs"}),onClick:O,disabled:!!l.isMyVibe,"aria-hidden":!!l.isMyVibe,"aria-disabled":k,"aria-label":a({id:"interface-actions.reset-my-vibe-settings"}),ref:g,...(0,y.BA)(y.bG.vibeSettings.VIBE_SETTINGS_RESET_BUTTON)})}),(0,p.jsx)(h.z,{radius:"round",color:"secondary",size:"xxs",icon:(0,p.jsx)(N.Icon,{variant:"close",size:"xxs"}),onClick:T,"aria-label":a({id:"interface-actions.close-my-vibe-settings"}),ref:_,...(0,y.BA)(y.bG.vibeSettings.VIBE_SETTINGS_CLOSE_BUTTON)})]})]}),(0,p.jsx)(D,{})]})})]})})},58101:function(e,t,i){"use strict";i.d(t,{MainPage:function(){return S}});var n=i(9753),a=i(60836),s=i(9544),o=i(74717),l=i(98639),r=i(80542),c=i(23881),d=i(31490),u=i(39513),g=i(41055),_=i(5773),m=i(2570),p=i(14253),v=i(68106),b=i(54350),x=i(60713),E=i(60424),y=i(76873),B=i(3084),h=i(60966),N=i.n(h);let S=(0,s.Pi)(e=>{let{withVideoModal:t}=e,{main:i,user:s,experiments:h,releaseNotes:S,fullscreenVideoPlayer:I}=(0,y.oR4)(),{formatMessage:V}=(0,r.Z)(),R=(0,y.bop)(),{contentScrollRef:j,setContentScrollRef:f}=(0,y.$Y6)(),[C,T]=(0,y.zU3)(),G=(0,o.useSearchParams)().get(y.wxR.IDS),L=(0,x.Yd)(G),k=h.checkExperiment(y.peG.WebNextClips,"on");if(t&&k&&L.length&&(I.setIds(L),I.modal.open()),t&&!k&&(0,o.notFound)(),i.landing.loadingState===y.Gui.IDLE){let e=s.isAuthorized?d.jB.WEB_MAIN:d.jB.MAIN_NOLOGIN;(0,l.use)(i.landing.getSkeleton({id:e,showWizard:s.settings.showWizard},{preloadBlocks:2}))}(0,l.useEffect)(()=>()=>i.landing.reset(),[i.landing]),(0,y.NOh)(i.landing.loadingState===y.Gui.RESOLVE);let O=h.checkExperiment(y.peG.WebNextDisableVibe,"on"),A=(0,l.useCallback)(()=>{S.isReady&&S.modal.open()},[S.isReady,S.modal]),z=(0,l.useMemo)(()=>O?{"margin-block-start":"1vh"}:{},[O]),P=(0,l.useMemo)(()=>(0,n.jsxs)(_.u,{placement:"right",offsetOptions:4,children:[(0,n.jsx)(u.z,{color:"secondary",radius:"xl","aria-label":"Beta ".concat(V({id:"desktop.app-version"},{version:R})),className:(0,a.W)(N().beta,{[N().beta_withReleaseNotes]:S.isReady}),onClick:A,children:(0,n.jsx)(m.Caption,{variant:"div",type:"text",size:"s",weight:"medium",children:"Beta"})}),(0,n.jsx)(_._v,{children:R})]}),[V,A,S.isReady,R]),M=(0,l.useMemo)(()=>[(0,y.FsJ)(h.checkExperiment(y.peG.WebNextEntityTrailerOnboarding,"on"))],[h]);return(0,n.jsx)(y.Lh6,{pageId:y.Rhz.HOME,children:(0,n.jsx)(y.kZw,{config:M,children:(0,n.jsx)(E.I7,{scrollElement:j,headerElement:C,children:(0,n.jsxs)(g.t,{className:N().root,containerClassName:N().content,ref:f,...(0,c.BA)(c.Br.main.MAIN_PAGE),children:[P,!O&&(0,n.jsx)(y.Ja5,{blockIdForFrom:y.BEo.RUP_MAIN_RADIO,blockId:y.aUg.RUP,blockType:y.aUg.RUP,blockPosX:0,blockPosY:0,objectsCount:0,children:(0,n.jsx)(b.w,{className:N().vibe})}),(0,n.jsx)("div",{className:N().header,ref:T}),(0,n.jsx)(p.Od,{landing:i.landing,errorComponent:(0,n.jsx)(v.D,{className:N().error,withBackwardControl:!1}),containerClassName:N().landing,headerClassName:N().header,containerStyle:z,blockHeadingVariant:"h2"}),(0,n.jsx)(B.$_,{className:N().footer})]})})})})})},54350:function(e,t,i){"use strict";i.d(t,{a:function(){return l},w:function(){return O}});var n=i(42288),a=i(31490),s=i(40029),o=i(76873);let l=n.V5.model("VibeActions",{meta:n.V5.maybeNull(s.KW),applyingSetting:n.V5.maybeNull(n.V5.string),isLoading:n.V5.boolean,getLastLoadingState:n.V5.enumeration(Object.values(o.Gui)),vibeResetLoadingState:n.V5.enumeration(Object.values(o.Gui))}).views(e=>({get isMyVibe(){return e.meta&&1===e.meta.seeds.length&&e.meta.seeds[0]===o.sHr}})).actions(e=>({getLastVibe:(0,n.ls)(function*(){let{rotorResource:t,modelActionsLogger:i}=(0,n.dU)(e);if(e.getLastLoadingState!==o.Gui.PENDING)try{e.getLastLoadingState=o.Gui.PENDING;let i=yield t.waveLast();e.meta=(0,s.xF)(i),e.getLastLoadingState=o.Gui.RESOLVE}catch(t){i.error(t),e.getLastLoadingState=o.Gui.REJECT}}),vibeReset:(0,n.ls)(function*(){let{rotorResource:t,modelActionsLogger:i}=(0,n.dU)(e);if(e.vibeResetLoadingState!==o.Gui.PENDING)try{e.vibeResetLoadingState=o.Gui.PENDING,(yield t.waveLastReset())===a.NE.OK&&(e.meta=(0,s.xF)({name:"",seeds:[o.sHr],stationId:o.sHr,idForFrom:o.sHr})),e.vibeResetLoadingState=o.Gui.RESOLVE}catch(t){i.error(t),e.vibeResetLoadingState=o.Gui.REJECT}}),setApplyingSetting(t){t?e.applyingSetting=(0,n.pj)(t):e.applyingSetting=null},setIsLoading(t){e.isLoading=t},setVibe(t){e.meta=(0,s.xF)(t)},reset(){e.meta=null,e.vibeResetLoadingState=o.Gui.IDLE,e.getLastLoadingState=o.Gui.IDLE}}));var r=i(9753),c=i(60836),d=i(9544),u=i(98639),g=i(31014),_=i(23881),m=i(2570),p=i(30460),v=i(16189),b=i(39513),x=i(90679);let E=(0,d.Pi)(e=>{let{className:t}=e,{mainText:i,additionText:n,isShimmerVisible:a,isShimmerActive:s,openPaymentWidgetModal:o}=(0,p.x)({storeName:"music"}),l=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),o()},[o]);return a?(0,r.jsx)(x.Shimmer,{className:t,isActive:s,radius:"xxxl"}):(0,r.jsxs)(b.z,{className:t,isBlock:!0,color:"plus",variant:"default",size:"l",radius:"xxxl",onClick:l,children:[(0,r.jsx)(m.Caption,{variant:"div",size:"l",lineClamp:1,children:i}),(0,r.jsx)(m.Caption,{variant:"div",size:"xs",lineClamp:1,children:n})]})});var y=i(80542),B=i(28852),h=i(60299),N=i.n(h);let S=(0,d.Pi)(e=>{let{isPlaying:t,onClick:i,ariaDisabled:n,className:a}=e,{vibe:s}=(0,o.oR4)(),{formatMessage:l}=(0,y.Z)(),d=t?"pauseVibe":"playVibe",m=t?_.QM.vibe.MY_VIBE_PAUSE_BUTTON:_.QM.vibe.MY_VIBE_PLAY_BUTTON,p=(0,u.useMemo)(()=>t?l({id:"vibe-actions.aria-label-pause"}):l({id:"vibe-actions.aria-label-play"}),[l,t]),v=(0,u.useCallback)(e=>{s.isLoading||null==i||i(),e.stopPropagation(),e.preventDefault()},[i,s.isLoading]);return(0,r.jsx)(b.z,{className:(0,c.W)(N().root,{[N().root_isLoading]:s.isLoading},a),withRipple:!1,withHover:!1,onClick:v,variant:"text","aria-disabled":s.isLoading||n,"aria-label":p,icon:(0,r.jsx)(B.Icon,{size:"s",className:(0,c.W)(N().icon,N()["icon_".concat(d)]),variant:d}),...(0,_.BA)(m),children:(0,r.jsx)(g.Z,{id:"entity-names.my-vibe"})})});var I=i(74717);let V=e=>{let{className:t}=e,i=(0,I.useRouter)(),n=(0,o.uK4)().get(o.xit),a=(0,u.useCallback)(()=>{n.authorizationUrl&&i.push(n.authorizationUrl)},[n.authorizationUrl,i]);return(0,r.jsx)(b.z,{onClick:a,className:t,isBlock:!0,color:"primary",variant:"default",size:"l",radius:"xxxl",children:(0,r.jsx)(m.Caption,{variant:"div",size:"l",lineClamp:1,children:(0,r.jsx)(g.Z,{id:"authorization.enter-button"})})})};var R=i(52527),j=i.n(R),f=i(18739),C=i(3084),T=i(70705),G=i.n(T);let L=(0,d.Pi)(e=>{var t;let{context:i,onResetClick:n,className:a}=e,{vibe:l,settings:d}=(0,o.oR4)(),{formatMessage:u}=(0,y.Z)(),g=(0,s.BV)(l.meta),p=d.layout===o.t8m.Mobile,v=i&&!p;return(0,r.jsxs)("div",{className:(0,c.W)(G().root,a),children:[v&&(0,r.jsx)(C.RT,{size:"m",iconSize:"xs",withScaleAnimation:!1,isPinned:null===(t=l.meta)||void 0===t?void 0:t.isPinned,onClick:g,className:G().pinButton}),(0,r.jsx)(f.ap,{}),i&&(0,r.jsxs)("div",{className:(0,c.W)(G().context),...(0,_.BA)(_.QM.vibe.VIBE_CONTEXT),children:[(0,r.jsx)(m.Caption,{variant:"span",type:"controls",size:"m",weight:"medium",lineClamp:1,children:i}),(0,r.jsx)(b.z,{className:G().resetButton,variant:"text",radius:"round",withRipple:!1,icon:(0,r.jsx)(B.Icon,{variant:"close",size:"xxs"}),onClick:n,"aria-label":"".concat(u({id:"vibe-actions.reset-settings"})," ").concat(i),...(0,_.BA)(_.QM.vibe.RESET_VIBE_CONTEXT_BUTTON)})]})]})}),k="vibe-block-controls",O=(0,d.Pi)(e=>{var t,i,n;let{className:a}=e,{vibe:s,experiments:l,user:d}=(0,o.oR4)(),[b,x]=(0,o.zU3)(),{pageId:y}=(0,o.lVB)(),{blockIdForFrom:B}=(0,o.qYG)(),{isFreemium:h}=(0,o.NMB)(),N=(0,p.x)({storeName:"music",isEnabled:h,offerElement:{element:b,intersectionPropertyId:k}}),{isVibeContext:I,isPlaying:R,togglePlay:f,resetSettings:C}=(0,o.QhE)({seeds:null!==(n=null===(t=s.meta)||void 0===t?void 0:t.seeds)&&void 0!==n?n:[],pageIdForFrom:y,blockIdForFrom:B}),T=l.checkExperiment(o.peG.WebNextDisableVibeSettings,"on")||h;s.getLastLoadingState===o.Gui.IDLE&&(0,u.use)(s.getLastVibe());let G=(0,u.useCallback)(()=>{I?C():s.vibeResetLoadingState!==o.Gui.PENDING&&s.vibeReset()},[I,s,C]),O=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),h&&N.openPaymentWidgetModal()},[h,N]),A=(0,u.useCallback)(()=>{if(!h){f();return}N.openPaymentWidgetModal()},[h,f,N]);return(0,u.useEffect)(()=>()=>{s.reset()},[s]),(0,r.jsxs)("div",{className:(0,c.W)(j().root,{[j().root_freemium]:h},a),...(0,_.BA)(_.QM.vibe.VIBE_BLOCK),children:[(0,r.jsx)(v.i,{className:j().vibeAnimation}),(0,r.jsxs)("div",{className:j().controls,onClick:O,ref:x,"data-intersection-property-id":k,children:[(0,r.jsx)(S,{className:j().playButton,isPlaying:R,ariaDisabled:h,onClick:A}),!T&&(0,r.jsx)(L,{className:j().settingsButton,context:null===(i=s.meta)||void 0===i?void 0:i.context,onResetClick:G}),(h||!d.isAuthorized)&&(0,r.jsx)(m.Caption,{className:j().subscriptionText,variant:"div",size:"l",children:(0,r.jsx)(g.Z,{id:"vibe-freemium.available-in-plus",values:{br:(0,r.jsx)("br",{})}})}),!d.isAuthorized&&(0,r.jsx)(V,{className:j().button}),h&&(0,r.jsx)(E,{className:j().button})]})]})})},1673:function(e){e.exports={root:"RestrictionBlock_root__P_g9o",restrictions:"RestrictionBlock_restrictions__BhR_r"}},29715:function(e){e.exports={button:"RestrictionButton_button__eLMkU",button_selected:"RestrictionButton_button_selected__LHD20",button_applying:"RestrictionButton_button_applying___ik5f","applying-setting":"RestrictionButton_applying-setting__utqyc",diversityButton:"RestrictionButton_diversityButton__uclSi",diversityButtonImage:"RestrictionButton_diversityButtonImage__21oME",moodEnergy:"RestrictionButton_moodEnergy__q_I4y",moodEnergyButton:"RestrictionButton_moodEnergyButton__yKkaS",moodEnergyButtonImage:"RestrictionButton_moodEnergyButtonImage__zxT2C",textButton:"RestrictionButton_textButton__HC_AE",title:"RestrictionButton_title__UZn0O",specialButton:"RestrictionButton_specialButton__Di6B9",specialImage:"RestrictionButton_specialImage__0E3x2",rippleContainer:"RestrictionButton_rippleContainer__xPANO",ripple:"RestrictionButton_ripple__Rsu8b"}},42052:function(e){e.exports={root:"VibeRestrictions_root__efJez",diversity:"VibeRestrictions_diversity__qfOls",moodEnergy:"VibeRestrictions_moodEnergy__Le0Cy",contextItems:"VibeRestrictions_contextItems__JrF7D"}},67654:function(e){e.exports={root:"VibeSettings_root__ufZlV",popover:"VibeSettings_popover__VKqUc",overlay:"VibeSettings_overlay__pusb4",toggleSettingsButton:"VibeSettings_toggleSettingsButton__j6fIU",header:"VibeSettings_header__OAWe2",actions:"VibeSettings_actions__ckbMt",ripple:"VibeSettings_ripple__kmFX6"}},60966:function(e){e.exports={content:"MainPage_content__kskSM",root:"MainPage_root__STXqc",container:"MainPage_container__CB86l",vibe:"MainPage_vibe__XEBbh",landing:"MainPage_landing___FGNm",header:"MainPage_header__lPh0v",beta:"MainPage_beta__y32vb",beta_withReleaseNotes:"MainPage_beta_withReleaseNotes__WOjUk",footer:"MainPage_footer__2rGy2",error:"MainPage_error__u_UCm"}},60299:function(e){e.exports={root:"PlayButton_root__nYKdN",root_isLoading:"PlayButton_root_isLoading__925Sa","applying-setting":"PlayButton_applying-setting__3nbT9",icon:"PlayButton_icon__t_THQ",icon_pauseVibe:"PlayButton_icon_pauseVibe__Ogg_U",icon_playVibe:"PlayButton_icon_playVibe__BKPRh"}},52527:function(e){e.exports={vibeAnimation:"VibeBlock_vibeAnimation__XVEE6",controls:"VibeBlock_controls__BpDFL",root:"VibeBlock_root__z7LtR",root_freemium:"VibeBlock_root_freemium__4i2rV",playButton:"VibeBlock_playButton__6xU55",settingsButton:"VibeBlock_settingsButton__GeMtO",subscriptionText:"VibeBlock_subscriptionText__ODUZN",button:"VibeBlock_button__fWXM_"}},70705:function(e){e.exports={root:"VibeContext_root__dbiNv",context:"VibeContext_context__Z_82k",pinButton:"VibeContext_pinButton__b6SNF",resetButton:"VibeContext_resetButton__9KK4S"}}}]);